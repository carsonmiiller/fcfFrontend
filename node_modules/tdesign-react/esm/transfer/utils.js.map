{"version":3,"file":"utils.js","sources":["../../src/transfer/utils.ts"],"sourcesContent":["import isEmpty from 'lodash/isEmpty';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport React from 'react';\nimport { DataOption, TransferValue } from './type';\nimport { TNode } from '../common';\n\nexport const getDefaultValue = <T>(value: T | T[], defaultValue?: T): T[] => {\n  if (isEmpty(value)) {\n    return Array.isArray(defaultValue) ? defaultValue : [defaultValue, defaultValue];\n  }\n\n  if (Array.isArray(value)) return value;\n\n  return [defaultValue, defaultValue];\n};\n\nexport const getJSX = (value: string | TNode) => {\n  if (isString(value)) return value;\n\n  if (isFunction(value)) return value();\n\n  if (React.isValidElement(value)) return value;\n\n  return value;\n};\n\n// 获取所有叶子节点\nexport const getLeafNodes = (nodes: DataOption[]): DataOption[] => {\n  const resData = [];\n  const map = (nodes: DataOption[]) => {\n    nodes.forEach((child) => {\n      if (child.children && child.children.length > 0) {\n        return map(child.children);\n      }\n      resData.push(child);\n    });\n  };\n  map(nodes);\n  return resData;\n};\n\n// tree过滤checkeds数组中的key\nexport const filterCheckedTreeNodes = (nodes: DataOption[], checkeds: TransferValue[]): DataOption[] =>\n  nodes\n    .filter((item) => !checkeds.includes(item.value))\n    .map((item) => {\n      const newItem = { ...item };\n      if (item.children && item.children.length > 0) {\n        newItem.children = filterCheckedTreeNodes(item.children, checkeds);\n      }\n      return newItem;\n    })\n    .filter((item) => (item.children && item.children.length !== 0) || !item.children);\n\n// 获取目的树结构\nexport const getTargetNodes = (sourceNodes: DataOption[], data: DataOption[]): DataOption[] => {\n  const source = getLeafNodes(sourceNodes).map((item) => item.value);\n  return filterCheckedTreeNodes(data, source);\n};\n"],"names":["getDefaultValue","value","defaultValue","isEmpty","Array","isArray","getJSX","isString","isFunction","React","isValidElement","getLeafNodes","nodes","resData","map","nodes2","forEach","child","children","length","push","filterCheckedTreeNodes","checkeds","filter","item","includes","newItem","getTargetNodes","sourceNodes","data","source"],"mappings":"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"}