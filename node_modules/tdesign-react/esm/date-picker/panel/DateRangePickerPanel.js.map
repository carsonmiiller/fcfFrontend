{"version":3,"file":"DateRangePickerPanel.js","sources":["../../../src/date-picker/panel/DateRangePickerPanel.tsx"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\nimport useConfig from '../../_util/useConfig';\nimport { StyledProps } from '../../common';\nimport PanelContent from './PanelContent';\nimport ExtraContent from './ExtraContent';\nimport { TdDateRangePickerProps, DateValue } from '../type';\nimport type { TdTimePickerProps } from '../../time-picker';\nimport useTableData from './useTableData';\nimport useDisableDate from '../hooks/useDisableDate';\n\nexport interface DateRangePickerPanelProps extends TdDateRangePickerProps, StyledProps {\n  hoverValue?: string[];\n  activeIndex?: number;\n  isFirstValueSelected?: boolean;\n  year?: number[];\n  month?: number[];\n  timeValue?: string[];\n  onClick?: (context: { e: React.MouseEvent<HTMLDivElement> }) => void;\n  onCellClick?: (date: Date, context: { e: React.MouseEvent<HTMLDivElement>; partial: 'start' | 'end' }) => void;\n  onCellMouseEnter?: (date: Date, context: { partial: 'start' | 'end' }) => void;\n  onCellMouseLeave?: (context: { e: React.MouseEvent<HTMLDivElement> }) => void;\n  onJumperClick?: (flag: number, context: { partial: 'start' | 'end' }) => void;\n  onConfirmClick?: (context: { e: React.MouseEvent<HTMLButtonElement> }) => void;\n  onPresetClick?: (\n    preset: DateValue | (() => DateValue),\n    context: { e: React.MouseEventHandler<HTMLButtonElement> },\n  ) => void;\n  onYearChange?: (year: number, context: { partial: 'start' | 'end' }) => void;\n  onMonthChange?: (month: number, context: { partial: 'start' | 'end' }) => void;\n  onTimePickerChange?: TdTimePickerProps['onChange'];\n}\n\nconst DateRangePickerPanel = (props: DateRangePickerPanelProps) => {\n  const { classPrefix, datePicker: globalDatePickerConfig } = useConfig();\n  const panelName = `${classPrefix}-date-range-picker__panel`;\n  const {\n    value = [],\n    hoverValue = [],\n    mode,\n    format,\n    presets,\n    enableTimePicker,\n    presetsPlacement,\n    disableDate: disableDateFromProps,\n    firstDayOfWeek = globalDatePickerConfig.firstDayOfWeek,\n    isFirstValueSelected,\n\n    style,\n    className,\n    activeIndex,\n    year,\n    month,\n    timeValue = [],\n    onClick,\n    onConfirmClick,\n    onPresetClick,\n  } = props;\n\n  const disableDateOptions = useDisableDate({\n    disableDate: disableDateFromProps,\n    mode,\n    format,\n    start: isFirstValueSelected && activeIndex === 1 ? dayjs(value[0]).toDate() : undefined,\n    end: isFirstValueSelected && activeIndex === 0 ? dayjs(value[1]).toDate() : undefined,\n  });\n\n  const [startYear, endYear] = year;\n  const [startMonth, endMonth] = month;\n\n  const startTableData = useTableData({\n    isRange: true,\n    start: value[0] ? dayjs(value[0]).toDate() : undefined,\n    end: value[1] ? dayjs(value[1]).toDate() : undefined,\n    hoverStart: hoverValue[0] ? dayjs(hoverValue[0]).toDate() : undefined,\n    hoverEnd: hoverValue[1] ? dayjs(hoverValue[1]).toDate() : undefined,\n    year: startYear,\n    month: startMonth,\n    mode,\n    firstDayOfWeek,\n    ...disableDateOptions,\n  });\n  const endTableData = useTableData({\n    isRange: true,\n    start: value[0] ? dayjs(value[0]).toDate() : undefined,\n    end: value[1] ? dayjs(value[1]).toDate() : undefined,\n    hoverStart: hoverValue[0] ? dayjs(hoverValue[0]).toDate() : undefined,\n    hoverEnd: hoverValue[1] ? dayjs(hoverValue[1]).toDate() : undefined,\n    year: endYear,\n    month: endMonth,\n    mode,\n    firstDayOfWeek,\n    ...disableDateOptions,\n  });\n\n  const panelContentProps = {\n    mode,\n    format,\n    firstDayOfWeek,\n\n    enableTimePicker: props.enableTimePicker,\n    timePickerProps: props.timePickerProps,\n    onMonthChange: props.onMonthChange,\n    onYearChange: props.onYearChange,\n    onJumperClick: props.onJumperClick,\n    onCellClick: props.onCellClick,\n    onCellMouseEnter: props.onCellMouseEnter,\n    onCellMouseLeave: props.onCellMouseLeave,\n    onTimePickerChange: props.onTimePickerChange,\n  };\n\n  return (\n    <div\n      style={style}\n      className={classNames(panelName, className, {\n        [`${panelName}--direction-row`]: ['left', 'right'].includes(presetsPlacement),\n      })}\n      onClick={(e) => onClick?.({ e })}\n    >\n      {['top', 'left'].includes(presetsPlacement) ? (\n        <ExtraContent\n          presets={presets}\n          selectedValue={value[activeIndex]}\n          enableTimePicker={enableTimePicker}\n          onPresetClick={onPresetClick}\n          onConfirmClick={onConfirmClick}\n          presetsPlacement={presetsPlacement}\n        />\n      ) : null}\n      <div className={`${panelName}--content-wrapper`}>\n        {!enableTimePicker ? (\n          [\n            <PanelContent\n              key=\"startPanel\"\n              partial=\"start\"\n              year={startYear}\n              month={startMonth}\n              timeValue={timeValue[0]}\n              tableData={startTableData}\n              {...panelContentProps}\n            />,\n            <PanelContent\n              key=\"endPanel\"\n              partial=\"end\"\n              year={endYear}\n              month={endMonth}\n              timeValue={timeValue[1]}\n              tableData={endTableData}\n              {...panelContentProps}\n            />,\n          ]\n        ) : (\n          <PanelContent\n            key=\"start\"\n            partial={activeIndex ? 'end' : 'start'}\n            year={activeIndex ? endYear : startYear}\n            month={activeIndex ? endMonth : startMonth}\n            timeValue={activeIndex ? timeValue[1] : timeValue[0]}\n            tableData={activeIndex ? endTableData : startTableData}\n            {...panelContentProps}\n          />\n        )}\n      </div>\n      {['bottom', 'right'].includes(presetsPlacement) ? (\n        <ExtraContent\n          presets={presets}\n          selectedValue={value[activeIndex]}\n          enableTimePicker={enableTimePicker}\n          onPresetClick={onPresetClick}\n          onConfirmClick={onConfirmClick}\n          presetsPlacement={presetsPlacement}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nDateRangePickerPanel.displayName = 'DateRangePickerPanel';\n\nDateRangePickerPanel.defaultProps = {\n  mode: 'date',\n  enableTimePicker: false,\n  presetsPlacement: 'bottom',\n};\n\nexport default DateRangePickerPanel;\n"],"names":["DateRangePickerPanel","props","useConfig","classPrefix","globalDatePickerConfig","datePicker","panelName","value","hoverValue","mode","format","presets","enableTimePicker","presetsPlacement","disableDateFromProps","disableDate","firstDayOfWeek","isFirstValueSelected","style","className","activeIndex","year","month","timeValue","onClick","onConfirmClick","onPresetClick","disableDateOptions","useDisableDate","start","dayjs","toDate","end","startYear","endYear","startMonth","endMonth","startTableData","useTableData","isRange","hoverStart","hoverEnd","endTableData","panelContentProps","timePickerProps","onMonthChange","onYearChange","onJumperClick","onCellClick","onCellMouseEnter","onCellMouseLeave","onTimePickerChange","React","createElement","classNames","includes","e","ExtraContent","selectedValue","PanelContent","key","partial","tableData","displayName","defaultProps"],"mappings":"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"}