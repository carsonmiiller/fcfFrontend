{"version":3,"file":"Drawer.js","sources":["../../src/drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, useState, useEffect, useImperativeHandle, useRef } from 'react';\nimport classnames from 'classnames';\nimport { CloseIcon } from 'tdesign-icons-react';\n\nimport { addClass, removeClass } from '../_util/dom';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport getScrollbarWidth from '../_util/getScrollbarWidth';\nimport hasScrollBar from '../_util/hasScrollBar';\nimport { TdDrawerProps, DrawerEventSource } from './type';\nimport { StyledProps } from '../common';\nimport DrawerWrapper from './DrawerWrapper';\nimport Button from '../button';\nimport useConfig from '../_util/useConfig';\nimport { drawerDefaultProps } from './defaultProps';\n\nexport const CloseTriggerType: { [key: string]: DrawerEventSource } = {\n  CLICK_OVERLAY: 'overlay',\n  CLICK_CLOSE_BTN: 'close-btn',\n  CLICK_CANCEL_BTN: 'cancel',\n  KEYDOWN_ESC: 'esc',\n};\n\nexport interface DrawerProps extends TdDrawerProps, StyledProps {}\n\nconst getSizeValue = (size: string): string => {\n  const defaultSize = isNaN(Number(size)) ? size : `${size}px`;\n  return (\n    {\n      small: '300px',\n      medium: '500px',\n      large: '760px',\n    }[size] || defaultSize\n  );\n};\n\nconst Drawer = forwardRef((props: DrawerProps, ref: React.Ref<HTMLDivElement>) => {\n  const {\n    className,\n    style,\n    visible,\n    attach = '',\n    showOverlay,\n    size,\n    placement,\n    onCancel,\n    onConfirm,\n    onClose,\n    onCloseBtnClick,\n    onOverlayClick,\n    onEscKeydown,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    closeOnEscKeydown,\n    children,\n    header,\n    body,\n    footer,\n    closeBtn,\n    cancelBtn,\n    confirmBtn,\n    zIndex,\n    destroyOnClose,\n    mode,\n    preventScrollThrough = true,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('drawer');\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const { classPrefix } = useConfig();\n  const containerRef = useRef<HTMLDivElement>();\n  const contentWrapperRef = useRef<HTMLDivElement>();\n  const drawerWrapperRef = useRef<HTMLElement>(); // 即最终的 attach dom，默认为 document.body\n  const prefixCls = `${classPrefix}-drawer`;\n  const lockCls = `${prefixCls}--lock`;\n\n  const transform = visible ? 'translate(0px)' : '';\n  const closeIcon = React.isValidElement(closeBtn) ? closeBtn : <CloseIcon />;\n\n  const [isDestroyOnClose, setIsDestroyOnClose] = useState(false);\n\n  useImperativeHandle(ref, () => containerRef.current);\n\n  useEffect(() => {\n    if (preventScrollThrough) {\n      if (visible && !showInAttachedElement) {\n        addClass(document.body, lockCls);\n      } else {\n        removeClass(document.body, lockCls);\n      }\n    }\n  }, [visible, showInAttachedElement, lockCls, preventScrollThrough]);\n\n  // 重置销毁钩子判断\n  useEffect(() => {\n    if (!destroyOnClose || !visible) return;\n    setIsDestroyOnClose(false);\n  }, [visible, destroyOnClose]);\n\n  useEffect(() => {\n    let documentBodyCssText = '';\n\n    if (visible) {\n      if (attach !== '' && hasScrollBar()) {\n        // 处理滚动条宽度导致晃动的问题。\n        const scrollbarWidth = getScrollbarWidth();\n        documentBodyCssText = `overflow: hidden; width: calc(100% - ${scrollbarWidth}px);`;\n\n        if (mode !== 'push') {\n          // 这里做简单的性能优化，如果是 body 那么在下面 mode=push 的模式下，一起使用 cssText 设置，减少重绘重排\n          document.body.style.cssText = documentBodyCssText;\n        }\n      }\n    }\n\n    if (mode === 'push') {\n      drawerWrapperRef.current.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s';\n\n      const marginStr = {\n        left: `margin: 0 0 0 ${getSizeValue(size)}`,\n        right: `margin: 0 0 0 -${getSizeValue(size)}`,\n        top: `margin: ${getSizeValue(size)} 0 0 0`,\n        bottom: `margin: -${getSizeValue(size)} 0 0 0`,\n      }[placement];\n\n      if (visible) {\n        drawerWrapperRef.current.style.cssText += marginStr;\n      } else {\n        drawerWrapperRef.current.style.cssText = drawerWrapperRef.current.style.cssText.replace(/margin:.+;/, '');\n      }\n    }\n\n    if (contentWrapperRef.current) {\n      // 聚焦到 Drawer 最外层元素即 containerRef.current，KeyDown 事件才有效。\n      containerRef.current.focus();\n\n      contentWrapperRef.current.style.transform = transform;\n    }\n  }, [attach, mode, transform, visible, placement, size]);\n\n  function onMaskClick(e: React.MouseEvent<HTMLDivElement>) {\n    onOverlayClick?.({ e });\n    closeOnOverlayClick && onClose?.({ e, trigger: CloseTriggerType.CLICK_OVERLAY });\n  }\n  function onClickCloseBtn(e: React.MouseEvent<HTMLDivElement>) {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CLOSE_BTN });\n  }\n  function onKeyDownEsc(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key !== 'Escape') return;\n\n    onEscKeydown?.({ e });\n    closeOnEscKeydown && onClose?.({ e, trigger: CloseTriggerType.KEYDOWN_ESC });\n  }\n  function onCancelClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CANCEL_BTN });\n  }\n  function onConfirmClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onConfirm?.({ e });\n  }\n\n  function onTransitionEnd() {\n    if (!visible) {\n      // 重置样式\n      document.body.style.display = 'none';\n      document.body.style.overflow = '';\n      document.body.style.width = '';\n      document.body.style.margin = '';\n      document.body.style.display = 'block';\n\n      destroyOnClose && setIsDestroyOnClose(true);\n    }\n  }\n\n  const drawerClass = classnames(prefixCls, className, `${prefixCls}--${placement}`, {\n    [`${prefixCls}--open`]: visible,\n    [`${prefixCls}--attach`]: showInAttachedElement,\n    [`${prefixCls}--without-mask`]: !showOverlay,\n  });\n\n  const contentWrapperClass = classnames(\n    `${prefixCls}__content-wrapper`,\n    `${prefixCls}__content-wrapper--${placement}`,\n  );\n  const contentWrapperStyle = {\n    transform: visible ? 'translateX(0)' : undefined,\n    width: ['left', 'right'].includes(placement) ? getSizeValue(size) : '',\n    height: ['top', 'bottom'].includes(placement) ? getSizeValue(size) : '',\n  };\n\n  function getFooter(): React.ReactNode {\n    if (footer !== true) return footer;\n\n    const defaultCancelBtn = (\n      <Button theme=\"default\" onClick={onCancelClick} className={`${prefixCls}__cancel`}>\n        {cancelText}\n      </Button>\n    );\n\n    const defaultConfirmBtn = (\n      <Button theme=\"primary\" onClick={onConfirmClick} className={`${prefixCls}__confirm`}>\n        {confirmBtn && typeof confirmBtn === 'string' ? confirmBtn : confirmText}\n      </Button>\n    );\n\n    const renderCancelBtn = cancelBtn && React.isValidElement(cancelBtn) ? cancelBtn : defaultCancelBtn;\n    const renderConfirmBtn = confirmBtn && React.isValidElement(confirmBtn) ? confirmBtn : defaultConfirmBtn;\n\n    const footerStyle = {\n      display: 'flex',\n      justifyContent: placement === 'right' ? 'flex-start' : 'flex-end',\n    };\n\n    return (\n      <div style={footerStyle}>\n        {placement === 'right' && renderConfirmBtn}\n        {renderCancelBtn}\n        {placement !== 'right' && renderConfirmBtn}\n      </div>\n    );\n  }\n\n  const renderOverlay = showOverlay && <div className={`${prefixCls}__mask`} onClick={onMaskClick} />;\n  const renderCloseBtn = closeBtn && (\n    <div onClick={onClickCloseBtn} className={`${prefixCls}__close-btn`}>\n      {closeIcon}\n    </div>\n  );\n  const renderHeader = header && <div className={`${prefixCls}__header`}>{header}</div>;\n  const renderBody = <div className={`${prefixCls}__body`}>{body || children}</div>;\n  const renderFooter = footer && <div className={`${prefixCls}__footer`}>{getFooter()}</div>;\n\n  if (isDestroyOnClose && !visible) return null;\n\n  return (\n    <DrawerWrapper attach={attach} ref={drawerWrapperRef}>\n      <div\n        ref={containerRef}\n        className={drawerClass}\n        style={{ zIndex, ...style }}\n        tabIndex={-1} // https://stackoverflow.com/questions/43503964/onkeydown-event-not-working-on-divs-in-react\n        onKeyDown={onKeyDownEsc}\n        onTransitionEnd={onTransitionEnd}\n      >\n        {renderOverlay}\n        <div ref={contentWrapperRef} className={contentWrapperClass} style={contentWrapperStyle}>\n          {renderCloseBtn}\n          {renderHeader}\n          {renderBody}\n          {renderFooter}\n        </div>\n      </div>\n    </DrawerWrapper>\n  );\n});\n\nDrawer.displayName = 'Drawer';\nDrawer.defaultProps = drawerDefaultProps;\n\nexport default Drawer;\n"],"names":["CloseTriggerType","CLICK_OVERLAY","CLICK_CLOSE_BTN","CLICK_CANCEL_BTN","KEYDOWN_ESC","getSizeValue","size","defaultSize","isNaN","Number","small","medium","large","Drawer","forwardRef","props","ref","className","style","visible","attach","showOverlay","placement","onCancel","onConfirm","onClose","onCloseBtnClick","onOverlayClick","onEscKeydown","showInAttachedElement","closeOnOverlayClick","closeOnEscKeydown","children","header","body","footer","closeBtn","cancelBtn","confirmBtn","zIndex","destroyOnClose","mode","preventScrollThrough","useLocaleReceiver","local","t","confirmText","confirm","cancelText","cancel","useConfig","classPrefix","containerRef","useRef","contentWrapperRef","drawerWrapperRef","prefixCls","lockCls","transform","closeIcon","React","isValidElement","createElement","CloseIcon","useState","isDestroyOnClose","setIsDestroyOnClose","useImperativeHandle","current","useEffect","addClass","document","removeClass","documentBodyCssText","hasScrollBar","scrollbarWidth","getScrollbarWidth","cssText","marginStr","left","right","top","bottom","replace","focus","onMaskClick","e","trigger","onClickCloseBtn","onKeyDownEsc","key","onCancelClick","onConfirmClick","onTransitionEnd","display","overflow","width","margin","drawerClass","classnames","contentWrapperClass","contentWrapperStyle","includes","height","getFooter","defaultCancelBtn","Button","theme","onClick","defaultConfirmBtn","renderCancelBtn","renderConfirmBtn","footerStyle","justifyContent","renderOverlay","renderCloseBtn","renderHeader","renderBody","renderFooter","DrawerWrapper","tabIndex","onKeyDown","displayName","defaultProps","drawerDefaultProps"],"mappings":"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"}