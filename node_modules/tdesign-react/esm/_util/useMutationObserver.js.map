{"version":3,"file":"useMutationObserver.js","sources":["../../src/_util/useMutationObserver.ts"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport debounce from 'lodash/debounce';\n\nconst DEFAULT_OPTIONS = {\n  debounceTime: 0,\n  config: {\n    attributes: true,\n    childList: true,\n    characterData: true,\n    subtree: true,\n  } as MutationObserverInit,\n};\n\nexport default function useMutationObservable(\n  targetEl: HTMLElement | null,\n  cb: MutationCallback,\n  options = DEFAULT_OPTIONS,\n) {\n  const observeRef = useRef(null);\n\n  useEffect(() => {\n    if (!cb || typeof cb !== 'function') return;\n    const { debounceTime } = options;\n    observeRef.current = new MutationObserver(debounceTime > 0 ? debounce(cb, debounceTime) : cb);\n  }, [cb, options]);\n\n  useEffect(() => {\n    if (!targetEl) return;\n\n    const { config } = options;\n    try {\n      observeRef.current.observe(targetEl, config);\n    } catch (e) {\n      console.error(e);\n    }\n\n    return () => {\n      observeRef.current.disconnect();\n    };\n  }, [targetEl, options]);\n}\n"],"names":["DEFAULT_OPTIONS","debounceTime","config","attributes","childList","characterData","subtree","useMutationObservable","targetEl","cb","options","observeRef","useRef","useEffect","current","MutationObserver","debounce","observe","e","console","error","disconnect"],"mappings":";;;;;;;;;;;;;;;;;AAEA,IAAMA,eAAe,GAAG;AACtBC,EAAAA,YAAY,EAAE,CADQ;AAEtBC,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAE,IADN;AAENC,IAAAA,SAAS,EAAE,IAFL;AAGNC,IAAAA,aAAa,EAAE,IAHT;AAINC,IAAAA,OAAO,EAAE,IAAA;AAJH,GAAA;AAFc,CAAxB,CAAA;AASe,SAASC,qBAAT,CAA+BC,QAA/B,EAAyCC,EAAzC,EAAwE;EAAA,IAA3BC,OAA2B,uEAAjBV,eAAiB,CAAA;AACrF,EAAA,IAAMW,UAAU,GAAGC,MAAM,CAAC,IAAD,CAAzB,CAAA;AACAC,EAAAA,SAAS,CAAC,YAAM;AACd,IAAA,IAAI,CAACJ,EAAD,IAAO,OAAOA,EAAP,KAAc,UAAzB,EACE,OAAA;AACF,IAAA,IAAQR,YAAR,GAAyBS,OAAzB,CAAQT,YAAR,CAAA;AACAU,IAAAA,UAAU,CAACG,OAAX,GAAqB,IAAIC,gBAAJ,CAAqBd,YAAY,GAAG,CAAf,GAAmBe,UAAQ,CAACP,EAAD,EAAKR,YAAL,CAA3B,GAAgDQ,EAArE,CAArB,CAAA;AACD,GALQ,EAKN,CAACA,EAAD,EAAKC,OAAL,CALM,CAAT,CAAA;AAMAG,EAAAA,SAAS,CAAC,YAAM;IACd,IAAI,CAACL,QAAL,EACE,OAAA;AACF,IAAA,IAAQN,MAAR,GAAmBQ,OAAnB,CAAQR,MAAR,CAAA;;IACA,IAAI;AACFS,MAAAA,UAAU,CAACG,OAAX,CAAmBG,OAAnB,CAA2BT,QAA3B,EAAqCN,MAArC,CAAA,CAAA;KADF,CAEE,OAAOgB,CAAP,EAAU;MACVC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,OAAO,YAAM;MACXP,UAAU,CAACG,OAAX,CAAmBO,UAAnB,EAAA,CAAA;KADF,CAAA;AAGD,GAZQ,EAYN,CAACb,QAAD,EAAWE,OAAX,CAZM,CAAT,CAAA;AAaD;;;;"}