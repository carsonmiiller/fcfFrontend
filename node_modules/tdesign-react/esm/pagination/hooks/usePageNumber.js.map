{"version":3,"file":"usePageNumber.js","sources":["../../../src/pagination/hooks/usePageNumber.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { EllipsisIcon, ChevronLeftDoubleIcon, ChevronRightDoubleIcon } from 'tdesign-icons-react';\nimport useConfig from '../../_util/useConfig';\n\nexport default function usePageNumber(props) {\n  const { classPrefix } = useConfig();\n  const name = `${classPrefix}-pagination`;\n\n  const [hoverPreMore, toggleHoverPreMore] = useState(false); // 处理left ellipsis展示逻辑\n  const [hoverNextMore, toggleHoverNextMore] = useState(false); // 处理right ellipsis展示逻辑\n\n  const { showPageNumber, maxPageBtn, disabled, current, pageCount, foldedMaxPageBtn, changeCurrent } = props;\n\n  const pivot = Math.ceil((foldedMaxPageBtn - 1) / 2);\n\n  const pageList = useMemo<Array<number>>(() => {\n    const isPrevMoreShow = 2 + pivot < current;\n    const isNextMoreShow = pageCount - 1 - pivot > current;\n    const array: Array<number> = [];\n    let start: number;\n    let end: number;\n\n    if (pageCount > maxPageBtn) {\n      if (isPrevMoreShow && isNextMoreShow) {\n        start = current - pivot;\n        end = current + pivot;\n      } else {\n        start = isPrevMoreShow ? pageCount - foldedMaxPageBtn + 1 : 2;\n        end = isPrevMoreShow ? pageCount - 1 : foldedMaxPageBtn;\n      }\n    } else {\n      start = 1;\n      end = pageCount;\n    }\n\n    for (let i = start; i <= end; i++) {\n      array.push(i);\n    }\n    return array;\n  }, [current, pageCount, foldedMaxPageBtn, maxPageBtn, pivot]);\n\n  const isFolded = pageCount > maxPageBtn; // 判断是否为需要折叠\n\n  const pageNumberContrl = showPageNumber && (\n    <ul className={`${name}__pager`}>\n      {isFolded && (\n        <>\n          <li\n            key={1}\n            className={classNames(`${name}__number`, {\n              [`${classPrefix}-is-disabled`]: disabled,\n              [`${classPrefix}-is-current`]: current === 1,\n            })}\n            onClick={() => changeCurrent(1)}\n          >\n            1\n          </li>\n          {2 + pivot < current && (\n            <li\n              className={classNames(`${name}__number`, `${name}__number--more`, {\n                [`${classPrefix}-is-disabled`]: disabled,\n              })}\n              onMouseEnter={() => toggleHoverPreMore(true)}\n              onMouseLeave={() => toggleHoverPreMore(false)}\n              onClick={() => changeCurrent(current - foldedMaxPageBtn)}\n            >\n              {!hoverPreMore ? <EllipsisIcon /> : <ChevronLeftDoubleIcon />}\n            </li>\n          )}\n        </>\n      )}\n      {pageList.map((item) => (\n        <li\n          key={item}\n          className={classNames(`${name}__number`, {\n            [`${classPrefix}-is-disabled`]: disabled,\n            [`${classPrefix}-is-current`]: current === item,\n          })}\n          onClick={() => changeCurrent(item)}\n        >\n          {item}\n        </li>\n      ))}\n      {isFolded && (\n        <>\n          {pageCount - 1 - pivot > current && (\n            <li\n              className={classNames(`${name}__number`, `${name}__number--more`, {\n                [`${classPrefix}-is-disabled`]: disabled,\n              })}\n              onMouseEnter={() => toggleHoverNextMore(true)}\n              onMouseLeave={() => toggleHoverNextMore(false)}\n              onClick={() => changeCurrent(current + foldedMaxPageBtn)}\n            >\n              {!hoverNextMore ? <EllipsisIcon /> : <ChevronRightDoubleIcon />}\n            </li>\n          )}\n          <li\n            key={pageCount}\n            className={classNames(`${name}__number`, {\n              [`${classPrefix}-is-disabled`]: disabled,\n              [`${classPrefix}-is-current`]: current === pageCount,\n            })}\n            onClick={() => changeCurrent(pageCount)}\n          >\n            {pageCount}\n          </li>\n        </>\n      )}\n    </ul>\n  );\n\n  return { pageNumberContrl };\n}\n"],"names":["usePageNumber","props","useConfig","classPrefix","name","useState","hoverPreMore","toggleHoverPreMore","hoverNextMore","toggleHoverNextMore","showPageNumber","maxPageBtn","disabled","current","pageCount","foldedMaxPageBtn","changeCurrent","pivot","Math","ceil","pageList","useMemo","isPrevMoreShow","isNextMoreShow","array","start","end","i","push","isFolded","pageNumberContrl","React","createElement","className","Fragment","key","classNames","onClick","onMouseEnter","onMouseLeave","EllipsisIcon","ChevronLeftDoubleIcon","map","item","ChevronRightDoubleIcon"],"mappings":"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"}