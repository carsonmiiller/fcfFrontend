{"version":3,"file":"Layout.js","sources":["../../src/layout/Layout.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\nimport { StyledProps } from '../common';\nimport { TdLayoutProps, TdHeaderProps, TdFooterProps } from './type';\nimport Aside from './Aside';\n\nexport interface LayoutProps extends TdLayoutProps, StyledProps, React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\nexport interface HeaderProps extends TdHeaderProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface ContentProps extends StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface FooterProps extends TdFooterProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nconst Header = (props: HeaderProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const headerClassNames = classNames(`${classPrefix}-layout__header`, className);\n  return (\n    <header className={headerClassNames} style={style} {...others}>\n      {children}\n    </header>\n  );\n};\n\nconst Footer = (props: FooterProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const footerClassNames = classNames(`${classPrefix}-layout__footer`, className);\n  return (\n    <footer className={footerClassNames} style={style} {...others}>\n      {children}\n    </footer>\n  );\n};\n\nconst Content = (props: ContentProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const contentClassNames = classNames(`${classPrefix}-layout__content`, className);\n  return (\n    <main className={contentClassNames} style={style} {...others}>\n      {children}\n    </main>\n  );\n};\n\n/**\n * 布局组件\n */\nconst Layout = (props: LayoutProps) => {\n  const { direction, className, style, children, ...otherLayoutProps } = props;\n  const [asides, setAsides] = useState([]);\n\n  useEffect(() => {\n    React.Children.forEach(children, (child: React.ReactChild) => {\n      if (!child || typeof child !== 'object') return;\n\n      if (child.type === Aside) setAsides([child]);\n    });\n  }, [children]);\n\n  const { classPrefix } = useConfig();\n  const layoutClassNames = classNames(\n    `${classPrefix}-layout`,\n    {\n      [`${classPrefix}-layout--with-sider`]: !!asides.length,\n      [`${classPrefix}-layout__direction-${direction}`]: direction,\n    },\n    className,\n  );\n\n  return (\n    <div className={layoutClassNames} style={style} {...otherLayoutProps}>\n      {children}\n    </div>\n  );\n};\n\nLayout.Header = Header;\nLayout.Content = Content;\nLayout.Footer = Footer;\nLayout.Aside = Aside;\n\nHeader.displayName = 'Header';\nContent.displayName = 'Content';\nFooter.displayName = 'Footer';\nLayout.displayName = 'Layout';\n\nexport default Layout;\n"],"names":["Header","props","useConfig","classPrefix","className","style","children","others","headerClassNames","classNames","React","createElement","Footer","footerClassNames","Content","contentClassNames","Layout","direction","otherLayoutProps","useState","asides","setAsides","useEffect","Children","forEach","child","type","Aside","layoutClassNames","length","displayName"],"mappings":"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"}