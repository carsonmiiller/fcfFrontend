{"version":3,"file":"useFixed.js","sources":["../../../src/table/hooks/useFixed.ts"],"sourcesContent":["import { useEffect, useState, useMemo, useRef, WheelEvent } from 'react';\nimport get from 'lodash/get';\nimport log from '../../_common/js/log';\nimport { ClassName, Styles } from '../../common';\nimport { BaseTableCol, TdBaseTableProps } from '../type';\nimport getScrollbarWidth from '../../_common/js/utils/getScrollbarWidth';\nimport { on, off } from '../../_util/dom';\n// import { TDisplayNoneElementRefresh } from '../../hooks/useDestroyOnClose';\n\nexport interface ColumnStickyLeftAndRight {\n  left: number[];\n  right: number[];\n  top: number[];\n  bottom?: number[];\n}\n\nexport interface TableColFixedClasses {\n  left: string;\n  right: string;\n  lastLeft: string;\n  firstRight: string;\n  leftShadow: string;\n  rightShadow: string;\n}\n\nexport interface TableRowFixedClasses {\n  top: string;\n  bottom: string;\n  firstBottom: string;\n  withoutBorderBottom: string;\n}\n\nexport interface FixedColumnInfo {\n  left?: number;\n  right?: number;\n  top?: number;\n  bottom?: number;\n  parent?: FixedColumnInfo;\n  children?: string[];\n  width?: number;\n  height?: number;\n  col?: BaseTableCol;\n  index?: number;\n  lastLeftFixedCol?: boolean;\n  firstRightFixedCol?: boolean;\n}\n\n// 固定表头和固定列 具体的固定位置（left/top/right/bottom）\nexport type RowAndColFixedPosition = Map<string | number, FixedColumnInfo>;\n\n// 固定列相关类名处理\nexport function getColumnFixedStyles(\n  col: TdBaseTableProps['columns'][0],\n  index: number,\n  rowAndColFixedPosition: RowAndColFixedPosition,\n  tableColFixedClasses: TableColFixedClasses,\n): { style?: Styles; classes?: ClassName } {\n  const fixedPos = rowAndColFixedPosition?.get(col.colKey || index);\n  if (!fixedPos) return {};\n  const thClasses = {\n    [tableColFixedClasses.left]: col.fixed === 'left',\n    [tableColFixedClasses.right]: col.fixed === 'right',\n    [tableColFixedClasses.lastLeft]: col.fixed === 'left' && fixedPos.lastLeftFixedCol,\n    [tableColFixedClasses.firstRight]: col.fixed === 'right' && fixedPos.firstRightFixedCol,\n  };\n  const thStyles = {\n    left: col.fixed === 'left' ? `${fixedPos.left}px` : undefined,\n    right: col.fixed === 'right' ? `${fixedPos.right}px` : undefined,\n  };\n  return {\n    style: thStyles,\n    classes: thClasses,\n  };\n}\n\n// 固定行相关类名处理\nexport function getRowFixedStyles(\n  rowId: string | number,\n  rowIndex: number,\n  rowLength: number,\n  fixedRows: TdBaseTableProps['fixedRows'],\n  rowAndColFixedPosition: RowAndColFixedPosition,\n  tableRowFixedClasses: TableRowFixedClasses,\n): { style: Styles; classes: ClassName } {\n  if (!fixedRows || !fixedRows.length) return { style: undefined, classes: undefined };\n  const fixedTop = rowIndex < fixedRows[0];\n  const fixedBottom = rowIndex > rowLength - 1 - fixedRows[1];\n  const firstFixedBottomRow = rowLength - fixedRows[1];\n  const fixedPos = rowAndColFixedPosition?.get(rowId) || {};\n  const rowClasses = {\n    [tableRowFixedClasses.top]: fixedTop,\n    [tableRowFixedClasses.bottom]: fixedBottom,\n    [tableRowFixedClasses.firstBottom]: rowIndex === firstFixedBottomRow,\n    [tableRowFixedClasses.withoutBorderBottom]: rowIndex === firstFixedBottomRow - 1,\n  };\n  const rowStyles = {\n    top: fixedTop ? `${fixedPos.top}px` : undefined,\n    bottom: fixedBottom ? `${fixedPos.bottom}px` : undefined,\n  };\n  return {\n    style: rowStyles,\n    classes: rowClasses,\n  };\n}\n\nexport default function useFixed(props: TdBaseTableProps) {\n  const {\n    data,\n    columns,\n    tableLayout,\n    tableContentWidth,\n    fixedRows,\n    firstFullRow,\n    lastFullRow,\n    maxHeight,\n    headerAffixedTop,\n    bordered,\n    scroll,\n  } = props;\n  const tableContentRef = useRef<HTMLDivElement>();\n  const [isFixedHeader, setIsFixedHeader] = useState(false);\n  const [isWidthOverflow, setIsWidthOverflow] = useState(false);\n  const affixHeaderRef = useRef<HTMLDivElement>();\n  // 当表格完全滚动消失在视野时，需要隐藏吸顶表头\n  const [showAffixHeader, setShowAffixHeader] = useState(true);\n  // CSS 样式设置了固定 6px\n  const [scrollbarWidth, setScrollbarWidth] = useState(6);\n  // 固定列、固定表头、固定表尾等内容的位置信息\n  const [rowAndColFixedPosition, setRowAndColFixedPosition] = useState<RowAndColFixedPosition>(new Map());\n  const [showColumnShadow, setShowColumnShadow] = useState({\n    left: false,\n    right: false,\n  });\n  // 虚拟滚动无法使用 CSS sticky 固定表头\n  const [virtualScrollHeaderPos, setVirtualScrollHeaderPos] = useState<{ left: number; top: number }>({\n    left: 0,\n    top: 0,\n  });\n  const [tableWidth, setTableWidth] = useState(0);\n  const [thWidthList, setThWidthList] = useState<{ [colKey: string]: number }>({});\n  const [isFixedColumn, setIsFixedColumn] = useState(false);\n  const [isFixedRightColumn, setIsFixedRightColumn] = useState(false);\n\n  // const displayNoneElementRefresh = inject(TDisplayNoneElementRefresh, ref(0));\n\n  // 没有表头吸顶，没有虚拟滚动，则不需要表头宽度计算\n  const notNeedThWidthList = useMemo(\n    () => !(headerAffixedTop || scroll?.type === 'virtual'),\n    [headerAffixedTop, scroll],\n  );\n\n  function getColumnMap(\n    columns: BaseTableCol[],\n    map: RowAndColFixedPosition = new Map(),\n    levelNodes: FixedColumnInfo[][] = [],\n    level = 0,\n    parent?: FixedColumnInfo,\n  ) {\n    for (let i = 0, len = columns.length; i < len; i++) {\n      const col = columns[i];\n      if (['left', 'right'].includes(col.fixed)) {\n        setIsFixedColumn(true);\n      }\n      if (col.fixed === 'right') {\n        setIsFixedRightColumn(true);\n      }\n      const key = col.colKey || i;\n      const columnInfo: FixedColumnInfo = { col, parent, index: i };\n      map.set(key, columnInfo);\n      if (col.children?.length) {\n        getColumnMap(col.children, map, levelNodes, level + 1, columnInfo);\n      }\n      if (levelNodes[level]) {\n        levelNodes[level].push(columnInfo);\n      } else {\n        // eslint-disable-next-line no-param-reassign\n        levelNodes[level] = [columnInfo];\n      }\n    }\n    return {\n      newColumnsMap: map,\n      levelNodes,\n    };\n  }\n\n  const setFixedLeftPos = (\n    columns: BaseTableCol[],\n    initialColumnMap: RowAndColFixedPosition,\n    parent: FixedColumnInfo = {},\n  ) => {\n    for (let i = 0, len = columns.length; i < len; i++) {\n      const col = columns[i];\n      if (col.fixed === 'right') return;\n      const colInfo = initialColumnMap.get(col.colKey || i);\n      let lastColIndex = i - 1;\n      while (lastColIndex >= 0 && columns[lastColIndex].fixed !== 'left') {\n        lastColIndex -= 1;\n      }\n      const lastCol = columns[lastColIndex];\n      // 多级表头，使用父元素作为初始基本位置\n      const defaultWidth = i === 0 ? parent?.left || 0 : 0;\n      const lastColInfo = initialColumnMap.get(lastCol?.colKey || i - 1);\n      colInfo.left = (lastColInfo?.left || defaultWidth) + (lastColInfo?.width || 0);\n      // 多级表头\n      if (col.children?.length) {\n        setFixedLeftPos(col.children, initialColumnMap, colInfo);\n      }\n    }\n  };\n\n  const setFixedRightPos = (\n    columns: BaseTableCol[],\n    initialColumnMap: RowAndColFixedPosition,\n    parent: FixedColumnInfo = {},\n  ) => {\n    for (let i = columns.length - 1; i >= 0; i--) {\n      const col = columns[i];\n      if (col.fixed === 'left') return;\n      const colInfo = initialColumnMap.get(col.colKey || i);\n      let lastColIndex = i + 1;\n      while (lastColIndex < columns.length && columns[lastColIndex].fixed !== 'right') {\n        lastColIndex += 1;\n      }\n      const lastCol = columns[lastColIndex];\n      // 多级表头，使用父元素作为初始基本位置\n      const defaultWidth = i === columns.length - 1 ? parent?.right || 0 : 0;\n      const lastColInfo = initialColumnMap.get(lastCol?.colKey || i + 1);\n      colInfo.right = (lastColInfo?.right || defaultWidth) + (lastColInfo?.width || 0);\n      // 多级表头\n      if (col.children?.length) {\n        setFixedRightPos(col.children, initialColumnMap, colInfo);\n      }\n    }\n  };\n\n  // 获取固定列位置信息。先获取节点宽度，再计算\n  const setFixedColPosition = (trList: HTMLCollection, initialColumnMap: RowAndColFixedPosition) => {\n    if (!trList) return;\n    for (let i = 0, len = trList.length; i < len; i++) {\n      const thList = trList[i].children;\n      for (let j = 0, thLen = thList.length; j < thLen; j++) {\n        const th = thList[j] as HTMLElement;\n        const colKey = th.dataset.colkey;\n        if (!colKey) {\n          log.warn('TDesign Table', `${th.innerText} missing colKey. colKey is required for fixed column feature.`);\n        }\n        const obj = initialColumnMap.get(colKey || j);\n        if (obj?.col?.fixed) {\n          initialColumnMap.set(colKey, { ...obj, width: th?.getBoundingClientRect?.().width });\n        }\n      }\n    }\n    setFixedLeftPos(columns, initialColumnMap);\n    setFixedRightPos(columns, initialColumnMap);\n  };\n\n  // 设置固定行位置信息 top/bottom\n  const setFixedRowPosition = (\n    trList: HTMLCollection,\n    initialColumnMap: RowAndColFixedPosition,\n    thead: HTMLTableSectionElement,\n    tfoot: HTMLTableSectionElement,\n  ) => {\n    const [fixedTopRows, fixedBottomRows] = fixedRows || [];\n    const { data, rowKey = 'id' } = props;\n    for (let i = 0; i < fixedTopRows; i++) {\n      const tr = trList[i] as HTMLElement;\n      const rowId = get(data[i], rowKey);\n      const thisRowInfo = initialColumnMap.get(rowId) || {};\n      const lastRowId = get(data[i - 1], rowKey);\n      const lastRowInfo = initialColumnMap.get(lastRowId) || {};\n      let defaultBottom = 0;\n      if (i === 0) {\n        defaultBottom = thead?.getBoundingClientRect?.().height || 0;\n      }\n      thisRowInfo.top = (lastRowInfo.top || defaultBottom) + (lastRowInfo.height || 0);\n      initialColumnMap.set(rowId, { ...thisRowInfo, height: tr?.getBoundingClientRect?.().height });\n    }\n    for (let i = data.length - 1; i >= data.length - fixedBottomRows; i--) {\n      const tr = trList[i] as HTMLElement;\n      const rowId = get(data[i], rowKey);\n      const thisRowInfo = initialColumnMap.get(rowId) || {};\n      const lastRowId = get(data[i + 1], rowKey);\n      const lastRowInfo = initialColumnMap.get(lastRowId) || {};\n      let defaultBottom = 0;\n      if (i === data.length - 1) {\n        defaultBottom = tfoot?.getBoundingClientRect?.().height || 0;\n      }\n      thisRowInfo.bottom = (lastRowInfo.bottom || defaultBottom) + (lastRowInfo.height || 0);\n      initialColumnMap.set(rowId, { ...thisRowInfo, height: tr?.getBoundingClientRect?.().height });\n    }\n  };\n\n  const updateRowAndColFixedPosition = (tableContentElm: HTMLElement, initialColumnMap: RowAndColFixedPosition) => {\n    rowAndColFixedPosition.clear();\n    const thead = tableContentElm.querySelector('thead');\n    // 处理固定列\n    thead && setFixedColPosition(thead.children, initialColumnMap);\n    // 处理冻结行\n    const tbody = tableContentElm.querySelector('tbody');\n    const tfoot = tableContentElm.querySelector('tfoot');\n    tbody && setFixedRowPosition(tbody.children, initialColumnMap, thead, tfoot);\n    // 更新最终 Map\n    setRowAndColFixedPosition(initialColumnMap);\n  };\n\n  const updateColumnFixedShadow = (target: HTMLElement) => {\n    if (!isFixedColumn) return;\n    const isShowRight = target.clientWidth + target.scrollLeft < target.scrollWidth;\n    setShowColumnShadow({\n      left: target.scrollLeft > 0,\n      right: isShowRight,\n    });\n  };\n\n  let lastScrollLeft = -1;\n  const updateHeaderScroll = (target?: HTMLElement) => {\n    if (!target) {\n      lastScrollLeft = -1;\n    }\n    const newTarget = target || tableContentRef.current;\n    if (notNeedThWidthList || !newTarget) return;\n    // 固定列左右滚动时，更新吸顶表头滚动\n    const left = newTarget.scrollLeft;\n    if (lastScrollLeft === left) return;\n    if (affixHeaderRef) {\n      const left = newTarget.scrollLeft;\n      lastScrollLeft = left;\n      affixHeaderRef.current.scrollLeft = left;\n    }\n  };\n\n  // 为保证版本兼容，临时保留 onScrollX 和 onScrollY\n  const onTableContentScroll = (e: WheelEvent<HTMLDivElement>) => {\n    const target = e.currentTarget;\n    // 阴影更新\n    updateColumnFixedShadow(target);\n    // 表头滚动位置更新\n    updateHeaderScroll(target);\n    props.onScrollX?.({ e });\n    props.onScrollY?.({ e });\n    props.onScroll?.({ e });\n  };\n\n  // 多级表头场景较为复杂：为了滚动的阴影效果，需要知道哪些列是边界列，左侧固定列的最后一列，右侧固定列的第一列，每一层表头都需要兼顾\n  const setIsLastOrFirstFixedCol = (levelNodes: FixedColumnInfo[][]) => {\n    for (let t = 0; t < levelNodes.length; t++) {\n      const nodes = levelNodes[t];\n      for (let i = 0, len = nodes.length; i < len; i++) {\n        const colMapInfo = nodes[i];\n        const nextColMapInfo = nodes[i + 1];\n        const { parent } = colMapInfo;\n        const isParentLastLeftFixedCol = !parent || parent?.lastLeftFixedCol;\n        if (isParentLastLeftFixedCol && colMapInfo.col.fixed === 'left' && nextColMapInfo?.col.fixed !== 'left') {\n          colMapInfo.lastLeftFixedCol = true;\n        }\n        const lastColMapInfo = nodes[i - 1];\n        const isParentFirstRightFixedCol = !parent || parent?.firstRightFixedCol;\n        if (isParentFirstRightFixedCol && colMapInfo.col.fixed === 'right' && lastColMapInfo?.col.fixed !== 'right') {\n          colMapInfo.firstRightFixedCol = true;\n        }\n      }\n    }\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const updateFixedStatus = () => {\n    const { newColumnsMap, levelNodes } = getColumnMap(columns);\n    setIsLastOrFirstFixedCol(levelNodes);\n    const timer = setTimeout(() => {\n      if (isFixedColumn || fixedRows?.length) {\n        updateRowAndColFixedPosition(tableContentRef.current, newColumnsMap);\n      }\n      clearTimeout(timer);\n    }, 0);\n    return () => {\n      clearTimeout(timer);\n    };\n  };\n\n  const updateFixedHeader = () => {\n    const timer = setTimeout(() => {\n      const tRef = tableContentRef?.current;\n      if (!tRef) return;\n      setIsFixedHeader(tRef.scrollHeight > tRef.clientHeight);\n      setIsWidthOverflow(tRef.scrollWidth > tRef.clientWidth);\n      const pos = tRef?.getBoundingClientRect?.();\n      setVirtualScrollHeaderPos({\n        top: pos?.top,\n        left: pos?.left,\n      });\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  const updateFixedColumnHandler = () => {\n    const timer = setTimeout(() => {\n      if (isFixedColumn) {\n        updateColumnFixedShadow(tableContentRef.current);\n      }\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  const updateTableWidth = () => {\n    const rect = tableContentRef.current?.getBoundingClientRect?.();\n    // 存在纵向滚动条，且固定表头时，需去除滚动条宽度\n    const reduceWidth = isFixedHeader ? scrollbarWidth : 0;\n    const fixedBordered = isFixedRightColumn ? 1 : 2;\n    setTableWidth(rect?.width - reduceWidth - (props.bordered ? fixedBordered : 0));\n  };\n\n  const updateThWidthList = (trList: HTMLCollection) => {\n    const widthMap: { [colKey: string]: number } = {};\n    for (let i = 0, len = trList.length; i < len; i++) {\n      const thList = trList[i].children;\n      for (let j = 0, thLen = thList.length; j < thLen; j++) {\n        const th = thList[j] as HTMLElement;\n        const colKey = th.dataset.colkey;\n        widthMap[colKey] = th?.getBoundingClientRect?.().width;\n      }\n    }\n    setThWidthList(widthMap);\n    if (affixHeaderRef) {\n      const left = tableContentRef.current.scrollLeft;\n      lastScrollLeft = left;\n      affixHeaderRef.current.scrollLeft = left;\n    }\n  };\n\n  const updateThWidthListHandler = () => {\n    if (notNeedThWidthList) return;\n    const timer = setTimeout(() => {\n      updateTableWidth();\n      const thead = tableContentRef.current.querySelector('thead');\n      updateThWidthList(thead.children);\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  const onDocumentScroll = () => {\n    const pos = tableContentRef.current?.getBoundingClientRect?.();\n    // eslint-disable-next-line no-unsafe-optional-chaining\n    const r = affixHeaderRef.current?.offsetHeight - pos?.top < pos?.height;\n    setShowAffixHeader(r);\n  };\n\n  useEffect(\n    updateFixedStatus,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      data,\n      columns,\n      bordered,\n      tableLayout,\n      tableContentWidth,\n      isFixedHeader,\n      isWidthOverflow,\n      isFixedColumn,\n      fixedRows,\n      firstFullRow,\n      lastFullRow,\n      tableContentRef,\n    ],\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(updateFixedColumnHandler, [isFixedColumn, columns, tableContentRef]);\n\n  useEffect(updateFixedHeader, [maxHeight, data, columns, bordered, tableContentRef]);\n\n  // 影响表头宽度的元素\n  useEffect(\n    updateThWidthListHandler,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      data,\n      columns,\n      bordered,\n      tableLayout,\n      fixedRows,\n      isFixedHeader,\n      headerAffixedTop,\n      tableContentWidth,\n      notNeedThWidthList,\n      tableContentRef,\n    ],\n  );\n\n  useEffect(() => {\n    if (headerAffixedTop) {\n      on(document, 'scroll', onDocumentScroll);\n    } else {\n      off(document, 'scroll', onDocumentScroll);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [headerAffixedTop]);\n\n  const refreshTable = () => {\n    updateTableWidth();\n    updateFixedHeader();\n    if (!notNeedThWidthList) {\n      updateThWidthListHandler();\n    }\n    if (isFixedColumn || isFixedHeader) {\n      updateFixedStatus();\n      updateFixedColumnHandler();\n    }\n  };\n\n  const onResize = refreshTable;\n\n  // 父元素 display: none 的变化，子元素无法监听到，通过 provide/inject 方式处理组件更新\n  // watch([displayNoneElementRefresh], () => {\n  //   if (!displayNoneElementRefresh) return;\n  //   requestAnimationFrame ? requestAnimationFrame(refreshTable) : refreshTable();\n  // });\n\n  useEffect(() => {\n    const scrollWidth = getScrollbarWidth();\n    setScrollbarWidth(scrollWidth);\n    const timer = setTimeout(() => {\n      updateTableWidth();\n      clearTimeout(timer);\n    });\n    if (isFixedColumn || isFixedHeader || !notNeedThWidthList) {\n      on(window, 'resize', onResize);\n    }\n    return () => {\n      if (isFixedColumn || isFixedHeader || !notNeedThWidthList) {\n        off(window, 'resize', onResize);\n      }\n      if (props.headerAffixedTop) {\n        off(document, 'scroll', onDocumentScroll);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return {\n    tableWidth,\n    thWidthList,\n    isFixedHeader,\n    isWidthOverflow,\n    tableContentRef,\n    showAffixHeader,\n    isFixedColumn,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    virtualScrollHeaderPos,\n    affixHeaderRef,\n    scrollbarWidth,\n    refreshTable,\n    updateThWidthListHandler,\n    updateHeaderScroll,\n    onTableContentScroll,\n  };\n}\n"],"names":["getColumnFixedStyles","col","index","rowAndColFixedPosition","tableColFixedClasses","fixedPos","get","colKey","thClasses","left","fixed","right","lastLeft","lastLeftFixedCol","firstRight","firstRightFixedCol","thStyles","style","classes","getRowFixedStyles","rowId","rowIndex","rowLength","fixedRows","tableRowFixedClasses","length","fixedTop","fixedBottom","firstFixedBottomRow","rowClasses","top","bottom","firstBottom","withoutBorderBottom","rowStyles","useFixed","props","data","columns","tableLayout","tableContentWidth","firstFullRow","lastFullRow","maxHeight","headerAffixedTop","bordered","scroll","tableContentRef","useRef","useState","isFixedHeader","setIsFixedHeader","isWidthOverflow","setIsWidthOverflow","affixHeaderRef","showAffixHeader","setShowAffixHeader","scrollbarWidth","setScrollbarWidth","Map","setRowAndColFixedPosition","showColumnShadow","setShowColumnShadow","virtualScrollHeaderPos","setVirtualScrollHeaderPos","tableWidth","setTableWidth","thWidthList","setThWidthList","isFixedColumn","setIsFixedColumn","isFixedRightColumn","setIsFixedRightColumn","notNeedThWidthList","useMemo","type","getColumnMap","columns2","map","levelNodes","level","parent","i","len","includes","key","columnInfo","set","children","push","newColumnsMap","setFixedLeftPos","initialColumnMap","colInfo","lastColIndex","lastCol","defaultWidth","lastColInfo","width","setFixedRightPos","setFixedColPosition","trList","thList","j","thLen","th","dataset","colkey","log","warn","innerText","obj","getBoundingClientRect","setFixedRowPosition","thead","tfoot","fixedTopRows","fixedBottomRows","data2","rowKey","tr","thisRowInfo","lastRowId","lastRowInfo","defaultBottom","height","updateRowAndColFixedPosition","tableContentElm","clear","querySelector","tbody","updateColumnFixedShadow","target","isShowRight","clientWidth","scrollLeft","scrollWidth","lastScrollLeft","updateHeaderScroll","newTarget","current","left2","onTableContentScroll","e","currentTarget","onScrollX","onScrollY","onScroll","setIsLastOrFirstFixedCol","t","nodes","colMapInfo","nextColMapInfo","isParentLastLeftFixedCol","lastColMapInfo","isParentFirstRightFixedCol","updateFixedStatus","timer","setTimeout","clearTimeout","updateFixedHeader","tRef","scrollHeight","clientHeight","pos","updateFixedColumnHandler","updateTableWidth","rect","reduceWidth","fixedBordered","updateThWidthList","widthMap","updateThWidthListHandler","onDocumentScroll","r","offsetHeight","useEffect","on","document","off","refreshTable","onResize","getScrollbarWidth","window"],"mappings":"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"}