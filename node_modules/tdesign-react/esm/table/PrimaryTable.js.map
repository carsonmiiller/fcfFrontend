{"version":3,"file":"PrimaryTable.js","sources":["../../src/table/PrimaryTable.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport get from 'lodash/get';\nimport classNames from 'classnames';\nimport BaseTable from './BaseTable';\nimport useColumnController from './hooks/useColumnController';\nimport useRowExpand from './hooks/useRowExpand';\nimport useTableHeader, { renderTitle } from './hooks/useTableHeader';\nimport useRowSelect from './hooks/useRowSelect';\nimport { TdPrimaryTableProps, PrimaryTableCol, TableRowData } from './type';\nimport useSorter from './hooks/useSorter';\nimport useFilter from './hooks/useFilter';\nimport useDragSort from './hooks/useDragSort';\nimport useAsyncLoading from './hooks/useAsyncLoading';\nimport { PageInfo } from '../pagination';\nimport useClassName from './hooks/useClassName';\nimport { BaseTableProps, PrimaryTableProps } from './interface';\n\nimport { StyledProps } from '../common';\n\nexport { BASE_TABLE_ALL_EVENTS } from './BaseTable';\n\nexport interface TPrimaryTableProps extends PrimaryTableProps, StyledProps {}\nexport default function PrimaryTable(props: TPrimaryTableProps) {\n  const { columns, columnController, style, className } = props;\n  const primaryTableRef = useRef(null);\n  const { tableDraggableClasses, tableBaseClass } = useClassName();\n  // 自定义列配置功能\n  const { tDisplayColumns, renderColumnController } = useColumnController(props);\n  // 展开/收起行功能\n  const { showExpandedRow, showExpandIconColumn, getExpandColumn, renderExpandedRow, onInnerExpandRowClick } =\n    useRowExpand(props);\n  // 排序功能\n  const { renderSortIcon } = useSorter(props);\n  // 行选中功能\n  const { formatToRowSelectColumn, selectedRowClassNames } = useRowSelect(props);\n  // 过滤功能\n  const { hasEmptyCondition, isTableOverflowHidden, renderFilterIcon, renderFirstFilterRow } = useFilter(\n    props,\n    primaryTableRef,\n  );\n  // 拖拽排序功能\n  const { isRowHandlerDraggable, isRowDraggable, isColDraggable } = useDragSort(props, primaryTableRef);\n\n  const { renderTitleWidthIcon } = useTableHeader({ columns: props.columns });\n  const { renderAsyncLoading } = useAsyncLoading(props);\n  const primaryTableClasses = {\n    [tableDraggableClasses.colDraggable]: isColDraggable,\n    [tableDraggableClasses.rowHandlerDraggable]: isRowHandlerDraggable,\n    [tableDraggableClasses.rowDraggable]: isRowDraggable,\n    [tableBaseClass.overflowVisible]: isTableOverflowHidden === false,\n  };\n\n  // 如果想给 TR 添加类名，请在这里补充，不要透传更多额外 Props 到 BaseTable\n  const tRowClassNames = (() => {\n    const tClassNames = [props.rowClassName, selectedRowClassNames];\n    return tClassNames.filter((v) => v);\n  })();\n\n  // 如果想给 TR 添加属性，请在这里补充，不要透传更多额外 Props 到 BaseTable\n  const tRowAttributes = (() => {\n    const tAttributes = [props.rowAttributes];\n    if (isRowHandlerDraggable || isRowDraggable) {\n      tAttributes.push(({ row }) => ({ 'data-id': get(row, props.rowKey || 'id') }));\n    }\n    return tAttributes.filter((v) => v);\n  })();\n\n  // 1. 影响列数量的因素有：自定义列配置、展开/收起行、多级表头；2. 影响表头内容的因素有：排序图标、筛选图标\n  const getColumns = (columns: PrimaryTableCol<TableRowData>[]) => {\n    const arr: PrimaryTableCol<TableRowData>[] = [];\n    for (let i = 0, len = columns.length; i < len; i++) {\n      let item = { ...columns[i] };\n      // 自定义列显示控制\n      const isDisplayColumn = item.children?.length || tDisplayColumns?.includes(item.colKey);\n      if (!isDisplayColumn && props.columnController) continue;\n      item = formatToRowSelectColumn(item);\n      // 添加排序图标和过滤图标\n      if (item.sorter || item.filter) {\n        const titleContent = renderTitle(item, i);\n        const { ellipsisTitle } = item;\n        item.title = (p) => {\n          const sortIcon = item.sorter ? renderSortIcon(p) : null;\n          const filterIcon = item.filter ? renderFilterIcon(p) : null;\n          const attach = primaryTableRef.current?.tableContentRef;\n          return renderTitleWidthIcon([titleContent, sortIcon, filterIcon], p.col, p.colIndex, ellipsisTitle, attach);\n        };\n        item.ellipsisTitle = false;\n      }\n      if (item.children?.length) {\n        item.children = getColumns(item.children);\n      }\n      // 多级表头和自定义列配置特殊逻辑：要么子节点不存在，要么子节点长度大于 1，方便做自定义列配置\n      if (!item.children || item.children?.length) {\n        arr.push(item);\n      }\n    }\n    return arr;\n  };\n\n  const tColumns = (() => {\n    const cols = getColumns(columns);\n    if (showExpandIconColumn) {\n      cols.unshift(getExpandColumn());\n    }\n    return cols;\n  })();\n\n  const onInnerPageChange = (pageInfo: PageInfo, newData: Array<TableRowData>) => {\n    props.onPageChange?.(pageInfo, newData);\n    const changeParams: Parameters<TdPrimaryTableProps['onChange']> = [\n      { pagination: pageInfo },\n      { trigger: 'pagination', currentData: newData },\n    ];\n    props.onChange?.(...changeParams);\n  };\n\n  function formatNode(api: string, renderInnerNode: Function, condition: boolean, extra?: { reverse?: boolean }) {\n    if (!condition) return props[api];\n    const innerNode = renderInnerNode();\n    const propsNode = props[api];\n    if (innerNode && !propsNode) return innerNode;\n    if (propsNode && !innerNode) return propsNode;\n    if (innerNode && propsNode) {\n      return extra?.reverse ? (\n        <div>\n          {innerNode}\n          {propsNode}\n        </div>\n      ) : (\n        <div>\n          {propsNode}\n          {innerNode}\n        </div>\n      );\n    }\n    return null;\n  }\n\n  const isColumnController = !!(columnController && Object.keys(columnController).length);\n  const placement = isColumnController ? columnController.placement || 'top-right' : '';\n  const isBottomController = isColumnController && placement?.indexOf('bottom') !== -1;\n  const topContent = formatNode('topContent', renderColumnController, isColumnController && !isBottomController);\n  const bottomContent = formatNode('bottomContent', renderColumnController, isBottomController, {\n    reverse: true,\n  });\n  const firstFullRow = formatNode('firstFullRow', renderFirstFilterRow, !hasEmptyCondition);\n  const lastFullRow = formatNode('lastFullRow', renderAsyncLoading, !!props.asyncLoading);\n\n  const baseTableProps = {\n    ...props,\n    rowClassName: tRowClassNames,\n    rowAttributes: tRowAttributes,\n    columns: tColumns,\n    topContent,\n    bottomContent,\n    firstFullRow,\n    lastFullRow,\n    onPageChange: onInnerPageChange,\n    renderExpandedRow: showExpandedRow ? renderExpandedRow : undefined,\n  } as BaseTableProps;\n\n  if (props.expandOnRowClick) {\n    baseTableProps.onRowClick = onInnerExpandRowClick;\n  }\n\n  return (\n    <BaseTable\n      ref={primaryTableRef}\n      {...baseTableProps}\n      className={classNames(primaryTableClasses, className)}\n      style={style}\n    />\n  );\n}\n\nPrimaryTable.displayName = 'PrimaryTable';\n"],"names":["PrimaryTable","props","columns","columnController","style","className","primaryTableRef","useRef","useClassName","tableDraggableClasses","tableBaseClass","useColumnController","tDisplayColumns","renderColumnController","useRowExpand","showExpandedRow","showExpandIconColumn","getExpandColumn","renderExpandedRow","onInnerExpandRowClick","useSorter","renderSortIcon","useRowSelect","formatToRowSelectColumn","selectedRowClassNames","useFilter","hasEmptyCondition","isTableOverflowHidden","renderFilterIcon","renderFirstFilterRow","useDragSort","isRowHandlerDraggable","isRowDraggable","isColDraggable","useTableHeader","renderTitleWidthIcon","useAsyncLoading","renderAsyncLoading","primaryTableClasses","colDraggable","rowHandlerDraggable","rowDraggable","overflowVisible","tRowClassNames","tClassNames","rowClassName","filter","v","tRowAttributes","tAttributes","rowAttributes","push","row","get","rowKey","getColumns","columns2","arr","i","len","item","isDisplayColumn","children","length","includes","colKey","sorter","titleContent","renderTitle","ellipsisTitle","title","p","sortIcon","filterIcon","attach","current","tableContentRef","col","colIndex","tColumns","cols","unshift","onInnerPageChange","pageInfo","newData","onPageChange","changeParams","pagination","trigger","currentData","onChange","formatNode","api","renderInnerNode","condition","extra","innerNode","propsNode","reverse","React","createElement","isColumnController","Object","keys","placement","isBottomController","indexOf","topContent","bottomContent","firstFullRow","lastFullRow","asyncLoading","baseTableProps","expandOnRowClick","onRowClick","BaseTable","ref","classNames","displayName"],"mappings":"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"}