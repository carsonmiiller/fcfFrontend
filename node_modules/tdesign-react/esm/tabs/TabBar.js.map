{"version":3,"file":"TabBar.js","sources":["../../src/tabs/TabBar.tsx"],"sourcesContent":["import React, { useEffect, useState, CSSProperties } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\n\ninterface TabBarProps {\n  tabPosition: string;\n  activeId: string | number;\n  containerRef: React.MutableRefObject<HTMLDivElement>;\n}\n\nconst TabBar: React.FC<TabBarProps> = (props) => {\n  const { tabPosition, activeId, containerRef } = props;\n  const { classPrefix } = useConfig();\n  const [barStyle, setBarStyle] = useState<CSSProperties>({});\n  const tabsClassPrefix = `${classPrefix}-tabs`;\n\n  const computeStyle = ({ tabPosition, activeId }) => {\n    const isHorizontal = ['bottom', 'top'].includes(tabPosition);\n    const transformPosition = isHorizontal ? 'translateX' : 'translateY';\n    const itemProp = isHorizontal ? 'width' : 'height';\n    const barBorderProp = isHorizontal ? 'width' : 'height';\n\n    let offset = 0;\n    if (containerRef.current) {\n      const itemsRef = containerRef.current.querySelectorAll('.t-tabs__nav-item');\n\n      if (itemsRef.length - 1 >= activeId) {\n        itemsRef.forEach((item, itemIndex) => {\n          if (itemIndex < activeId) {\n            offset += Number(getComputedStyle(item)[itemProp].replace('px', ''));\n          }\n        });\n        const computedItem = itemsRef[activeId];\n        if (!computedItem) {\n          setBarStyle({\n            transform: `${transformPosition}(${0}px)`,\n            [barBorderProp]: 0,\n          });\n          return;\n        }\n        const itemPropValue = getComputedStyle(computedItem)[itemProp];\n        setBarStyle({\n          transform: `${transformPosition}(${offset}px)`,\n          [barBorderProp]: itemPropValue,\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    computeStyle({\n      tabPosition,\n      activeId,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tabPosition, activeId]);\n\n  return (\n    <div\n      className={classNames({\n        [`${tabsClassPrefix}__bar`]: true,\n        [`t-is-${tabPosition}`]: true,\n      })}\n      style={barStyle}\n    ></div>\n  );\n};\n\nTabBar.displayName = 'TabBar';\n\nexport default TabBar;\n"],"names":["TabBar","props","tabPosition","activeId","containerRef","useConfig","classPrefix","useState","barStyle","setBarStyle","tabsClassPrefix","computeStyle","tabPosition2","activeId2","isHorizontal","includes","transformPosition","itemProp","barBorderProp","offset","current","itemsRef","querySelectorAll","length","forEach","item","itemIndex","Number","getComputedStyle","replace","computedItem","transform","itemPropValue","useEffect","React","createElement","className","classNames","style","displayName"],"mappings":"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"}