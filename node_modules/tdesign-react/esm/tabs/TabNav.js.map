{"version":3,"file":"TabNav.js","sources":["../../src/tabs/TabNav.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport classNames from 'classnames';\nimport { AddIcon, ChevronLeftIcon, ChevronRightIcon } from 'tdesign-icons-react';\nimport debounce from 'lodash/debounce';\nimport { TdTabsProps, TdTabPanelProps, TabValue } from './type';\nimport noop from '../_util/noop';\nimport { useTabClass } from './useTabClass';\nimport TabNavItem from './TabNavItem';\nimport TabBar from './TabBar';\nimport tabBase from '../_common/js/tabs/base';\n\nconst { moveActiveTabIntoView, calcScrollLeft, scrollToLeft, scrollToRight, calculateCanToLeft, calculateCanToRight } =\n  tabBase;\nexport interface TabNavProps extends TdTabsProps {\n  itemList: TdTabPanelProps[];\n  tabClick: (s: TabValue) => void;\n  activeValue: TabValue;\n  size?: 'medium' | 'large';\n}\n\nconst TabNav: React.FC<TabNavProps> = (props) => {\n  const {\n    placement = 'top',\n    itemList,\n    tabClick = noop,\n    theme,\n    addable,\n    onAdd,\n    size = 'medium',\n    disabled = false,\n    onRemove = noop,\n    onChange = noop,\n    activeValue,\n  } = props;\n\n  // 逻辑层较多处需要判断是否为 card 类型，进行逻辑抽象\n  const isCard = theme === 'card';\n\n  const { tdTabsClassGenerator, tdClassGenerator, tdSizeClassGenerator } = useTabClass();\n\n  const navsContainerRef = useRef<HTMLDivElement>(null);\n  // :todo 兼容老版本 TabBar 的实现\n  const navsWrapRef = useRef<HTMLDivElement>(null);\n  const getIndex = useCallback(\n    (value) => {\n      const index = itemList.findIndex((item) => item.value === value);\n      return index > -1 ? index : 0;\n    },\n    [itemList],\n  );\n\n  const activeIndex = getIndex(activeValue);\n\n  // 判断滚动条是否需要展示\n  const [canToLeft, setToLeftBtnVisible] = useState(false);\n  const [canToRight, setToRightBtnVisible] = useState(false);\n\n  // 滚动条 ref 定义\n  const scrollBarRef = useRef(null);\n  const leftOperationsRef = useRef(null);\n  const rightOperationsRef = useRef(null);\n  const toLeftBtnRef = useRef(null);\n  const toRightBtnRef = useRef(null);\n\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [activeTab, setActiveTab] = useState<HTMLElement>(null);\n\n  useEffect(() => {\n    const left = moveActiveTabIntoView(\n      {\n        activeTab,\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        toLeftBtn: toLeftBtnRef.current,\n        toRightBtn: toRightBtnRef.current,\n        leftOperations: leftOperationsRef.current,\n        rightOperations: rightOperationsRef.current,\n      },\n      scrollLeft,\n    );\n    setScrollLeft(left);\n  }, [activeTab, scrollLeft]);\n\n  // 调用检查函数，并设置左右滑动按钮的展示状态\n  const setScrollBtnVisibleHandler = useCallback(() => {\n    const canToleft = calculateCanToLeft(\n      {\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        leftOperations: leftOperationsRef.current,\n        toLeftBtn: toLeftBtnRef.current,\n      },\n      scrollLeft,\n      placement,\n    );\n    const canToRight = calculateCanToRight(\n      {\n        navsContainer: navsContainerRef.current,\n        navsWrap: navsWrapRef.current,\n        rightOperations: rightOperationsRef.current,\n        toRightBtn: toRightBtnRef.current,\n      },\n      scrollLeft,\n      placement,\n    );\n\n    setToLeftBtnVisible(canToleft);\n    setToRightBtnVisible(canToRight);\n  }, [scrollLeft, placement]);\n\n  // 滚动条处理逻辑\n  const handleScroll = (position: 'left' | 'right') => {\n    const val =\n      position === 'left'\n        ? scrollToLeft(\n            {\n              navsContainer: navsContainerRef.current,\n              leftOperations: leftOperationsRef.current,\n              toLeftBtn: toLeftBtnRef.current,\n            },\n            scrollLeft,\n          )\n        : scrollToRight(\n            {\n              navsWrap: navsWrapRef.current,\n              navsContainer: navsContainerRef.current,\n              rightOperations: rightOperationsRef.current,\n              toRightBtn: toRightBtnRef.current,\n            },\n            scrollLeft,\n          );\n\n    setScrollLeft(val);\n  };\n\n  // handle window resize\n  useEffect(() => {\n    const onResize = debounce(() => {\n      if (['top', 'bottom'].includes(placement.toLowerCase())) {\n        const left = calcScrollLeft(\n          {\n            navsContainer: navsContainerRef.current,\n            navsWrap: navsWrapRef.current,\n            rightOperations: rightOperationsRef.current,\n          },\n          scrollLeft,\n        );\n        setScrollLeft(left);\n        setScrollBtnVisibleHandler();\n      }\n    }, 300);\n\n    window.addEventListener('resize', onResize);\n\n    return () => {\n      window.removeEventListener('resize', onResize);\n    };\n  });\n\n  useEffect(() => {\n    if (['top', 'bottom'].includes(placement.toLowerCase())) {\n      const left = calcScrollLeft(\n        {\n          navsContainer: navsContainerRef.current,\n          navsWrap: navsWrapRef.current,\n          rightOperations: rightOperationsRef.current,\n        },\n        scrollLeft,\n      );\n      setScrollLeft(left);\n    }\n  }, [itemList.length, scrollLeft, placement]);\n\n  // TabBar 组件逻辑层抽象，卡片类型时无需展示，故将逻辑整合到此处\n  const TabBarCom = isCard ? null : (\n    <TabBar tabPosition={placement} activeId={activeIndex} containerRef={navsWrapRef} />\n  );\n\n  // 组件初始化后判断当前是否需要展示滑动按钮\n  useEffect(() => {\n    setScrollBtnVisibleHandler();\n  }, [setScrollBtnVisibleHandler]);\n\n  const handleTabItemRemove = (removeItem) => {\n    const { value: removeValue, index: removeIndex } = removeItem;\n    if (removeValue === activeValue) {\n      onChange(removeIndex === 0 ? itemList[removeIndex + 1]?.value : itemList[removeIndex - 1].value);\n    }\n    onRemove(removeItem);\n  };\n\n  const handleTabItemClick = (clickItem) => {\n    tabClick(clickItem.value);\n    onChange(clickItem.value);\n  };\n\n  const handleTabAdd = (e) => {\n    onAdd({ e });\n  };\n\n  return (\n    <div ref={navsContainerRef} className={classNames(tdTabsClassGenerator('nav'))} style={{ minHeight: 48 }}>\n      <div\n        ref={leftOperationsRef}\n        className={classNames(tdTabsClassGenerator('operations'), tdTabsClassGenerator('operations--left'))}\n      >\n        {canToLeft ? (\n          <div\n            onClick={() => {\n              handleScroll('left');\n            }}\n            className={classNames(\n              tdTabsClassGenerator('btn'),\n              tdTabsClassGenerator('btn--left'),\n              tdSizeClassGenerator(size),\n            )}\n            ref={toLeftBtnRef}\n          >\n            <ChevronLeftIcon />\n          </div>\n        ) : null}\n      </div>\n      <div\n        ref={rightOperationsRef}\n        className={classNames(tdTabsClassGenerator('operations'), tdTabsClassGenerator('operations--right'))}\n      >\n        {canToRight ? (\n          <div\n            onClick={() => {\n              handleScroll('right');\n            }}\n            className={classNames(\n              tdTabsClassGenerator('btn'),\n              tdTabsClassGenerator('btn--right'),\n              tdSizeClassGenerator(size),\n            )}\n            ref={toRightBtnRef}\n          >\n            <ChevronRightIcon />\n          </div>\n        ) : null}\n        {addable ? (\n          <div\n            className={classNames(\n              tdTabsClassGenerator('add-btn'),\n              tdTabsClassGenerator('btn'),\n              tdSizeClassGenerator(size),\n            )}\n            onClick={handleTabAdd}\n          >\n            <AddIcon />\n          </div>\n        ) : null}\n      </div>\n      <div\n        className={classNames(\n          tdTabsClassGenerator('nav-container'),\n          isCard ? tdTabsClassGenerator('nav--card') : '',\n          tdClassGenerator(`is-${placement}`),\n          addable ? tdClassGenerator('is-addable') : '',\n        )}\n      >\n        <div\n          className={classNames(\n            tdTabsClassGenerator('nav-scroll'),\n            canToLeft || canToRight ? tdClassGenerator('is-scrollable') : '',\n          )}\n          ref={scrollBarRef}\n        >\n          <div\n            className={classNames(\n              tdTabsClassGenerator('nav-wrap'),\n              ['left', 'right'].includes(placement) ? tdClassGenerator('is-vertical') : '',\n              tdClassGenerator('is-smooth'),\n            )}\n            style={{ transform: `translate(${-scrollLeft}px, 0)` }}\n            ref={navsWrapRef}\n          >\n            {placement !== 'bottom' ? TabBarCom : null}\n            {!isCard && (\n              <div className={classNames(tdTabsClassGenerator('bar'), tdClassGenerator(`is-${placement}`))} />\n            )}\n            {itemList.map((v, index) => (\n              <TabNavItem\n                {...props}\n                {...v}\n                // 显式给 onRemove 赋值，防止 props 的 onRemove 事件透传\n                onRemove={v.onRemove}\n                key={v.value}\n                label={v.label}\n                isActive={activeValue === v.value}\n                theme={theme}\n                placement={placement}\n                index={index}\n                disabled={disabled || v.disabled}\n                onClick={() => handleTabItemClick(v)}\n                onTabRemove={handleTabItemRemove}\n                innerRef={(ref) => {\n                  if (activeValue === v.value) {\n                    setActiveTab(ref);\n                  }\n                }}\n              />\n            ))}\n            {placement === 'bottom' ? TabBarCom : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nTabNav.displayName = 'TabNav';\n\nexport default TabNav;\n"],"names":["moveActiveTabIntoView","tabBase","calcScrollLeft","scrollToLeft","scrollToRight","calculateCanToLeft","calculateCanToRight","TabNav","props","placement","itemList","tabClick","noop","theme","addable","onAdd","size","disabled","onRemove","onChange","activeValue","isCard","useTabClass","tdTabsClassGenerator","tdClassGenerator","tdSizeClassGenerator","navsContainerRef","useRef","navsWrapRef","getIndex","useCallback","value","index","findIndex","item","activeIndex","useState","canToLeft","setToLeftBtnVisible","canToRight","setToRightBtnVisible","scrollBarRef","leftOperationsRef","rightOperationsRef","toLeftBtnRef","toRightBtnRef","scrollLeft","setScrollLeft","activeTab","setActiveTab","useEffect","left","navsContainer","current","navsWrap","toLeftBtn","toRightBtn","leftOperations","rightOperations","setScrollBtnVisibleHandler","canToleft","canToRight2","handleScroll","position","val","onResize","debounce","includes","toLowerCase","window","addEventListener","removeEventListener","length","TabBarCom","React","createElement","TabBar","tabPosition","activeId","containerRef","handleTabItemRemove","removeItem","removeValue","removeIndex","handleTabItemClick","clickItem","handleTabAdd","e","ref","className","classNames","style","minHeight","onClick","ChevronLeftIcon","ChevronRightIcon","AddIcon","transform","map","v","TabNavItem","key","label","isActive","onTabRemove","innerRef","displayName"],"mappings":"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"}