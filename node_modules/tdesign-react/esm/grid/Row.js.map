{"version":3,"file":"Row.js","sources":["../../src/grid/Row.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport isObject from 'lodash/isObject';\nimport useConfig from '../_util/useConfig';\nimport { StyledProps } from '../common';\nimport { TdRowProps } from './type';\nimport Col from './Col';\nimport { canUseDocument, getCssVarsValue } from '../_util/dom';\nimport { rowDefaultProps } from './defaultProps';\n\n/**\n * Row 组件支持的属性。\n */\nexport interface RowProps extends TdRowProps, StyledProps {\n  /**\n   * 默认子元素内容\n   */\n  children: React.ReactNode;\n}\n\nconst calcSize = (width: number) => {\n  const smWidth = getCssVarsValue('--td-screen-sm') || 768;\n  const mdWidth = getCssVarsValue('--td-screen-md') || 992;\n  const lgWidth = getCssVarsValue('--td-screen-lg') || 1200;\n  const xlWidth = getCssVarsValue('--td-screen-xl') || 1400;\n  const xxlWidth = getCssVarsValue('--td-screen-xxl') || 1880;\n\n  let size = 'xs';\n  if (width >= xxlWidth) {\n    size = 'xxl';\n  } else if (width >= xlWidth) {\n    size = 'xl';\n  } else if (width >= lgWidth) {\n    size = 'lg';\n  } else if (width >= mdWidth) {\n    size = 'md';\n  } else if (width >= smWidth) {\n    size = 'sm';\n  } else {\n    size = 'xs';\n  }\n\n  return size;\n};\n\nconst calcRowStyle = (gutter: TdRowProps['gutter'], currentSize: string): object => {\n  const rowStyle = {};\n  if (typeof gutter === 'number') {\n    Object.assign(rowStyle, {\n      marginLeft: `${gutter / -2}px`,\n      marginRight: `${gutter / -2}px`,\n    });\n  } else if (Array.isArray(gutter) && gutter.length) {\n    if (typeof gutter[0] === 'number') {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0] / -2}px`,\n        marginRight: `${gutter[0] / -2}px`,\n      });\n    }\n    if (typeof gutter[1] === 'number') {\n      Object.assign(rowStyle, { rowGap: `${gutter[1]}px` });\n    }\n\n    if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0][currentSize] / -2}px`,\n        marginRight: `${gutter[0][currentSize] / -2}px`,\n      });\n    }\n    if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n      Object.assign(rowStyle, { rowGap: `${gutter[1][currentSize]}px` });\n    }\n  } else if (isObject(gutter) && gutter[currentSize]) {\n    if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize][0] / -2}px`,\n        marginRight: `${gutter[currentSize][0] / -2}px`,\n      });\n      Object.assign(rowStyle, { rowGap: `${gutter[currentSize][1]}px` });\n    } else {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize] / -2}px`,\n        marginRight: `${gutter[currentSize] / -2}px`,\n      });\n    }\n  }\n  return rowStyle;\n};\n\n/**\n * Row组件\n */\nconst Row = (props: RowProps) => {\n  const { align, gutter, justify, tag, style: propStyle, className, children, ...otherRowProps } = props;\n\n  const [size, setSize] = useState(canUseDocument ? calcSize(window.innerWidth) : 'md');\n\n  const updateSize = () => {\n    const currentSize = calcSize(window.innerWidth);\n    if (currentSize !== size) {\n      setSize(size);\n    }\n  };\n\n  const { classPrefix } = useConfig();\n  const rowClassNames = classNames(`${classPrefix}-row`, className, {\n    [`${classPrefix}-row--${justify}`]: true,\n    [`${classPrefix}-row--${align}`]: true,\n  });\n  const rowStyle = {\n    ...calcRowStyle(gutter, size),\n    ...propStyle,\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSize);\n    return () => {\n      window.removeEventListener('resize', updateSize);\n    };\n  });\n\n  return React.createElement(\n    tag,\n    {\n      className: rowClassNames,\n      style: rowStyle,\n      ...otherRowProps,\n    },\n    React.Children.map(children, (child: React.ReactElement) => {\n      if (child && child.type === Col) {\n        return React.cloneElement(child, { gutter, size });\n      }\n      return child;\n    }),\n  );\n};\n\nRow.displayName = 'Row';\nRow.defaultProps = rowDefaultProps;\n\nexport default Row;\n"],"names":["calcSize","width","smWidth","getCssVarsValue","mdWidth","lgWidth","xlWidth","xxlWidth","size","calcRowStyle","gutter","currentSize","rowStyle","Object","assign","marginLeft","marginRight","Array","isArray","length","rowGap","isObject","Row","props","align","justify","tag","propStyle","style","className","children","otherRowProps","useState","canUseDocument","window","innerWidth","setSize","updateSize","useConfig","classPrefix","rowClassNames","classNames","useEffect","addEventListener","removeEventListener","React","createElement","Children","map","child","type","Col","cloneElement","displayName","defaultProps","rowDefaultProps"],"mappings":"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"}