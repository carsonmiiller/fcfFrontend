{"version":3,"file":"InputNumber.js","sources":["../../src/input-number/InputNumber.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  useState,\n  useCallback,\n  useMemo,\n  FocusEventHandler,\n  KeyboardEventHandler,\n  useEffect,\n} from 'react';\nimport classNames from 'classnames';\n\nimport { StyledProps } from '../common';\nimport { TdInputNumberProps, ChangeContext as TdChangeContext } from './type';\n\nimport useConfig from '../_util/useConfig';\nimport useCommonClassName from '../_util/useCommonClassName';\nimport useUpdateEffect from '../_util/useUpdateEffect';\n\nimport StepHandler from './StepHandler';\nimport * as numberUtils from './utils/numberUtils';\nimport Input from '../input';\nimport { inputNumberDefaultProps } from './defaultProps';\n\nexport type InputNumberInternalValue = number | string;\nexport type ChangeContext = TdChangeContext & { value?: number };\nexport interface InputNumberProps extends TdInputNumberProps, StyledProps {}\n\nconst InputNumber = forwardRef((props: InputNumberProps, ref: React.Ref<HTMLInputElement>) => {\n  const {\n    align,\n    className,\n    style,\n    defaultValue,\n    value,\n    disabled,\n    size,\n    theme,\n    step,\n    max,\n    min,\n    decimalPlaces,\n    format,\n    onChange,\n    onBlur,\n    onFocus,\n    onEnter,\n    onKeydown,\n    onKeyup,\n    onKeypress,\n    ...restInputProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n  const commonClassNames = useCommonClassName();\n  const componentType = 'input-number';\n  const inputClassName = `${classPrefix}-${componentType}`;\n\n  const getRangeValue = (value: number) => {\n    if (value < min) return min;\n    if (value > max) return max;\n\n    return value;\n  };\n\n  const [internalInputValue, setInternalInputValue] = useState<InputNumberInternalValue>(() => {\n    let initialValue: InputNumberInternalValue = '';\n    if (!numberUtils.isInvalidNumber(defaultValue)) {\n      initialValue = getRangeValue(Number(defaultValue));\n    }\n    if (!numberUtils.isInvalidNumber(value)) {\n      initialValue = value;\n    }\n\n    if (format && initialValue !== '') {\n      return format(getRangeValue(Number(initialValue))) || '';\n    }\n\n    return initialValue;\n  });\n\n  let decimalValue: number = internalInputValue as number;\n  if (typeof internalInputValue === 'string') {\n    decimalValue = Number(numberUtils.strToNumber(internalInputValue)) || 0;\n  }\n\n  const setInputValue = (inputStr: string) => {\n    if (['', undefined].includes(inputStr)) {\n      return setInternalInputValue('');\n    }\n\n    const formattedInputValue = format?.(Number(inputStr)) ?? inputStr;\n    setInternalInputValue(formattedInputValue);\n  };\n\n  const [isError, setError] = useState<boolean>(false);\n  const disabledDecrease = disabled || isError || (decimalValue - step < min && internalInputValue !== '');\n  const disabledIncrease = disabled || isError || (decimalValue + step > max && internalInputValue !== '');\n\n  const isOutOfRange = (number: number): boolean => number > max || number < min;\n  const checkInput = (inputStr: InputNumberInternalValue): boolean => {\n    if (inputStr === '') {\n      setError(false);\n      return true;\n    }\n\n    const hasError = numberUtils.isInvalidNumber(inputStr) || isOutOfRange(Number(inputStr));\n    setError(hasError);\n    return !hasError;\n  };\n\n  const stepPrecision = useMemo(() => numberUtils.getNumberPrecision(step), [step]);\n\n  const getPrecision = useCallback(\n    (str: InputNumberInternalValue): number => {\n      const numberPrecision = numberUtils.getNumberPrecision(str);\n\n      return decimalPlaces ?? Math.max(numberPrecision, stepPrecision);\n    },\n    [stepPrecision, decimalPlaces],\n  );\n\n  useEffect(() => {\n    if (value !== undefined) {\n      checkInput(value);\n    }\n  }, [value]); // eslint-disable-line\n\n  useUpdateEffect(() => {\n    setInputValue((value ?? '').toString());\n  }, [value]);\n\n  const triggerValueUpdate = (action: ChangeContext) => {\n    const { value, ...context } = action;\n    if (!disabled) {\n      onChange?.(value, context);\n    }\n  };\n\n  const onInternalInput = (inputStr: string, { e }) => {\n    if (inputStr === '') {\n      setInputValue(inputStr);\n      return triggerValueUpdate({ type: 'input', value: undefined, e });\n    }\n    if (inputStr.endsWith('.')) {\n      setInternalInputValue(inputStr);\n      return;\n    }\n    if (/^(([1-9]+[0-9]*\\.0+)|(0\\.0+))$/.test(inputStr)) {\n      setInternalInputValue(inputStr);\n      return;\n    }\n    const filteredInputStr = numberUtils.strToNumber(inputStr);\n    if (Number.isNaN(filteredInputStr)) {\n      setInternalInputValue(inputStr);\n      if (!checkInput(inputStr)) return;\n    }\n\n    setInputValue(filteredInputStr.toString());\n    if (!checkInput(filteredInputStr)) return;\n    triggerValueUpdate({ type: 'input', value: Number(filteredInputStr), e });\n  };\n\n  const onInternalStep = (action: ChangeContext) => {\n    if (props.readonly) return;\n\n    const { type, e } = action;\n    const currentValue = decimalValue || 0;\n    const precision = getPrecision(currentValue);\n\n    let updateValue: number;\n    switch (type) {\n      case 'add': {\n        const addedVal = currentValue + step;\n        updateValue = Number(Math.max(addedVal, min).toFixed(precision));\n        break;\n      }\n      case 'reduce': {\n        const reducedVal = currentValue - step;\n        updateValue = Number(Math.max(reducedVal, min).toFixed(precision));\n        break;\n      }\n    }\n\n    setInputValue(String(updateValue));\n    triggerValueUpdate({ value: updateValue, type, e });\n    e.preventDefault();\n  };\n\n  const handleBlur: FocusEventHandler<HTMLDivElement> = (e) => {\n    let updateValue;\n    const internalFloatValue = parseFloat(internalInputValue as string);\n    if (internalInputValue === '') {\n      updateValue = undefined;\n    } else if (!Number.isNaN(internalFloatValue)) {\n      updateValue = getRangeValue(internalFloatValue);\n    } else {\n      const checkVal = (internalInputValue as string).replace(/[^0-9]/gi, '');\n      updateValue = checkVal;\n      if (!checkVal) {\n        updateValue = value;\n      }\n    }\n    onBlur?.(updateValue, { e });\n    setInputValue((updateValue ?? '').toString());\n    setError(false);\n\n    if (updateValue !== value) {\n      triggerValueUpdate({ value: updateValue, e, type: '' });\n    }\n  };\n  const handleFocus: FocusEventHandler<HTMLDivElement> = (e) => onFocus?.(decimalValue, { e });\n  const handleKeydownEnter: KeyboardEventHandler<HTMLDivElement> = (e) => {\n    e.key === 'Enter' && onEnter?.(decimalValue, { e });\n  };\n  const handleKeydown: KeyboardEventHandler<HTMLDivElement> = (e) => {\n    onKeydown?.(decimalValue, { e });\n    handleKeydownEnter(e);\n  };\n  const handleKeyup: KeyboardEventHandler<HTMLDivElement> = (e) => onKeyup?.(decimalValue, { e });\n  const handleKeypress: KeyboardEventHandler<HTMLDivElement> = (e) => onKeypress?.(decimalValue, { e });\n  return (\n    <div\n      ref={ref}\n      className={classNames(className, inputClassName, commonClassNames.SIZE[size], {\n        [commonClassNames.STATUS.disabled]: disabled,\n        [`${classPrefix}-is-controls-right`]: theme === 'column',\n        [`${inputClassName}--${theme}`]: theme,\n        [`${inputClassName}--auto-width`]: props.autoWidth,\n      })}\n      style={style}\n      onBlur={handleBlur}\n      onFocus={handleFocus}\n      onKeyDown={handleKeydown}\n      onKeyUp={handleKeyup}\n      onKeyPress={handleKeypress}\n    >\n      <StepHandler\n        theme={theme}\n        prefixClassName={inputClassName}\n        disabledDecrease={disabledDecrease}\n        disabledIncrease={disabledIncrease}\n        onStep={onInternalStep}\n      >\n        <Input\n          disabled={disabled}\n          value={internalInputValue}\n          onChange={onInternalInput}\n          status={isError ? 'error' : undefined}\n          align={align || (theme === 'row' ? 'center' : undefined)}\n          {...restInputProps}\n        />\n      </StepHandler>\n    </div>\n  );\n});\n\nInputNumber.displayName = 'InputNumber';\nInputNumber.defaultProps = inputNumberDefaultProps;\n\nexport default InputNumber;\n"],"names":["InputNumber","forwardRef","props","ref","align","className","style","defaultValue","value","disabled","size","theme","step","max","min","decimalPlaces","format","onChange","onBlur","onFocus","onEnter","onKeydown","onKeyup","onKeypress","restInputProps","useConfig","classPrefix","commonClassNames","useCommonClassName","componentType","inputClassName","getRangeValue","value2","useState","initialValue","numberUtils","Number","internalInputValue","setInternalInputValue","decimalValue","setInputValue","inputStr","includes","formattedInputValue","isError","setError","disabledDecrease","disabledIncrease","isOutOfRange","number","checkInput","hasError","stepPrecision","useMemo","getPrecision","useCallback","str","numberPrecision","Math","useEffect","useUpdateEffect","toString","triggerValueUpdate","action","context","onInternalInput","e","type","endsWith","test","filteredInputStr","isNaN","onInternalStep","readonly","currentValue","precision","updateValue","addedVal","toFixed","reducedVal","String","preventDefault","handleBlur","internalFloatValue","parseFloat","checkVal","replace","handleFocus","handleKeydownEnter","key","handleKeydown","handleKeyup","handleKeypress","React","createElement","classNames","SIZE","STATUS","autoWidth","onKeyDown","onKeyUp","onKeyPress","StepHandler","prefixClassName","onStep","Input","status","displayName","defaultProps","inputNumberDefaultProps"],"mappings":"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"}