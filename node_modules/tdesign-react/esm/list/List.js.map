{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport isString from 'lodash/isString';\nimport useConfig from '../_util/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\nimport { listDefaultProps } from './defaultProps';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size,\n      split,\n      stripe,\n      layout,\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style,\n    } = props;\n\n    const { classPrefix } = useConfig();\n    const [local, t] = useLocaleReceiver('list');\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    const loadElement = isString(asyncLoading) ? (\n      <div\n        className={classNames(`${classPrefix}-list__load`, {\n          [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n          [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n        })}\n        onClick={handleClickLoad}\n      >\n        {asyncLoading === 'loading' && (\n          <div>\n            <Loading loading={true} />\n            <span>{t(local.loadingText)}</span>\n          </div>\n        )}\n        {asyncLoading === 'load-more' && <span>{t(local.loadingMoreText)}</span>}\n      </div>\n    ) : (\n      asyncLoading\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(className, 't-list', {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header && <div className={`${classPrefix}-list__header`}>{header}</div>}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {asyncLoading && loadElement}\n        {footer && <div className={`${classPrefix}-list__footer`}>{footer}</div>}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\nList.defaultProps = listDefaultProps;\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","header","footer","asyncLoading","size","split","stripe","layout","children","className","onLoadMore","noop","onScroll","style","useConfig","classPrefix","useLocaleReceiver","local","t","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","isString","React","createElement","classNames","onClick","Loading","loading","loadingText","loadingMoreText","ListItem","ListItemMeta","displayName","defaultProps","listDefaultProps"],"mappings":"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"}