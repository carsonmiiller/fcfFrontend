{"version":3,"file":"Panel.js","sources":["../../../src/cascader/components/Panel.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../_util/useConfig';\n\n// common logic\nimport { getPanels, expendClickEffect, valueChangeEffect } from '../utils/panel';\n\n// components\nimport Item from './Item';\n\n// type\nimport { CascaderPanelProps, TreeNode, ContextType } from '../interface';\n\nconst Panel = (props: CascaderPanelProps) => {\n  const {\n    cascaderContext: { filterActive, treeNodes, inputWidth },\n    cascaderContext,\n    empty,\n  } = props;\n\n  const panels = useMemo(() => getPanels(treeNodes), [treeNodes]);\n\n  const handleExpand = (ctx: ContextType, trigger: 'hover' | 'click') => {\n    const { node } = ctx;\n    const { trigger: propsTrigger, cascaderContext } = props;\n\n    expendClickEffect(propsTrigger, trigger, node, cascaderContext);\n  };\n\n  const handleChange = (ctx: ContextType) => {\n    const { node } = ctx;\n\n    valueChangeEffect(node, cascaderContext);\n  };\n\n  const { classPrefix } = useConfig();\n  const name = `${classPrefix}-cascader`;\n\n  // innerComponents\n  const renderEmpty = <div className={`${name}__panel--empty`}>{empty}</div>;\n\n  const renderItem = (node: TreeNode, index) => (\n    <Item\n      key={index}\n      node={node}\n      cascaderContext={cascaderContext}\n      onClick={(ctx: ContextType) => {\n        handleExpand(ctx, 'click');\n      }}\n      onMouseEnter={(ctx: ContextType) => {\n        handleExpand(ctx, 'hover');\n      }}\n      onChange={handleChange}\n    />\n  );\n\n  const panelsContainer = panels.map((panel, index) => (\n    <ul\n      className={classNames(`${name}__menu`, 'narrow-scrollbar', {\n        [`${name}__menu--segment`]: index !== panels.length - 1,\n      })}\n      key={index}\n    >\n      {panel.map((node: TreeNode, index) => renderItem(node, index))}\n    </ul>\n  ));\n\n  const filterPanelsContainer = (\n    <ul className={classNames(`${name}__menu`, 'narrow-scrollbar', `${name}__menu--segment`, `${name}__menu--filter`)}>\n      {treeNodes.map((node: TreeNode, index: number) => renderItem(node, index))}\n    </ul>\n  );\n\n  const renderPanels = filterActive ? filterPanelsContainer : panelsContainer;\n\n  return (\n    <div\n      className={classNames(`${name}__panel`, { [`${name}--normal`]: panels.length })}\n      style={{\n        width: panels.length === 0 ? `${inputWidth}px` : null,\n      }}\n    >\n      {panels && panels.length ? renderPanels : renderEmpty}\n    </div>\n  );\n};\n\nexport default Panel;\n"],"names":["Panel","props","cascaderContext","filterActive","treeNodes","inputWidth","empty","panels","useMemo","getPanels","handleExpand","ctx","trigger","node","propsTrigger","cascaderContext2","expendClickEffect","handleChange","valueChangeEffect","useConfig","classPrefix","name","renderEmpty","React","createElement","className","renderItem","index","Item","key","onClick","onMouseEnter","onChange","panelsContainer","map","panel","classNames","length","index2","filterPanelsContainer","renderPanels","style","width"],"mappings":"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"}