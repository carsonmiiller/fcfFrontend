{"version":3,"file":"Alert.js","sources":["../../src/alert/Alert.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon, CloseIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-react';\nimport useConfig from '../_util/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { TdAlertProps } from './type';\nimport { StyledProps } from '../common';\nimport { alertDefaultProps } from './defaultProps';\n\nexport interface AlertProps extends TdAlertProps, StyledProps {}\n\nconst Alert = forwardRef((props: AlertProps, ref: React.Ref<HTMLDivElement>) => {\n  const { message, title, operation, theme, icon, close, maxLine, onClose, className, ...alertProps } = props;\n\n  const [closed, setClosed] = React.useState(false);\n  const [collapsed, setCollapsed] = React.useState(false);\n  const { classPrefix } = useConfig();\n  const [local, t] = useLocaleReceiver('alert');\n\n  const iconMap = {\n    success: CheckCircleFilledIcon,\n    info: InfoCircleFilledIcon,\n    error: ErrorCircleFilledIcon,\n    warning: ErrorCircleFilledIcon,\n  };\n\n  const handleClose = (e: React.MouseEvent<HTMLDivElement>) => {\n    setClosed(true);\n    onClose?.({ e });\n  };\n\n  const handleCollapse = () => {\n    setCollapsed(!collapsed);\n  };\n\n  const renderIconNode = () => {\n    if (React.isValidElement(icon)) {\n      return React.cloneElement(icon as React.ReactElement, {\n        className: classNames({\n          [icon.props.className]: icon.props.className,\n        }),\n      });\n    }\n    return React.createElement(iconMap[theme] || iconMap.info);\n  };\n\n  const renderMessage = () => {\n    if (+maxLine > 0 && Array.isArray(message)) {\n      return (\n        <div className={`${classPrefix}-alert__description`}>\n          {message.map((item, index) => {\n            if (!collapsed) {\n              if (index < maxLine) {\n                return <div key={index}>{item}</div>;\n              }\n            } else {\n              return <div key={index}>{item}</div>;\n            }\n            return true;\n          })}\n          {+maxLine > 0 ? (\n            <div className={`${classPrefix}-alert__collapse`} onClick={handleCollapse}>\n              {!collapsed ? t(local.expandText) : t(local.collapseText)}\n            </div>\n          ) : null}\n        </div>\n      );\n    }\n    return <div className={`${classPrefix}-alert__description`}>{message}</div>;\n  };\n\n  const renderClose = () => (\n    <div className={`${classPrefix}-alert__close`} onClick={handleClose}>\n      {typeof close === 'boolean' ? <CloseIcon /> : close}\n    </div>\n  );\n\n  return closed ? null : (\n    <div\n      ref={ref}\n      className={classNames(`${classPrefix}-alert`, `${classPrefix}-alert--${theme}`, className)}\n      {...alertProps}\n    >\n      <div className={`${classPrefix}-alert__icon`}>{renderIconNode()}</div>\n      <div className={`${classPrefix}-alert__content`}>\n        {title ? <div className={`${classPrefix}-alert__title`}>{title}</div> : null}\n        <div className={`${classPrefix}-alert__message`}>\n          {renderMessage()}\n          {operation ? <div className={`${classPrefix}-alert__operation`}>{operation}</div> : null}\n        </div>\n      </div>\n      {close ? renderClose() : null}\n    </div>\n  );\n});\n\nAlert.displayName = 'Alert';\nAlert.defaultProps = alertDefaultProps;\n\nexport default Alert;\n"],"names":["Alert","forwardRef","props","ref","message","title","operation","theme","icon","close","maxLine","onClose","className","alertProps","React","useState","closed","setClosed","collapsed","setCollapsed","useConfig","classPrefix","useLocaleReceiver","local","t","iconMap","success","CheckCircleFilledIcon","info","InfoCircleFilledIcon","error","ErrorCircleFilledIcon","warning","handleClose","e","handleCollapse","renderIconNode","isValidElement","cloneElement","classNames","createElement","renderMessage","Array","isArray","map","item","index","key","onClick","expandText","collapseText","renderClose","CloseIcon","displayName","defaultProps","alertDefaultProps"],"mappings":"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"}