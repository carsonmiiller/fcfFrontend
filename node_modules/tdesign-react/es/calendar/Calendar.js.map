{"version":3,"file":"Calendar.js","sources":["../../src/calendar/Calendar.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback, useEffect, forwardRef } from 'react';\nimport dayjs from 'dayjs';\nimport Button from '../button';\nimport Select from '../select';\nimport Radio from '../radio';\nimport CheckTag from '../tag/CheckTag';\nimport noop from '../_util/noop';\nimport usePrefixClass from './hooks/usePrefixClass';\nimport useLayoutEffect from '../_util/useLayoutEffect';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { TdCalendarProps, ControllerOptions, CalendarCell, CalendarValue, CalendarController } from './type';\nimport { StyledProps } from '../common';\nimport { blockName, controlSectionSize, minYear, createDateList, createMonthList } from './_util';\nimport CalendarCellComp from './CalendarCellComp';\nimport { calendarDefaultProps } from './defaultProps';\n\nexport interface CalendarProps extends TdCalendarProps, StyledProps {}\n\nexport interface CalendarMethods {\n  /**\n   * 显示当前月份\\年份\n   */\n  toCurrent: (value: CalendarValue) => void;\n}\n\n// 组件内部将 controllerConfigData 参数类型转换为 CalendarController 处理，将 bool 时候的值作为 visible 并入其中\ninterface InternalCalendarController extends Required<CalendarController> {\n  visible: boolean;\n}\n\nconst getDefaultControllerConfigData = (visible = true): InternalCalendarController => ({\n  visible, // 是否显示（全部控件）\n  disabled: false, // 是否禁用（全部控件）\n  // 模式切换单选组件设置\n  mode: {\n    visible: true, // 是否显示\n    radioGroupProps: {}, // 用于透传props给该radioGroup组件\n  },\n  // 年份选择框组件相关设置\n  year: {\n    visible: true, // 是否显示\n    selectProps: { popupProps: { overlayStyle: { width: '110px' } } }, // 用于透传props给该select组件\n  },\n  // 年份选择框组件相关设置\n  month: {\n    visible: true, // 是否显示（“year”模式下本身是不显示该组件的）\n    selectProps: { popupProps: { overlayStyle: { width: '90px' } } }, // 用于透传props给该select组件\n  },\n  // 隐藏\\显示周末按钮组件相关设置\n  weekend: {\n    visible: true, // 是否显示\n    showWeekendButtonProps: {}, // 用于透传props给显示周末按钮组件\n    hideWeekendButtonProps: {}, // 用于透传props给隐藏周末按钮组件\n  },\n  // “今天\\本月”按钮组件相关设置\n  current: {\n    visible: true, // 是否显示\n    currentDayButtonProps: {}, // 用于透传props给“今天”钮组件（“month”模式下有效）\n    currentMonthButtonProps: {}, // 用于透传props给“本月”按钮组件（“year”模式下有效）\n  },\n});\n\nconst Calendar: React.FC<CalendarProps> = forwardRef((props, ref: React.MutableRefObject<CalendarMethods>) => {\n  const {\n    className,\n    style,\n    mode: modeFromProps,\n    value: valueFromProps,\n    firstDayOfWeek,\n    format,\n    range,\n    head,\n    cell,\n    cellAppend,\n    week,\n    theme,\n    controllerConfig,\n    isShowWeekendDefault = true,\n    preventCellContextmenu = false,\n    month: monthProps,\n    year: yearProps,\n    onControllerChange = noop,\n    onCellClick = noop,\n    onCellDoubleClick = noop,\n    onCellRightClick = noop,\n    onMonthChange = noop,\n    fillWithZero,\n  } = props;\n\n  // 组装配置信息\n  const controllerConfigData: InternalCalendarController =\n    typeof controllerConfig === 'boolean'\n      ? getDefaultControllerConfigData(controllerConfig)\n      : { ...getDefaultControllerConfigData(), ...controllerConfig };\n\n  // 处理 monthProps 与 yearProps 比 controllerConfig 优先的情况\n  if (typeof controllerConfig !== 'boolean') {\n    if (monthProps) {\n      controllerConfigData.month.visible = true;\n    }\n    if (yearProps) {\n      controllerConfigData.year.visible = true;\n    }\n  }\n\n  // 读配置信息\n  const {\n    visible,\n    disabled,\n    mode: modeFromConfig,\n    year: yearFromConfig,\n    month: monthFromConfig,\n    weekend,\n    current,\n  } = controllerConfigData;\n  const { visible: visibleForMode = true, radioGroupProps: radioGroupPropsForMode = {} } = modeFromConfig;\n  const { visible: visibleForYear = true, selectProps: selectPropsForYear = {} } = yearFromConfig;\n  const { visible: visibleForMonth = true, selectProps: selectPropsForMonth = {} } = monthFromConfig;\n  const { visible: visibleForWeekendToggle = true, showWeekendButtonProps = {}, hideWeekendButtonProps = {} } = weekend;\n  const { visible: visibleForCurrent = true, currentDayButtonProps = {}, currentMonthButtonProps = {} } = current;\n\n  const [mode, setMode] = useState<string>('month');\n  const [value, setValue] = useState<dayjs.Dayjs>(dayjs(valueFromProps || dayjs().format('YYYY-MM-DD')));\n  const [year, setYear] = useState<number>(yearProps ? Number(yearProps) : value.year());\n  const [month, setMonth] = useState<number>(monthProps ? Number(monthProps) : parseInt(value.format('M'), 10));\n  const [isShowWeekend, setIsShowWeekend] = useState<boolean>(isShowWeekendDefault);\n\n  const [local, t] = useLocaleReceiver('calendar');\n\n  // 表头数组\n  const weekLabelList = t(local.week).split(',');\n  const colHeaderList = useMemo(() => {\n    if (mode === 'year') return [];\n    const weekTextArr = Array.isArray(week) && week.length >= 7 ? week : [...weekLabelList];\n    const list = [];\n    for (let i = firstDayOfWeek; i <= 7; i++) {\n      if (!isShowWeekend && i > 5) {\n        break;\n      }\n      list.push({\n        day: i,\n        text: weekTextArr[i - 1],\n      });\n    }\n    if (firstDayOfWeek > 1) {\n      for (let i = 1; i < firstDayOfWeek; i++) {\n        if (!isShowWeekend && i > 5) {\n          break;\n        }\n        list.push({\n          day: i,\n          text: weekTextArr[i - 1],\n        });\n      }\n    }\n    return list;\n  }, [mode, firstDayOfWeek, isShowWeekend, week, weekLabelList]);\n\n  // 根据传入的 range 参数生成 key 为 from, to 的范围对象\n  const rangeFromTo = useMemo(() => {\n    if (!range || range.length < 2) {\n      return null;\n    }\n    const [v1, v2] = range;\n    if (dayjs(v1).isBefore(dayjs(v2))) {\n      return {\n        from: v1,\n        to: v2,\n      };\n    }\n    return {\n      from: v2,\n      to: v1,\n    };\n  }, [range]);\n\n  // 构造基础 controllerOptions\n  const controllerOptions: ControllerOptions = useMemo(() => {\n    const dayJsFilterDate: dayjs.Dayjs = dayjs(`${year}-${month}`);\n    const re = {\n      filterDate: dayJsFilterDate.toDate(),\n      formattedFilterDate: dayJsFilterDate.format(format),\n      mode,\n      isShowWeekend,\n    };\n    return re;\n  }, [isShowWeekend, mode, year, month, format]);\n\n  // 年份、月份 Select 选择框选项\n  const [yearSelectList, monthSelectList] = useMemo(() => {\n    const isRangeValid = rangeFromTo && rangeFromTo.from && rangeFromTo.to;\n    const checkMonthSelectorDisabled = (yearIn: number, monthIn: number): boolean => {\n      if (isRangeValid) {\n        const beginYear = dayjs(rangeFromTo.from).year();\n        const endYear = dayjs(rangeFromTo.to).year();\n        if (yearIn === beginYear) {\n          const beginMon = parseInt(dayjs(rangeFromTo.from).format('M'), 10);\n          return monthIn < beginMon;\n        }\n        if (yearIn === endYear) {\n          const endMon = parseInt(dayjs(rangeFromTo.to).format('M'), 10);\n          return monthIn > endMon;\n        }\n      }\n      return false;\n    };\n\n    const yearList = [];\n    const monthList = [];\n    // 年列表\n    const yearBegin = isRangeValid ? dayjs(rangeFromTo.from).year() : Math.max(minYear, year - 10);\n    const yearEnd = isRangeValid ? dayjs(rangeFromTo.to).year() : Math.max(minYear, year + 10);\n    for (let i = yearBegin; i <= yearEnd; i++) {\n      yearList.push({\n        value: i,\n        disabled: checkMonthSelectorDisabled(i, month),\n      });\n    }\n    // 月列表\n    for (let i = 1; i <= 12; i++) {\n      monthList.push({\n        value: i,\n        disabled: checkMonthSelectorDisabled(year, i),\n      });\n    }\n    return [yearList, monthList];\n  }, [rangeFromTo, year, month]);\n\n  // mode为 'month' 时，构造日历列表\n  const dateList = useMemo<CalendarCell[][]>(\n    () => createDateList(year, month, firstDayOfWeek, value, format),\n    [year, month, firstDayOfWeek, format, value],\n  );\n\n  // mode为 'year' 时，构造月历列表\n  const monthList = useMemo<CalendarCell[][]>(() => createMonthList(year, value, format), [year, value, format]);\n\n  // 将基础的 CalendarCell 与 ControllerOptions 进行合并\n  const createCalendarCell = useCallback(\n    (cellData: CalendarCell): CalendarCell => ({\n      ...cellData,\n      ...controllerOptions,\n    }),\n    [controllerOptions],\n  );\n\n  const toCurrent = useCallback((valueIn: CalendarValue = null) => {\n    const now: dayjs.Dayjs = dayjs(valueIn).isValid() ? dayjs(valueIn) : dayjs(dayjs().format('YYYY-MM-DD'));\n    setValue(now);\n    setYear(now.year());\n    setMonth(parseInt(now.format('M'), 10));\n  }, []);\n\n  React.useImperativeHandle(ref, () => ({ toCurrent }), [toCurrent]);\n\n  // 月份 select change 事件回调\n  const handleMonthChange = (newMonth: number) => {\n    setMonth(newMonth);\n    onMonthChange({ month: String(newMonth), year: String(year) });\n  };\n\n  // 事件回调处理函数\n  const execCellEvent = useCallback(\n    (event, calendarCell, handleFunc) => {\n      if (handleFunc && typeof handleFunc === 'function') {\n        handleFunc({\n          cell: createCalendarCell(calendarCell),\n          e: event,\n        });\n      }\n    },\n    [createCalendarCell],\n  );\n\n  // 单元格单击\n  const clickCell = (event, calendarCell: CalendarCell) => {\n    setValue(dayjs(calendarCell.formattedDate));\n    execCellEvent(event, calendarCell, onCellClick);\n  };\n\n  // 单元格双击\n  const doubleClickCell = (event, calendarCell: CalendarCell) => {\n    execCellEvent(event, calendarCell, onCellDoubleClick);\n  };\n\n  // 单元格右击\n  const rightClickCell = (event, calendarCell: CalendarCell) => {\n    if (preventCellContextmenu) event.preventDefault();\n    execCellEvent(event, calendarCell, onCellRightClick);\n  };\n\n  // 监听 current 参数\n  useEffect(() => {\n    toCurrent(valueFromProps);\n  }, [valueFromProps, toCurrent]);\n\n  // 监听 month 参数\n  useEffect(() => {\n    if (monthProps) {\n      setMonth(Number(monthProps));\n    }\n  }, [monthProps]);\n\n  // 监听 year 参数\n  useEffect(() => {\n    if (yearProps) {\n      setYear(Number(yearProps));\n    }\n  }, [yearProps]);\n\n  // 监听 mode 参数\n  useEffect(() => {\n    setMode(modeFromProps);\n  }, [modeFromProps]);\n\n  // 监听 isShowWeekend 参数\n  useEffect(() => {\n    setIsShowWeekend(isShowWeekendDefault);\n  }, [isShowWeekendDefault]);\n\n  // 右上角控件组选中值有变化的时候触发\n  useLayoutEffect(() => {\n    onControllerChange(controllerOptions);\n  }, [controllerOptions, onControllerChange]);\n\n  const prefixCls = usePrefixClass();\n  const currentDate = dayjs().format('YYYY-MM-DD');\n  const currentMonth = dayjs().format('YYYY-MM');\n\n  return (\n    <div className={prefixCls(blockName, [blockName, '', theme]).concat(' ', className)} style={style}>\n      {/* 操作部分 */}\n      {visible && (\n        <div className={prefixCls([blockName, 'control'])}>\n          <div className={prefixCls([blockName, 'title'])}>\n            {(() => {\n              if (head && typeof head === 'function') return head(controllerOptions);\n              if (head && typeof head !== 'function') return head;\n            })()}\n          </div>\n          <div className={prefixCls([blockName, 'control-section'])}>\n            {/* 年份选择框 */}\n            <div className={prefixCls([blockName, 'control-section-cell'])}>\n              {visibleForYear && (\n                <Select\n                  autoWidth={true}\n                  size={controlSectionSize}\n                  value={year}\n                  disabled={disabled}\n                  options={yearSelectList.map((item) => ({\n                    label: t(local.yearSelection, { year: item.value }),\n                    value: item.value,\n                    disabled: item.disabled,\n                  }))}\n                  onChange={(selectYear) => setYear(selectYear as number)}\n                  {...selectPropsForYear}\n                />\n              )}\n            </div>\n            {/* 月份选择框 */}\n            <div className={prefixCls([blockName, 'control-section-cell'])}>\n              {visibleForMonth && mode === 'month' && (\n                <Select\n                  autoWidth={true}\n                  size={controlSectionSize}\n                  value={month}\n                  options={monthSelectList.map((item) => ({\n                    label: t(local.monthSelection, { month: item.value }),\n                    value: item.value,\n                    disabled: item.disabled,\n                  }))}\n                  disabled={disabled}\n                  onChange={handleMonthChange}\n                  {...selectPropsForMonth}\n                />\n              )}\n            </div>\n          </div>\n          {/* 模式切换 */}\n          <div className={prefixCls([blockName, 'control-section'])} style={{ height: 'auto' }}>\n            {visibleForMode && (\n              <Radio.Group\n                variant=\"default-filled\"\n                size={controlSectionSize}\n                value={mode}\n                disabled={disabled}\n                onChange={(value) => setMode(value as string)}\n                {...radioGroupPropsForMode}\n              >\n                <Radio.Button value=\"month\">{t(local.monthRadio)}</Radio.Button>\n                <Radio.Button value=\"year\">{t(local.yearRadio)}</Radio.Button>\n              </Radio.Group>\n            )}\n          </div>\n          {/* 周末隐藏显示切换 */}\n          {mode === 'month' && theme === 'full' && visibleForWeekendToggle && (\n            <div className={prefixCls([blockName, 'control-section'])}>\n              <CheckTag\n                className=\"t-calendar__control-tag\"\n                checked={!isShowWeekend}\n                disabled={disabled}\n                size={controlSectionSize}\n                onClick={() => {\n                  setIsShowWeekend(!isShowWeekend);\n                }}\n                {...(isShowWeekend ? hideWeekendButtonProps : showWeekendButtonProps)}\n              >\n                {`${isShowWeekend ? t(local.hideWeekend) : t(local.showWeekend)}`}\n              </CheckTag>\n            </div>\n          )}\n          {/* 回到当前按钮 */}\n          {theme === 'full' && visibleForCurrent && (\n            <div className={prefixCls([blockName, 'control-section'])}>\n              <Button\n                size={controlSectionSize}\n                disabled={disabled}\n                onClick={() => {\n                  toCurrent();\n                }}\n                {...(mode === 'year' ? currentMonthButtonProps : currentDayButtonProps)}\n              >\n                {mode === 'year' ? t(local.thisMonth) : t(local.today)}\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n      {/* 主体部分 */}\n      <div className={prefixCls([blockName, 'panel'], [blockName, `panel--${mode}`])}>\n        <table className={prefixCls([blockName, 'table'])}>\n          {/* 表头部分 */}\n          {colHeaderList.length > 0 && (\n            <thead className={prefixCls([blockName, 'table-head'])}>\n              <tr className={prefixCls([blockName, 'table-head-row'])}>\n                {colHeaderList.map((item) => (\n                  <th key={item.day} className={prefixCls([blockName, 'table-head-cell'])}>\n                    {week && typeof week === 'function' ? week({ day: item.day }) : item.text}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n          )}\n          {/* month 模式，输出日期 */}\n          {mode === 'month' && (\n            <tbody className={prefixCls([blockName, 'table-body'])}>\n              {dateList.map((dateRow, dateRowIndex) => (\n                <tr key={String(dateRowIndex)} className={prefixCls([blockName, 'table-body-row'])}>\n                  {dateRow.map((dateCell, dateCellIndex) => {\n                    // 若不显示周末，隐藏 day 为 6 或 7 的元素\n                    if (!isShowWeekend && [6, 7].indexOf(dateCell.day) >= 0) return null;\n                    // 其余日期正常显示\n                    const isNow = dateCell.formattedDate === currentDate;\n                    return (\n                      <CalendarCellComp\n                        key={dateCellIndex}\n                        mode={mode}\n                        theme={theme}\n                        cell={cell}\n                        cellData={dateCell}\n                        cellAppend={cellAppend}\n                        fillWithZero={fillWithZero}\n                        isCurrent={dateCell.isCurrent}\n                        isNow={isNow}\n                        isDisabled={dateCell.belongTo !== 0}\n                        createCalendarCell={createCalendarCell}\n                        onCellClick={(event) => clickCell(event, dateCell)}\n                        onCellDoubleClick={(event) => doubleClickCell(event, dateCell)}\n                        onCellRightClick={(event) => rightClickCell(event, dateCell)}\n                      />\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          )}\n          {/* year 模式，输出月份 */}\n          {mode === 'year' && (\n            <tbody className={prefixCls([blockName, 'table-body'])}>\n              {monthList.map((monthRow, monthRowIndex) => (\n                <tr key={String(monthRowIndex)} className={prefixCls([blockName, 'table-body-row'])}>\n                  {monthRow.map((monthCell, monthCellIndex) => {\n                    const isNow = monthCell.formattedDate.startsWith(currentMonth);\n                    return (\n                      <CalendarCellComp\n                        key={monthCellIndex}\n                        mode={mode}\n                        theme={theme}\n                        cell={cell}\n                        cellData={monthCell}\n                        cellAppend={cellAppend}\n                        fillWithZero={fillWithZero}\n                        isCurrent={monthCell.isCurrent}\n                        isNow={isNow}\n                        createCalendarCell={createCalendarCell}\n                        onCellClick={(event) => clickCell(event, monthCell)}\n                        onCellDoubleClick={(event) => doubleClickCell(event, monthCell)}\n                        onCellRightClick={(event) => rightClickCell(event, monthCell)}\n                      />\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          )}\n        </table>\n      </div>\n    </div>\n  );\n});\n\nCalendar.displayName = 'Calendar';\nCalendar.defaultProps = calendarDefaultProps;\n\nexport default Calendar;\n"],"names":["getDefaultControllerConfigData","visible","disabled","mode","radioGroupProps","year","selectProps","popupProps","overlayStyle","width","month","weekend","showWeekendButtonProps","hideWeekendButtonProps","current","currentDayButtonProps","currentMonthButtonProps","Calendar","forwardRef","props","ref","className","style","modeFromProps","valueFromProps","value","firstDayOfWeek","format","range","head","cell","cellAppend","week","theme","controllerConfig","isShowWeekendDefault","preventCellContextmenu","monthProps","yearProps","onControllerChange","noop","onCellClick","onCellDoubleClick","onCellRightClick","onMonthChange","fillWithZero","controllerConfigData","modeFromConfig","yearFromConfig","monthFromConfig","visibleForMode","radioGroupPropsForMode","visibleForYear","selectPropsForYear","visibleForMonth","selectPropsForMonth","visibleForWeekendToggle","visibleForCurrent","useState","setMode","dayjs","setValue","Number","setYear","parseInt","setMonth","isShowWeekend","setIsShowWeekend","useLocaleReceiver","local","t","weekLabelList","split","colHeaderList","useMemo","weekTextArr","Array","isArray","length","list","i","push","day","text","rangeFromTo","v1","v2","isBefore","from","to","controllerOptions","dayJsFilterDate","re","filterDate","toDate","formattedFilterDate","isRangeValid","checkMonthSelectorDisabled","yearIn","monthIn","beginYear","endYear","beginMon","endMon","yearList","monthList2","yearBegin","Math","max","minYear","yearEnd","yearSelectList","monthSelectList","dateList","createDateList","monthList","createMonthList","createCalendarCell","useCallback","cellData","toCurrent","valueIn","now","isValid","React","useImperativeHandle","handleMonthChange","newMonth","String","execCellEvent","event","calendarCell","handleFunc","e","clickCell","formattedDate","doubleClickCell","rightClickCell","preventDefault","useEffect","useLayoutEffect","prefixCls","usePrefixClass","currentDate","currentMonth","createElement","blockName","concat","Select","autoWidth","size","controlSectionSize","options","map","item","label","yearSelection","onChange","selectYear","monthSelection","height","Radio","Group","variant","value2","Button","monthRadio","yearRadio","CheckTag","checked","onClick","hideWeekend","showWeekend","thisMonth","today","key","dateRow","dateRowIndex","dateCell","dateCellIndex","indexOf","isNow","CalendarCellComp","isCurrent","isDisabled","belongTo","monthRow","monthRowIndex","monthCell","monthCellIndex","startsWith","displayName","defaultProps","calendarDefaultProps"],"mappings":"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"}