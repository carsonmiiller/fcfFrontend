{"version":3,"file":"useMenuContext.js","sources":["../../../node_modules/lodash/noop.js","../../../src/menu/hooks/useMenuContext.ts"],"sourcesContent":["/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","import noop from 'lodash/noop';\nimport { useState, ReactNode } from 'react';\nimport { MenuState, SetMenuState, MenuMode } from '../MenuContext';\nimport checkSubMenuChildExpanded from '../_util/checkSubMenuChildExpanded';\nimport { TdMenuProps, TdHeadMenuProps, MenuValue } from '../type';\n\ninterface UseMenuContextProps extends Extract<TdMenuProps, TdHeadMenuProps> {\n  children: ReactNode;\n  mode: MenuMode;\n}\n\nfunction useMenuContext({\n  defaultValue,\n  defaultExpanded,\n  expandMutex,\n  children,\n  onExpand = noop,\n  onChange = noop,\n  value,\n  expanded,\n  collapsed,\n  expandType,\n  theme,\n  mode,\n}: UseMenuContextProps) {\n  const [state, setState] = useState<MenuState>({\n    active: defaultValue,\n    expanded: defaultExpanded,\n  });\n\n  const setStateValue: SetMenuState = (menuState) => setState({ ...state, ...menuState });\n\n  const handleExpandChange = (value: MenuValue, expanded: MenuValue[]) => {\n    let nextExpand = [];\n    const index = expanded.indexOf(value);\n\n    // 已经展开\n    if (index > -1) {\n      // 互斥情况\n      if (expandMutex) {\n        nextExpand = expanded.slice(0, index);\n      } else {\n        nextExpand = expanded.filter((item) => item !== value);\n      }\n    } else if (expandMutex) {\n      // 未展开\n      nextExpand = checkSubMenuChildExpanded(children, expanded, value);\n    } else {\n      nextExpand = [...expanded, value];\n    }\n    onExpand(nextExpand);\n    setState({ expanded: nextExpand });\n  };\n\n  return {\n    value: {\n      onExpand: handleExpandChange,\n      onChange,\n      active: value || state.active,\n      expanded: expanded || state.expanded,\n      collapsed: collapsed || state.collapsed,\n      setState: setStateValue,\n      expandMutex,\n      expandType: collapsed ? 'popup' : expandType,\n      mode,\n      theme,\n    },\n  };\n}\n\nexport default useMenuContext;\n"],"names":["noop","noop_1","useMenuContext","defaultValue","defaultExpanded","expandMutex","children","onExpand","onChange","value","expanded","collapsed","expandType","theme","mode","useState","active","state","setState","setStateValue","menuState","handleExpandChange","value2","expanded2","nextExpand","index","indexOf","slice","filter","item","checkSubMenuChildExpanded"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,SAASA,IAAT,GAAgB;AAEf,CAAA;;AAED,IAAAC,MAAc,GAAGD,IAAjB;;;;;;ACbA,SAASE,cAAT,CAaG,IAAA,EAAA;EAAA,IAZDC,YAYC,QAZDA,YAYC;MAXDC,eAWC,QAXDA,eAWC;MAVDC,WAUC,QAVDA,WAUC;MATDC,QASC,QATDA,QASC;AAAA,MAAA,aAAA,GAAA,IAAA,CARDC,QAQC;MARDA,QAQC,8BARUP,MAQV,GAAA,aAAA;AAAA,MAAA,aAAA,GAAA,IAAA,CAPDQ,QAOC;MAPDA,QAOC,8BAPUR,MAOV,GAAA,aAAA;MANDS,KAMC,QANDA,KAMC;MALDC,QAKC,QALDA,QAKC;MAJDC,SAIC,QAJDA,SAIC;MAHDC,UAGC,QAHDA,UAGC;MAFDC,KAEC,QAFDA,KAEC;MADDC,IACC,QADDA,IACC,CAAA;;AACD,EAAA,IAAA,SAAA,GAA0BC,QAAQ,CAAC;AACjCC,IAAAA,MAAM,EAAEb,YADyB;AAEjCO,IAAAA,QAAQ,EAAEN,eAAAA;AAFuB,GAAD,CAAlC;AAAA,MAAA,UAAA,GAAA,cAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAAOa,KAAP,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,QAAd,GAAA,UAAA,CAAA,CAAA,CAAA,CAAA;;AAIA,EAAA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,SAAD,EAAA;AAAA,IAAA,OAAeF,QAAQ,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAMD,KAAN,CAAA,EAAgBG,SAAhB,CAAvB,CAAA,CAAA;GAAtB,CAAA;;EACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,MAAD,EAASC,SAAT,EAAuB;IAChD,IAAIC,UAAU,GAAG,EAAjB,CAAA;AACA,IAAA,IAAMC,KAAK,GAAGF,SAAS,CAACG,OAAV,CAAkBJ,MAAlB,CAAd,CAAA;;AACA,IAAA,IAAIG,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,MAAA,IAAIpB,WAAJ,EAAiB;QACfmB,UAAU,GAAGD,SAAS,CAACI,KAAV,CAAgB,CAAhB,EAAmBF,KAAnB,CAAb,CAAA;AACD,OAFD,MAEO;AACLD,QAAAA,UAAU,GAAGD,SAAS,CAACK,MAAV,CAAiB,UAACC,IAAD,EAAA;UAAA,OAAUA,IAAI,KAAKP,MAAnB,CAAA;AAAA,SAAjB,CAAb,CAAA;AACD,OAAA;KALH,MAMO,IAAIjB,WAAJ,EAAiB;MACtBmB,UAAU,GAAGM,yBAAyB,CAACxB,QAAD,EAAWiB,SAAX,EAAsBD,MAAtB,CAAtC,CAAA;AACD,KAFM,MAEA;AACLE,MAAAA,UAAU,GAAOD,EAAAA,CAAAA,MAAAA,CAAAA,kBAAAA,CAAAA,SAAP,CAAkBD,EAAAA,CAAAA,MAAlB,CAAV,CAAA,CAAA;AACD,KAAA;;IACDf,QAAQ,CAACiB,UAAD,CAAR,CAAA;AACAN,IAAAA,QAAQ,CAAC;AAAER,MAAAA,QAAQ,EAAEc,UAAAA;AAAZ,KAAD,CAAR,CAAA;GAfF,CAAA;;EAiBA,OAAO;AACLf,IAAAA,KAAK,EAAE;AACLF,MAAAA,QAAQ,EAAEc,kBADL;AAELb,MAAAA,QAAQ,EAARA,QAFK;AAGLQ,MAAAA,MAAM,EAAEP,KAAK,IAAIQ,KAAK,CAACD,MAHlB;AAILN,MAAAA,QAAQ,EAAEA,QAAQ,IAAIO,KAAK,CAACP,QAJvB;AAKLC,MAAAA,SAAS,EAAEA,SAAS,IAAIM,KAAK,CAACN,SALzB;AAMLO,MAAAA,QAAQ,EAAEC,aANL;AAOLd,MAAAA,WAAW,EAAXA,WAPK;AAQLO,MAAAA,UAAU,EAAED,SAAS,GAAG,OAAH,GAAaC,UAR7B;AASLE,MAAAA,IAAI,EAAJA,IATK;AAULD,MAAAA,KAAK,EAALA,KAAAA;AAVK,KAAA;GADT,CAAA;AAcD;;;;"}