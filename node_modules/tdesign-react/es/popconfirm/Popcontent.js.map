{"version":3,"file":"Popcontent.js","sources":["../../src/popconfirm/Popcontent.tsx"],"sourcesContent":["import React from 'react';\nimport isString from 'lodash/isString';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon } from 'tdesign-icons-react';\nimport Button from '../button';\nimport noop from '../_util/noop';\nimport useConfig from '../_util/useConfig';\nimport type { PopconfirmProps } from './Popconfirm';\nimport type { PopconfirmVisibleChangeContext } from './type';\n\nconst Popcontent = (props: PopconfirmProps & { onClose?: (context: PopconfirmVisibleChangeContext) => any }) => {\n  const { content, cancelBtn, confirmBtn, icon, theme, onCancel = noop, onConfirm = noop, onClose = noop } = props;\n\n  const { classPrefix } = useConfig();\n\n  const hideCancel = cancelBtn === null || cancelBtn === undefined;\n  const hideConfirm = confirmBtn === null || confirmBtn === undefined;\n\n  function renderIcon() {\n    let color = '#0052D9';\n    // theme 为 default 时不展示图标，否则根据 theme 的值设置图标颜色样式\n    const defaultIcon = <InfoCircleFilledIcon />;\n\n    switch (theme) {\n      case 'warning': // 黄色\n        color = '#FFAA00';\n        break;\n      case 'danger':\n        color = '#FF3E00'; // 红色\n        break;\n    }\n\n    let iconComponent = null;\n\n    // icon 是自定义组件实例，优先级最高\n    if (React.isValidElement(icon)) {\n      iconComponent = React.cloneElement(icon, {\n        style: { color },\n        ...icon.props,\n      });\n      // icon 是自定义组件类型\n    } else if (typeof icon === 'function') {\n      iconComponent = icon();\n    } else if (defaultIcon) {\n      iconComponent = React.cloneElement(defaultIcon, {\n        style: { color },\n      });\n    }\n    return iconComponent;\n  }\n\n  function renderCancel() {\n    if (React.isValidElement(cancelBtn)) {\n      return React.cloneElement(cancelBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'cancel' });\n          cancelBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideCancel) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        variant=\"outline\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'cancel' });\n          onCancel({ e });\n        }}\n      >\n        {isString(cancelBtn) && cancelBtn}\n      </Button>\n    );\n  }\n\n  function renderConfirm() {\n    if (React.isValidElement(confirmBtn)) {\n      return React.cloneElement(confirmBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'confirm' });\n          confirmBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideConfirm) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"primary\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'confirm' });\n          onConfirm({ e });\n        }}\n      >\n        {isString(confirmBtn) && confirmBtn}\n      </Button>\n    );\n  }\n\n  return (\n    <div className={`${classPrefix}-popconfirm__content`}>\n      <div className={`${classPrefix}-popconfirm__body`}>\n        {renderIcon()}\n        <div className={`${classPrefix}-popconfirm__inner`}>{content}</div>\n      </div>\n      <div className={`${classPrefix}-popconfirm__buttons`}>\n        <span className={classNames(`${classPrefix}-popconfirm__cancel`)}>{renderCancel()}</span>\n        <span className={classNames(`${classPrefix}-popconfirm__confirm`)}>{renderConfirm()}</span>\n      </div>\n    </div>\n  );\n};\n\nPopcontent.displayName = 'Popcontent';\n\nexport default Popcontent;\n"],"names":["Popcontent","props","content","cancelBtn","confirmBtn","icon","theme","onCancel","noop","onConfirm","onClose","useConfig","classPrefix","hideCancel","hideConfirm","renderIcon","color","defaultIcon","React","createElement","InfoCircleFilledIcon","iconComponent","isValidElement","cloneElement","style","renderCancel","onClick","e","trigger","Button","size","variant","isString","renderConfirm","className","classNames","displayName"],"mappings":"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"}