{"version":3,"file":"ColorPicker.js","sources":["../../src/color-picker/ColorPicker.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Popup, PopupProps } from '../popup';\nimport { ColorPickerProps, TdColorContext } from './interface';\nimport useClassname from './hooks/useClassname';\nimport useControlled from '../hooks/useControlled';\nimport ColorTrigger from './components/trigger';\nimport ColorPanel from './components/panel/index';\nimport useClickOutside from '../_util/useClickOutside';\nimport { colorPickerDefaultProps } from './defaultProps';\n\nconst ColorPicker: React.FC<ColorPickerProps> = (props) => {\n  const baseClassName = useClassname();\n  const { popupProps, disabled, inputProps, onChange, colorModes, ...rest } = props;\n  const { overlayClassName, overlayStyle = {}, ...restPopupProps } = popupProps || {};\n\n  const [visible, setVisible] = useState(false);\n  const [innerValue, setInnerValue] = useControlled(props, 'value', onChange);\n  const triggerRef = useRef<HTMLDivElement>();\n  const colorPanelRef = useRef();\n\n  const popProps: PopupProps = {\n    placement: 'bottom-left',\n    expandAnimation: true,\n    trigger: 'click',\n    visible,\n    ...restPopupProps,\n    overlayClassName: [baseClassName, overlayClassName],\n    overlayStyle: {\n      padding: 0,\n      ...overlayStyle,\n    },\n  };\n\n  useClickOutside(\n    [triggerRef, colorPanelRef],\n    () => {\n      setVisible(false);\n    },\n    true,\n  );\n\n  return (\n    <Popup\n      {...popProps}\n      onVisibleChange={(v) => setVisible(v)}\n      content={\n        !disabled && (\n          <ColorPanel\n            {...rest}\n            disabled={disabled}\n            value={innerValue}\n            colorModes={colorModes}\n            togglePopup={setVisible}\n            onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n            ref={colorPanelRef}\n          />\n        )\n      }\n    >\n      <div className={`${baseClassName}__trigger`} ref={triggerRef}>\n        <ColorTrigger color={innerValue} disabled={disabled} inputProps={inputProps} onTriggerChange={setInnerValue} />\n      </div>\n    </Popup>\n  );\n};\n\nColorPicker.displayName = 'ColorPicker';\nColorPicker.defaultProps = colorPickerDefaultProps;\n\nexport default React.memo(ColorPicker);\n"],"names":["ColorPicker","props","baseClassName","useClassname","popupProps","disabled","inputProps","onChange","colorModes","rest","overlayClassName","overlayStyle","restPopupProps","useState","visible","setVisible","useControlled","innerValue","setInnerValue","triggerRef","useRef","colorPanelRef","popProps","placement","expandAnimation","trigger","padding","useClickOutside","React","createElement","Popup","onVisibleChange","v","content","ColorPanel","value","togglePopup","context","ref","className","ColorTrigger","color","onTriggerChange","displayName","defaultProps","colorPickerDefaultProps","memo"],"mappings":"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"}