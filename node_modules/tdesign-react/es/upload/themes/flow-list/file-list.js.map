{"version":3,"file":"file-list.js","sources":["../../../../src/upload/themes/flow-list/file-list.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { CheckCircleFilledIcon, ErrorCircleFilledIcon, TimeFilledIcon } from 'tdesign-icons-react';\nimport { abridgeName, returnFileSize } from '../../util';\nimport useConfig from '../../../_util/useConfig';\nimport { useLocaleReceiver } from '../../../locale/LocalReceiver';\nimport Loading from '../../../loading';\nimport type { CommonListProps, FlowListProps } from './index';\nimport type { UploadFile } from '../../type';\n\ntype FileListProps = CommonListProps & Pick<FlowListProps, 'showUploadProgress' | 'remove'>;\n\nconst FileList = (props: FileListProps) => {\n  const { listFiles, showInitial, renderDragger, showUploadProgress, remove } = props;\n  const { classPrefix: prefix } = useConfig();\n  const [locale, t] = useLocaleReceiver('upload');\n  const UPLOAD_NAME = `${prefix}-upload`;\n  const { progress: progressText, file: infoText, triggerUploadText } = locale;\n\n  const renderStatus = (file: UploadFile) => {\n    const STATUS_MAP = {\n      success: {\n        icon: <CheckCircleFilledIcon />,\n        text: t(progressText.successText),\n      },\n      fail: {\n        icon: <ErrorCircleFilledIcon />,\n        text: t(progressText.failText),\n      },\n      progress: {\n        icon: <Loading />,\n        text: `${t(progressText.uploadingText)} ${Math.min(file.percent, 99)}%`,\n      },\n      waiting: {\n        icon: <TimeFilledIcon />,\n        text: t(progressText.waitingText),\n      },\n    };\n\n    if (file.status === 'progress' && !showUploadProgress) return null;\n    return (\n      <div className={`${UPLOAD_NAME}__flow-status`}>\n        {STATUS_MAP[file.status].icon}\n        <span>{STATUS_MAP[file.status].text}</span>\n      </div>\n    );\n  };\n\n  return (\n    <table className={`${UPLOAD_NAME}__flow-table`}>\n      <thead>\n        <tr>\n          <th>{t(infoText.fileNameText)}</th>\n          <th>{t(infoText.fileSizeText)}</th>\n          <th>{t(infoText.fileStatusText)}</th>\n          <th>{t(infoText.fileOperationText)}</th>\n        </tr>\n      </thead>\n      <tbody>\n        {showInitial && (\n          <tr>\n            <td colSpan={4}>{renderDragger()}</td>\n          </tr>\n        )}\n        {listFiles.map((file, index) => (\n          <tr key={index}>\n            <td>{abridgeName(file.name, 7, 10)}</td>\n            <td>{returnFileSize(file.size)}</td>\n            <td>{renderStatus(file)}</td>\n            <td>\n              <span\n                className={`${UPLOAD_NAME}__flow-button`}\n                onClick={(e: MouseEvent<HTMLElement>) => remove({ e, index, file })}\n              >\n                {t(triggerUploadText.delete)}\n              </span>\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default FileList;\n"],"names":["FileList","props","listFiles","showInitial","renderDragger","showUploadProgress","remove","useConfig","prefix","classPrefix","useLocaleReceiver","locale","t","UPLOAD_NAME","progressText","progress","infoText","file","triggerUploadText","renderStatus","STATUS_MAP","success","icon","React","createElement","CheckCircleFilledIcon","text","successText","fail","ErrorCircleFilledIcon","failText","Loading","uploadingText","Math","min","percent","waiting","TimeFilledIcon","waitingText","status","className","fileNameText","fileSizeText","fileStatusText","fileOperationText","colSpan","map","index","key","abridgeName","name","returnFileSize","size","onClick","e"],"mappings":"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"}