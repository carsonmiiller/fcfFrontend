{"version":3,"file":"Button.js","sources":["../../src/button/Button.tsx"],"sourcesContent":["import React, { forwardRef, useRef } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../_util/useConfig';\nimport useRipple from '../_util/useRipple';\nimport Loading from '../loading';\nimport { TdButtonProps } from './type';\nimport { buttonDefaultProps } from './defaultProps';\n\n/**\n * 除表格中列出的属性外，支持透传原生 `<button>` 标签支持的属性。\n */\nexport interface ButtonProps extends TdButtonProps, React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * 按钮组件\n */\nconst Button = forwardRef(\n  (\n    {\n      type,\n      theme,\n      variant,\n      icon,\n      disabled,\n      loading,\n      size,\n      block,\n      ghost,\n      shape,\n      children,\n      content,\n      className,\n      onClick,\n      ...buttonProps\n    }: ButtonProps,\n    ref: React.RefObject<HTMLButtonElement>,\n  ) => {\n    const { classPrefix } = useConfig();\n\n    const btnRef = useRef();\n    useRipple(ref || btnRef);\n\n    const hasChildren = typeof children !== 'undefined';\n    const hasContent = typeof content !== 'undefined';\n    let childrenNode = children;\n\n    if (!hasChildren && hasContent) {\n      childrenNode = content;\n    }\n\n    let iconNode = icon;\n    if (loading) iconNode = <Loading loading={loading} inheritColor={true} />;\n\n    let renderTheme = theme;\n\n    if (!theme) {\n      if (variant === 'base') {\n        renderTheme = 'primary';\n      } else {\n        renderTheme = 'default';\n      }\n    }\n\n    return (\n      <button\n        {...buttonProps}\n        ref={ref || btnRef}\n        type={type}\n        className={classNames(\n          className,\n          [\n            `${classPrefix}-button`,\n            `${classPrefix}-button--theme-${renderTheme}`,\n            `${classPrefix}-button--variant-${variant}`,\n          ],\n          {\n            [`${classPrefix}-button--shape-${shape}`]: shape !== 'rectangle',\n            [`${classPrefix}-button--ghost`]: ghost,\n            [`${classPrefix}-is-loading`]: loading,\n            [`${classPrefix}-is-disabled`]: disabled || loading,\n            [`${classPrefix}-size-s`]: size === 'small',\n            [`${classPrefix}-size-l`]: size === 'large',\n            [`${classPrefix}-size-full-width`]: block,\n          },\n        )}\n        onClick={!disabled && !loading ? onClick : undefined}\n        disabled={disabled || loading}\n      >\n        {iconNode ? (\n          <>\n            {iconNode}\n            {(hasChildren || hasContent) && <span className={`${classPrefix}-button__text`}>{childrenNode}</span>}\n          </>\n        ) : (\n          <span className={`${classPrefix}-button__text`}>{childrenNode}</span>\n        )}\n      </button>\n    );\n  },\n);\n\nButton.displayName = 'Button';\nButton.defaultProps = buttonDefaultProps;\n\nexport default Button;\n"],"names":["Button","forwardRef","ref","type","theme","variant","icon","disabled","loading","size","block","ghost","shape","children","content","className","onClick","buttonProps","useConfig","classPrefix","btnRef","useRef","useRipple","hasChildren","hasContent","childrenNode","iconNode","React","createElement","Loading","inheritColor","renderTheme","classNames","Fragment","displayName","defaultProps","buttonDefaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAMA,MAAM,gBAAGC,UAAU,CAAC,UAAA,IAAA,EAgBvBC,GAhBuB,EAgBf;AAAA,EAAA,IAAA,WAAA,CAAA;;EAAA,IAfTC,IAeS,QAfTA,IAeS;MAdTC,KAcS,QAdTA,KAcS;MAbTC,OAaS,QAbTA,OAaS;MAZTC,IAYS,QAZTA,IAYS;MAXTC,QAWS,QAXTA,QAWS;MAVTC,OAUS,QAVTA,OAUS;MATTC,IASS,QATTA,IASS;MARTC,KAQS,QARTA,KAQS;MAPTC,KAOS,QAPTA,KAOS;MANTC,KAMS,QANTA,KAMS;MALTC,QAKS,QALTA,QAKS;MAJTC,OAIS,QAJTA,OAIS;MAHTC,SAGS,QAHTA,SAGS;MAFTC,OAES,QAFTA,OAES;AAAA,MADNC,WACM,GAAA,wBAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA;;AACT,EAAA,IAAA,UAAA,GAAwBC,SAAS,EAAjC;MAAQC,WAAR,cAAQA,WAAR,CAAA;;EACA,IAAMC,MAAM,GAAGC,MAAM,EAArB,CAAA;AACAC,EAAAA,SAAS,CAACpB,GAAG,IAAIkB,MAAR,CAAT,CAAA;AACA,EAAA,IAAMG,WAAW,GAAG,OAAOV,QAAP,KAAoB,WAAxC,CAAA;AACA,EAAA,IAAMW,UAAU,GAAG,OAAOV,OAAP,KAAmB,WAAtC,CAAA;EACA,IAAIW,YAAY,GAAGZ,QAAnB,CAAA;;AACA,EAAA,IAAI,CAACU,WAAD,IAAgBC,UAApB,EAAgC;AAC9BC,IAAAA,YAAY,GAAGX,OAAf,CAAA;AACD,GAAA;;EACD,IAAIY,QAAQ,GAAGpB,IAAf,CAAA;EACA,IAAIE,OAAJ,EACEkB,QAAQ,kBAAmBC,KAAK,CAACC,aAAN,CAAoBC,OAApB,EAA6B;AACtDrB,IAAAA,OAAO,EAAPA,OADsD;AAEtDsB,IAAAA,YAAY,EAAE,IAAA;AAFwC,GAA7B,CAA3B,CAAA;EAIF,IAAIC,WAAW,GAAG3B,KAAlB,CAAA;;EACA,IAAI,CAACA,KAAL,EAAY;IACV,IAAIC,OAAO,KAAK,MAAhB,EAAwB;AACtB0B,MAAAA,WAAW,GAAG,SAAd,CAAA;AACD,KAFD,MAEO;AACLA,MAAAA,WAAW,GAAG,SAAd,CAAA;AACD,KAAA;AACF,GAAA;;AACD,EAAA,sBAAuBJ,KAAK,CAACC,aAAN,CAAoB,QAApB,kCAClBX,WADkB,CAAA,EAAA,EAAA,EAAA;IAErBf,GAAG,EAAEA,GAAG,IAAIkB,MAFS;AAGrBjB,IAAAA,IAAI,EAAJA,IAHqB;IAIrBY,SAAS,EAAEiB,UAAU,CAACjB,SAAD,EAAY,WAC5BI,WAD4B,EAAA,SAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAE5BA,WAF4B,EAAA,iBAAA,CAAA,CAAA,MAAA,CAECY,WAFD,CAAA,EAAA,EAAA,CAAA,MAAA,CAG5BZ,WAH4B,EAGGd,mBAAAA,CAAAA,CAAAA,MAAAA,CAAAA,OAHH,CAAZ,CAAA,GAAA,WAAA,GAAA,EAAA,EAAA,eAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAKfc,WALe,EAAA,iBAAA,CAAA,CAAA,MAAA,CAKcP,KALd,CAAA,EAKwBA,KAAK,KAAK,WALlC,CAAA,EAAA,eAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAMfO,WANe,EAAA,gBAAA,CAAA,EAMeR,KANf,CAOfQ,EAAAA,eAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAPe,EAOYX,aAAAA,CAAAA,EAAAA,OAPZ,CAQfW,EAAAA,eAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WARe,mBAQaZ,QAAQ,IAAIC,OARzB,CAAA,EAAA,eAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CASfW,WATe,EAAA,SAAA,CAAA,EASQV,IAAI,KAAK,OATjB,CAUfU,EAAAA,eAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAVe,EAUQV,SAAAA,CAAAA,EAAAA,IAAI,KAAK,OAVjB,CAWfU,EAAAA,eAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAXe,EAWiBT,kBAAAA,CAAAA,EAAAA,KAXjB,CAJA,EAAA,WAAA,EAAA;IAiBrBM,OAAO,EAAE,CAACT,QAAD,IAAa,CAACC,OAAd,GAAwBQ,OAAxB,GAAkC,KAAK,CAjB3B;IAkBrBT,QAAQ,EAAEA,QAAQ,IAAIC,OAAAA;GACrBkB,CAAAA,EAAAA,QAAQ,kBAAmBC,KAAK,CAACC,aAAN,CAAoBD,KAAK,CAACM,QAA1B,EAAoC,IAApC,EAA0CP,QAA1C,EAAoD,CAACH,WAAW,IAAIC,UAAhB,oBAA+CG,KAAK,CAACC,aAAN,CAAoB,MAApB,EAA4B;AAC3Jb,IAAAA,SAAS,YAAKI,WAAL,EAAA,eAAA,CAAA;GADsH,EAE9HM,YAF8H,CAAnG,CAAnB,kBAEyBE,KAAK,CAACC,aAAN,CAAoB,MAApB,EAA4B;AAC9Db,IAAAA,SAAS,YAAKI,WAAL,EAAA,eAAA,CAAA;GADyB,EAEjCM,YAFiC,CArBb,CAAvB,CAAA;AAwBD,CAhEwB,EAAzB;AAiEAzB,MAAM,CAACkC,WAAP,GAAqB,QAArB,CAAA;AACAlC,MAAM,CAACmC,YAAP,GAAsBC,kBAAtB;;;;"}