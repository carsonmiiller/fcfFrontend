{"version":3,"file":"StepItem.js","sources":["../../src/steps/StepItem.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport { CloseIcon, CheckIcon } from 'tdesign-icons-react';\nimport useConfig from '../_util/useConfig';\nimport { TdStepItemProps } from './type';\nimport { StyledProps } from '../common';\nimport StepsContext from './StepsContext';\nimport { stepItemDefaultProps } from './defaultProps';\n\nexport interface StepItemProps extends TdStepItemProps, StyledProps {\n  index?: number;\n  children?: React.ReactNode;\n}\n\nconst StepItem = (props: StepItemProps) => {\n  const { index, icon, title, content, value, children, style, status } = props;\n\n  const { current, theme, onChange, readonly } = useContext(StepsContext);\n  const { classPrefix, steps: globalStepsConfig } = useConfig();\n\n  const canClick = status !== 'process' && !readonly;\n\n  // 步骤条每一步展示的图标\n  function renderIcon() {\n    if (!icon) return null;\n\n    const iconCls = `${classPrefix}-steps-item__icon--number`;\n\n    if (icon && icon !== true) return <span className={iconCls}>{icon}</span>;\n\n    if (theme !== 'default') return null;\n\n    if (status === 'error') return <span className={iconCls}>{globalStepsConfig.errorIcon || <CloseIcon />}</span>;\n\n    if (status === 'finish')\n      return (\n        <span className={iconCls}>\n          <CheckIcon />\n        </span>\n      );\n\n    return <span className={iconCls}>{Number(index) + 1}</span>;\n  }\n\n  function onStepClick(e: React.MouseEvent<HTMLDivElement>) {\n    if (!canClick) return;\n    const currentValue = value ?? index;\n    onChange(currentValue, current, { e });\n  }\n\n  return (\n    <div\n      style={style}\n      className={classNames({\n        [`${classPrefix}-steps-item`]: true,\n        [`${classPrefix}-steps-item--wait`]: status === 'default',\n        [`${classPrefix}-steps-item--error`]: status === 'error',\n        [`${classPrefix}-steps-item--finish`]: status === 'finish',\n        [`${classPrefix}-steps-item--process`]: status === 'process',\n        [props.className]: !!props.className,\n      })}\n    >\n      <div\n        className={classNames(`${classPrefix}-steps-item__inner`, {\n          [`${classPrefix}-steps-item--clickable`]: canClick,\n        })}\n        onClick={onStepClick}\n      >\n        <div\n          className={classNames(`${classPrefix}-steps-item__icon`, {\n            [`${classPrefix}-steps-item-${status}`]: status,\n          })}\n        >\n          {renderIcon()}\n        </div>\n        <div className={`${classPrefix}-steps-item__content`}>\n          <div className={`${classPrefix}-steps-item__title`}>{title}</div>\n          <div className={`${classPrefix}-steps-item__description`}>{content}</div>\n          {children ? <div className={`${classPrefix}-steps-item__extra`}>{children}</div> : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nStepItem.displayName = 'StepItem';\nStepItem.defaultProps = stepItemDefaultProps;\n\nexport default StepItem;\n"],"names":["StepItem","props","index","icon","title","content","value","children","style","status","useContext","StepsContext","current","theme","onChange","readonly","useConfig","classPrefix","globalStepsConfig","steps","canClick","renderIcon","iconCls","React","createElement","className","errorIcon","CloseIcon","CheckIcon","Number","onStepClick","e","currentValue","classNames","onClick","displayName","defaultProps","stepItemDefaultProps"],"mappings":"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"}