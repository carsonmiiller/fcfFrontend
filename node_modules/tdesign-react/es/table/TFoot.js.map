{"version":3,"file":"TFoot.js","sources":["../../src/table/TFoot.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport classNames from 'classnames';\nimport get from 'lodash/get';\nimport { BaseTableCellParams, TableRowData, TdBaseTableProps } from './type';\nimport { formatRowAttributes, formatRowClassNames } from './utils';\nimport { getColumnFixedStyles, RowAndColFixedPosition } from './hooks/useFixed';\nimport useClassName from './hooks/useClassName';\n\nexport interface TFootProps {\n  rowKey: string;\n  // 是否固定表头\n  isFixedHeader: boolean;\n  // 固定列 left/right 具体值\n  rowAndColFixedPosition: RowAndColFixedPosition;\n  footData: TdBaseTableProps['footData'];\n  columns: TdBaseTableProps['columns'];\n  rowAttributes: TdBaseTableProps['rowAttributes'];\n  rowClassName: TdBaseTableProps['rowClassName'];\n}\n\nexport default function TFoot(props: TFootProps) {\n  const { footData, columns } = props;\n  const tfooterRef = useRef();\n  const classnames = useClassName();\n  const renderTFootCell = (p: BaseTableCellParams<TableRowData>) => {\n    const { col, row } = p;\n    if (isFunction(col.foot)) {\n      return col.foot(p);\n    }\n    return col.foot || get(row, col.colKey);\n  };\n\n  if (!footData || !footData.length || !columns) return null;\n  const theadClasses = [\n    classnames.tableFooterClasses.footer,\n    { [classnames.tableFooterClasses.fixed]: props.isFixedHeader },\n  ];\n  return (\n    <tfoot ref={tfooterRef} className={classNames(theadClasses)}>\n      {footData.map((row, rowIndex) => {\n        const trAttributes = formatRowAttributes(props.rowAttributes, { row, rowIndex, type: 'foot' });\n        // 自定义行类名\n        const customClasses = formatRowClassNames(\n          props.rowClassName,\n          { row, rowIndex, type: 'foot' },\n          props.rowKey || 'id',\n        );\n        return (\n          <tr key={rowIndex} {...trAttributes} className={classNames(customClasses)}>\n            {columns.map((col, colIndex) => {\n              const tdStyles = getColumnFixedStyles(\n                col,\n                colIndex,\n                props.rowAndColFixedPosition,\n                classnames.tableColFixedClasses,\n              );\n              return (\n                <td key={col.colKey} className={classNames(tdStyles.classes)} style={tdStyles.style}>\n                  {renderTFootCell({\n                    row,\n                    rowIndex,\n                    col,\n                    colIndex,\n                  })}\n                </td>\n              );\n            })}\n          </tr>\n        );\n      })}\n    </tfoot>\n  );\n}\n"],"names":["TFoot","props","footData","columns","tfooterRef","useRef","classnames","useClassName","renderTFootCell","p","col","row","isFunction","foot","get","colKey","length","theadClasses","tableFooterClasses","footer","fixed","isFixedHeader","React","createElement","ref","className","classNames","map","rowIndex","trAttributes","formatRowAttributes","rowAttributes","type","customClasses","formatRowClassNames","rowClassName","rowKey","key","colIndex","tdStyles","getColumnFixedStyles","rowAndColFixedPosition","tableColFixedClasses","classes","style"],"mappings":"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"}