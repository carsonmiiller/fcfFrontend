{"version":3,"file":"swatches.js","sources":["../../../../src/color-picker/components/panel/swatches.tsx"],"sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { DeleteIcon, AddIcon } from 'tdesign-icons-react';\nimport Color from '../../../_common/js/color-picker/color';\nimport { TdColorBaseProps } from '../../interface';\nimport useCommonClassName from '../../../_util/useCommonClassName';\n\nexport interface TdColorSwathcesProps extends TdColorBaseProps {\n  colors?: string[];\n  title?: String;\n  editable?: Boolean;\n  onSetColor?: Function;\n  handleAddColor?: Function;\n}\n\nconst Swatches = (props: TdColorSwathcesProps) => {\n  const {\n    baseClassName,\n    colors = [],\n    title = '系统色彩',\n    editable = false,\n    onChange,\n    disabled,\n    onSetColor,\n    handleAddColor,\n  } = props;\n  const swatchesClass = `${baseClassName}__swatches`;\n  const { STATUS: statusClassNames } = useCommonClassName();\n  const isEqualCurrentColor = (color: string) => Color.compare(color, props.color.css);\n\n  // 移除颜色\n  const selectedColorIndex = () => colors.findIndex((color) => isEqualCurrentColor(color));\n  const handleRemoveColor = () => {\n    const selectedIndex = selectedColorIndex();\n    if (selectedIndex > -1) {\n      const newColors = colors.filter((item, index) => index !== selectedIndex);\n      onChange(newColors);\n    }\n  };\n\n  const handleClick = (color: string) => onSetColor(color);\n\n  return (\n    <div className={swatchesClass}>\n      <h3 className={`${swatchesClass}--title`}>\n        <span>{title}</span>\n        {editable && (\n          <div className={`${swatchesClass}--actions`}>\n            <span role=\"button\" className={`${baseClassName}__icon`} onClick={() => handleAddColor()}>\n              <AddIcon />\n            </span>\n            {colors.length > 0 ? (\n              <span role=\"button\" className={`${baseClassName}__icon`} onClick={() => handleRemoveColor()}>\n                <DeleteIcon />\n              </span>\n            ) : null}\n          </div>\n        )}\n      </h3>\n      <ul className={classnames(`${swatchesClass}--items`, 'narrow-scrollbar')}>\n        {colors.map((color) => (\n          <li\n            className={classnames(\n              `${swatchesClass}--item`,\n              isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n            )}\n            key={color}\n            onClick={() => {\n              if (disabled) {\n                return;\n              }\n              handleClick(color);\n            }}\n          >\n            <div className={classnames(`${swatchesClass}--item__color`, `${baseClassName}--bg-alpha`)}>\n              <span\n                className={`${swatchesClass}--item__inner`}\n                style={{\n                  background: color,\n                }}\n              ></span>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default React.memo(Swatches);\n"],"names":["Swatches","props","baseClassName","colors","title","editable","onChange","disabled","onSetColor","handleAddColor","swatchesClass","useCommonClassName","statusClassNames","STATUS","isEqualCurrentColor","color","Color","compare","css","selectedColorIndex","findIndex","handleRemoveColor","selectedIndex","newColors","filter","item","index","handleClick","React","createElement","className","role","onClick","AddIcon","length","DeleteIcon","classnames","map","active","key","style","background","memo"],"mappings":"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"}