{"version":3,"file":"plugin.js","sources":["../../src/loading/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Loading, { LoadingProps } from './Loading';\nimport { LoadingInstance, TdLoadingProps } from './type';\n\nfunction createContainer(attach?: TdLoadingProps['attach']) {\n  if (typeof attach === 'string') return document.querySelector(attach);\n  if (typeof attach === 'function') return attach();\n  return document.body;\n}\n\nexport type LoadingPluginMethod = (options: boolean | LoadingProps) => LoadingInstance;\n\n// loading plugin形式\nexport const LoadingPlugin: LoadingPluginMethod = (options) => {\n  if (options === false) return { hide: () => null };\n\n  const props = typeof options === 'boolean' ? {} : options;\n  const { attach } = props;\n  const container = createContainer(attach);\n  const div = document.createElement('div');\n  div.setAttribute('style', 'width: 100%; height: 100%; position: absolute; top: 0;');\n\n  const defaultProps = {\n    loading: true,\n    attach: null,\n    fullscreen: !attach,\n    showOverlay: !!attach,\n  };\n\n  ReactDOM.render(<Loading {...defaultProps} {...props} attach={null}></Loading>, div);\n\n  container.appendChild(div);\n\n  return {\n    hide: () => {\n      ReactDOM.unmountComponentAtNode(div);\n      div.remove();\n    },\n  };\n};\n"],"names":["createContainer","attach","document","querySelector","body","LoadingPlugin","options","hide","props","container","div","createElement","setAttribute","defaultProps","loading","fullscreen","showOverlay","ReactDOM","render","React","Loading","appendChild","unmountComponentAtNode","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAASA,eAAT,CAAyBC,MAAzB,EAAiC;EAC/B,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EACE,OAAOC,QAAQ,CAACC,aAAT,CAAuBF,MAAvB,CAAP,CAAA;AACF,EAAA,IAAI,OAAOA,MAAP,KAAkB,UAAtB,EACE,OAAOA,MAAM,EAAb,CAAA;EACF,OAAOC,QAAQ,CAACE,IAAhB,CAAA;AACD,CAAA;;IACYC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAa;AACxC,EAAA,IAAIA,OAAO,KAAK,KAAhB,EACE,OAAO;AAAEC,IAAAA,IAAI,EAAE,SAAA,IAAA,GAAA;AAAA,MAAA,OAAM,IAAN,CAAA;AAAA,KAAA;GAAf,CAAA;EACF,IAAMC,KAAK,GAAG,OAAOF,OAAP,KAAmB,SAAnB,GAA+B,EAA/B,GAAoCA,OAAlD,CAAA;AACA,EAAA,IAAQL,MAAR,GAAmBO,KAAnB,CAAQP,MAAR,CAAA;AACA,EAAA,IAAMQ,SAAS,GAAGT,eAAe,CAACC,MAAD,CAAjC,CAAA;AACA,EAAA,IAAMS,GAAG,GAAGR,QAAQ,CAACS,aAAT,CAAuB,KAAvB,CAAZ,CAAA;AACAD,EAAAA,GAAG,CAACE,YAAJ,CAAiB,OAAjB,EAA0B,wDAA1B,CAAA,CAAA;AACA,EAAA,IAAMC,YAAY,GAAG;AACnBC,IAAAA,OAAO,EAAE,IADU;AAEnBb,IAAAA,MAAM,EAAE,IAFW;IAGnBc,UAAU,EAAE,CAACd,MAHM;IAInBe,WAAW,EAAE,CAAC,CAACf,MAAAA;GAJjB,CAAA;AAMAgB,EAAAA,4BAAQ,CAACC,MAAT,iBAAgCC,yBAAK,CAACR,aAAN,CAAoBS,0BAApB,EAAA,aAAA,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAC3BP,YAD2B,CAAA,EAE3BL,KAF2B,CAAA,EAAA,EAAA,EAAA;AAG9BP,IAAAA,MAAM,EAAE,IAAA;AAHsB,GAAA,CAAA,CAAhC,EAIIS,GAJJ,CAAA,CAAA;EAKAD,SAAS,CAACY,WAAV,CAAsBX,GAAtB,CAAA,CAAA;EACA,OAAO;AACLH,IAAAA,IAAI,EAAE,SAAM,IAAA,GAAA;MACVU,4BAAQ,CAACK,sBAAT,CAAgCZ,GAAhC,CAAA,CAAA;AACAA,MAAAA,GAAG,CAACa,MAAJ,EAAA,CAAA;AACD,KAAA;GAJH,CAAA;AAMD;;;;"}