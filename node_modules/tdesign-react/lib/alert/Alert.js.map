{"version":3,"file":"Alert.js","sources":["../../src/alert/Alert.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon, CloseIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-react';\nimport useConfig from '../_util/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { TdAlertProps } from './type';\nimport { StyledProps } from '../common';\nimport { alertDefaultProps } from './defaultProps';\n\nexport interface AlertProps extends TdAlertProps, StyledProps {}\n\nconst Alert = forwardRef((props: AlertProps, ref: React.Ref<HTMLDivElement>) => {\n  const { message, title, operation, theme, icon, close, maxLine, onClose, className, ...alertProps } = props;\n\n  const [closed, setClosed] = React.useState(false);\n  const [collapsed, setCollapsed] = React.useState(false);\n  const { classPrefix } = useConfig();\n  const [local, t] = useLocaleReceiver('alert');\n\n  const iconMap = {\n    success: CheckCircleFilledIcon,\n    info: InfoCircleFilledIcon,\n    error: ErrorCircleFilledIcon,\n    warning: ErrorCircleFilledIcon,\n  };\n\n  const handleClose = (e: React.MouseEvent<HTMLDivElement>) => {\n    setClosed(true);\n    onClose?.({ e });\n  };\n\n  const handleCollapse = () => {\n    setCollapsed(!collapsed);\n  };\n\n  const renderIconNode = () => {\n    if (React.isValidElement(icon)) {\n      return React.cloneElement(icon as React.ReactElement, {\n        className: classNames({\n          [icon.props.className]: icon.props.className,\n        }),\n      });\n    }\n    return React.createElement(iconMap[theme] || iconMap.info);\n  };\n\n  const renderMessage = () => {\n    if (+maxLine > 0 && Array.isArray(message)) {\n      return (\n        <div className={`${classPrefix}-alert__description`}>\n          {message.map((item, index) => {\n            if (!collapsed) {\n              if (index < maxLine) {\n                return <div key={index}>{item}</div>;\n              }\n            } else {\n              return <div key={index}>{item}</div>;\n            }\n            return true;\n          })}\n          {+maxLine > 0 ? (\n            <div className={`${classPrefix}-alert__collapse`} onClick={handleCollapse}>\n              {!collapsed ? t(local.expandText) : t(local.collapseText)}\n            </div>\n          ) : null}\n        </div>\n      );\n    }\n    return <div className={`${classPrefix}-alert__description`}>{message}</div>;\n  };\n\n  const renderClose = () => (\n    <div className={`${classPrefix}-alert__close`} onClick={handleClose}>\n      {typeof close === 'boolean' ? <CloseIcon /> : close}\n    </div>\n  );\n\n  return closed ? null : (\n    <div\n      ref={ref}\n      className={classNames(`${classPrefix}-alert`, `${classPrefix}-alert--${theme}`, className)}\n      {...alertProps}\n    >\n      <div className={`${classPrefix}-alert__icon`}>{renderIconNode()}</div>\n      <div className={`${classPrefix}-alert__content`}>\n        {title ? <div className={`${classPrefix}-alert__title`}>{title}</div> : null}\n        <div className={`${classPrefix}-alert__message`}>\n          {renderMessage()}\n          {operation ? <div className={`${classPrefix}-alert__operation`}>{operation}</div> : null}\n        </div>\n      </div>\n      {close ? renderClose() : null}\n    </div>\n  );\n});\n\nAlert.displayName = 'Alert';\nAlert.defaultProps = alertDefaultProps;\n\nexport default Alert;\n"],"names":["Alert","forwardRef","props","ref","message","title","operation","theme","icon","close","maxLine","onClose","className","alertProps","React","useState","_slicedToArray","closed","setClosed","collapsed","setCollapsed","useConfig","classPrefix","useLocaleReceiver","local","t","iconMap","success","CheckCircleFilledIcon","info","InfoCircleFilledIcon","error","ErrorCircleFilledIcon","warning","handleClose","e","handleCollapse","renderIconNode","isValidElement","cloneElement","classNames","createElement","renderMessage","Array","isArray","map","item","index","key","onClick","expandText","collapseText","renderClose","CloseIcon","displayName","defaultProps","alertDefaultProps"],"mappings":"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"}