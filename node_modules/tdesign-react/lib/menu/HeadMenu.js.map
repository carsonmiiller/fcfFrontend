{"version":3,"file":"HeadMenu.js","sources":["../../src/menu/HeadMenu.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport isObject from 'lodash/isObject';\nimport Tabs from '../tabs';\nimport { StyledProps } from '../common';\nimport { TdHeadMenuProps } from './type';\nimport useConfig from '../_util/useConfig';\nimport useMenuContext from './hooks/useMenuContext';\nimport { MenuContext } from './MenuContext';\nimport checkSubMenuActive from './_util/checkSubMenuActive';\n\nconst { TabPanel } = Tabs;\n\nexport interface HeadMenuProps extends TdHeadMenuProps, StyledProps {}\n\nconst HeadMenu: FC<HeadMenuProps> = (props) => {\n  const { children, className, theme = 'light', style, logo, operations } = props;\n  const { classPrefix } = useConfig();\n  const { value } = useMenuContext({ ...props, children, mode: 'title' });\n\n  const childList: ReactElement[] | null = useMemo(() => {\n    if (value.expandType === 'popup') return null;\n    const activeMenu: ReactElement = checkSubMenuActive(children, value.active);\n    if (!activeMenu) return null;\n    const child = activeMenu.props.children;\n    if (Array.isArray(child)) return child;\n    if (isObject(child)) return [child];\n    return activeMenu.props.children;\n  }, [children, value.expandType, value.active]);\n\n  const currentChildListValues = childList?.length > 0 ? childList.map((item) => item.props.value) : [];\n\n  return (\n    <MenuContext.Provider value={value}>\n      <div\n        className={classNames(className, `${classPrefix}-head-menu`, `${classPrefix}-menu--${theme}`)}\n        style={{ ...style }}\n      >\n        <div className={`${classPrefix}-head-menu__inner`}>\n          {logo && <div className={`${classPrefix}-menu__logo`}>{logo}</div>}\n          <ul className={`${classPrefix}-menu`}>{children}</ul>\n          {operations && <div className={`${classPrefix}-menu__operations`}>{operations}</div>}\n        </div>\n        {childList?.length > 0 && (\n          <ul className={`${classPrefix}-head-menu__submenu ${classPrefix}-submenu`}>\n            <Tabs\n              value={currentChildListValues.includes(value.active) ? value.active : currentChildListValues[0]}\n              onChange={value.onChange}\n            >\n              {childList.map(({ props }) => (\n                <TabPanel value={props.value} key={props.value} label={props.children}></TabPanel>\n              ))}\n            </Tabs>\n          </ul>\n        )}\n      </div>\n    </MenuContext.Provider>\n  );\n};\n\nexport default HeadMenu;\n"],"names":["TabPanel","Tabs","HeadMenu","props","children","className","theme","style","logo","operations","useConfig","classPrefix","useMenuContext","mode","value","childList","useMemo","expandType","activeMenu","checkSubMenuActive","active","child","Array","isArray","isObject","currentChildListValues","length","map","item","React","createElement","MenuContext","Provider","classNames","includes","onChange","props2","key","label"],"mappings":"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"}