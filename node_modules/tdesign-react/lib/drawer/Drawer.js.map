{"version":3,"file":"Drawer.js","sources":["../../src/drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, useState, useEffect, useImperativeHandle, useRef } from 'react';\nimport classnames from 'classnames';\nimport { CloseIcon } from 'tdesign-icons-react';\n\nimport { addClass, removeClass } from '../_util/dom';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport getScrollbarWidth from '../_util/getScrollbarWidth';\nimport hasScrollBar from '../_util/hasScrollBar';\nimport { TdDrawerProps, DrawerEventSource } from './type';\nimport { StyledProps } from '../common';\nimport DrawerWrapper from './DrawerWrapper';\nimport Button from '../button';\nimport useConfig from '../_util/useConfig';\nimport { drawerDefaultProps } from './defaultProps';\n\nexport const CloseTriggerType: { [key: string]: DrawerEventSource } = {\n  CLICK_OVERLAY: 'overlay',\n  CLICK_CLOSE_BTN: 'close-btn',\n  CLICK_CANCEL_BTN: 'cancel',\n  KEYDOWN_ESC: 'esc',\n};\n\nexport interface DrawerProps extends TdDrawerProps, StyledProps {}\n\nconst getSizeValue = (size: string): string => {\n  const defaultSize = isNaN(Number(size)) ? size : `${size}px`;\n  return (\n    {\n      small: '300px',\n      medium: '500px',\n      large: '760px',\n    }[size] || defaultSize\n  );\n};\n\nconst Drawer = forwardRef((props: DrawerProps, ref: React.Ref<HTMLDivElement>) => {\n  const {\n    className,\n    style,\n    visible,\n    attach = '',\n    showOverlay,\n    size,\n    placement,\n    onCancel,\n    onConfirm,\n    onClose,\n    onCloseBtnClick,\n    onOverlayClick,\n    onEscKeydown,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    closeOnEscKeydown,\n    children,\n    header,\n    body,\n    footer,\n    closeBtn,\n    cancelBtn,\n    confirmBtn,\n    zIndex,\n    destroyOnClose,\n    mode,\n    preventScrollThrough = true,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('drawer');\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const { classPrefix } = useConfig();\n  const containerRef = useRef<HTMLDivElement>();\n  const contentWrapperRef = useRef<HTMLDivElement>();\n  const drawerWrapperRef = useRef<HTMLElement>(); // 即最终的 attach dom，默认为 document.body\n  const prefixCls = `${classPrefix}-drawer`;\n  const lockCls = `${prefixCls}--lock`;\n\n  const transform = visible ? 'translate(0px)' : '';\n  const closeIcon = React.isValidElement(closeBtn) ? closeBtn : <CloseIcon />;\n\n  const [isDestroyOnClose, setIsDestroyOnClose] = useState(false);\n\n  useImperativeHandle(ref, () => containerRef.current);\n\n  useEffect(() => {\n    if (preventScrollThrough) {\n      if (visible && !showInAttachedElement) {\n        addClass(document.body, lockCls);\n      } else {\n        removeClass(document.body, lockCls);\n      }\n    }\n  }, [visible, showInAttachedElement, lockCls, preventScrollThrough]);\n\n  // 重置销毁钩子判断\n  useEffect(() => {\n    if (!destroyOnClose || !visible) return;\n    setIsDestroyOnClose(false);\n  }, [visible, destroyOnClose]);\n\n  useEffect(() => {\n    let documentBodyCssText = '';\n\n    if (visible) {\n      if (attach !== '' && hasScrollBar()) {\n        // 处理滚动条宽度导致晃动的问题。\n        const scrollbarWidth = getScrollbarWidth();\n        documentBodyCssText = `overflow: hidden; width: calc(100% - ${scrollbarWidth}px);`;\n\n        if (mode !== 'push') {\n          // 这里做简单的性能优化，如果是 body 那么在下面 mode=push 的模式下，一起使用 cssText 设置，减少重绘重排\n          document.body.style.cssText = documentBodyCssText;\n        }\n      }\n    }\n\n    if (mode === 'push') {\n      drawerWrapperRef.current.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s';\n\n      const marginStr = {\n        left: `margin: 0 0 0 ${getSizeValue(size)}`,\n        right: `margin: 0 0 0 -${getSizeValue(size)}`,\n        top: `margin: ${getSizeValue(size)} 0 0 0`,\n        bottom: `margin: -${getSizeValue(size)} 0 0 0`,\n      }[placement];\n\n      if (visible) {\n        drawerWrapperRef.current.style.cssText += marginStr;\n      } else {\n        drawerWrapperRef.current.style.cssText = drawerWrapperRef.current.style.cssText.replace(/margin:.+;/, '');\n      }\n    }\n\n    if (contentWrapperRef.current) {\n      // 聚焦到 Drawer 最外层元素即 containerRef.current，KeyDown 事件才有效。\n      containerRef.current.focus();\n\n      contentWrapperRef.current.style.transform = transform;\n    }\n  }, [attach, mode, transform, visible, placement, size]);\n\n  function onMaskClick(e: React.MouseEvent<HTMLDivElement>) {\n    onOverlayClick?.({ e });\n    closeOnOverlayClick && onClose?.({ e, trigger: CloseTriggerType.CLICK_OVERLAY });\n  }\n  function onClickCloseBtn(e: React.MouseEvent<HTMLDivElement>) {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CLOSE_BTN });\n  }\n  function onKeyDownEsc(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key !== 'Escape') return;\n\n    onEscKeydown?.({ e });\n    closeOnEscKeydown && onClose?.({ e, trigger: CloseTriggerType.KEYDOWN_ESC });\n  }\n  function onCancelClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CANCEL_BTN });\n  }\n  function onConfirmClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onConfirm?.({ e });\n  }\n\n  function onTransitionEnd() {\n    if (!visible) {\n      // 重置样式\n      document.body.style.display = 'none';\n      document.body.style.overflow = '';\n      document.body.style.width = '';\n      document.body.style.margin = '';\n      document.body.style.display = 'block';\n\n      destroyOnClose && setIsDestroyOnClose(true);\n    }\n  }\n\n  const drawerClass = classnames(prefixCls, className, `${prefixCls}--${placement}`, {\n    [`${prefixCls}--open`]: visible,\n    [`${prefixCls}--attach`]: showInAttachedElement,\n    [`${prefixCls}--without-mask`]: !showOverlay,\n  });\n\n  const contentWrapperClass = classnames(\n    `${prefixCls}__content-wrapper`,\n    `${prefixCls}__content-wrapper--${placement}`,\n  );\n  const contentWrapperStyle = {\n    transform: visible ? 'translateX(0)' : undefined,\n    width: ['left', 'right'].includes(placement) ? getSizeValue(size) : '',\n    height: ['top', 'bottom'].includes(placement) ? getSizeValue(size) : '',\n  };\n\n  function getFooter(): React.ReactNode {\n    if (footer !== true) return footer;\n\n    const defaultCancelBtn = (\n      <Button theme=\"default\" onClick={onCancelClick} className={`${prefixCls}__cancel`}>\n        {cancelText}\n      </Button>\n    );\n\n    const defaultConfirmBtn = (\n      <Button theme=\"primary\" onClick={onConfirmClick} className={`${prefixCls}__confirm`}>\n        {confirmBtn && typeof confirmBtn === 'string' ? confirmBtn : confirmText}\n      </Button>\n    );\n\n    const renderCancelBtn = cancelBtn && React.isValidElement(cancelBtn) ? cancelBtn : defaultCancelBtn;\n    const renderConfirmBtn = confirmBtn && React.isValidElement(confirmBtn) ? confirmBtn : defaultConfirmBtn;\n\n    const footerStyle = {\n      display: 'flex',\n      justifyContent: placement === 'right' ? 'flex-start' : 'flex-end',\n    };\n\n    return (\n      <div style={footerStyle}>\n        {placement === 'right' && renderConfirmBtn}\n        {renderCancelBtn}\n        {placement !== 'right' && renderConfirmBtn}\n      </div>\n    );\n  }\n\n  const renderOverlay = showOverlay && <div className={`${prefixCls}__mask`} onClick={onMaskClick} />;\n  const renderCloseBtn = closeBtn && (\n    <div onClick={onClickCloseBtn} className={`${prefixCls}__close-btn`}>\n      {closeIcon}\n    </div>\n  );\n  const renderHeader = header && <div className={`${prefixCls}__header`}>{header}</div>;\n  const renderBody = <div className={`${prefixCls}__body`}>{body || children}</div>;\n  const renderFooter = footer && <div className={`${prefixCls}__footer`}>{getFooter()}</div>;\n\n  if (isDestroyOnClose && !visible) return null;\n\n  return (\n    <DrawerWrapper attach={attach} ref={drawerWrapperRef}>\n      <div\n        ref={containerRef}\n        className={drawerClass}\n        style={{ zIndex, ...style }}\n        tabIndex={-1} // https://stackoverflow.com/questions/43503964/onkeydown-event-not-working-on-divs-in-react\n        onKeyDown={onKeyDownEsc}\n        onTransitionEnd={onTransitionEnd}\n      >\n        {renderOverlay}\n        <div ref={contentWrapperRef} className={contentWrapperClass} style={contentWrapperStyle}>\n          {renderCloseBtn}\n          {renderHeader}\n          {renderBody}\n          {renderFooter}\n        </div>\n      </div>\n    </DrawerWrapper>\n  );\n});\n\nDrawer.displayName = 'Drawer';\nDrawer.defaultProps = drawerDefaultProps;\n\nexport default Drawer;\n"],"names":["CloseTriggerType","CLICK_OVERLAY","CLICK_CLOSE_BTN","CLICK_CANCEL_BTN","KEYDOWN_ESC","getSizeValue","size","defaultSize","isNaN","Number","small","medium","large","Drawer","forwardRef","props","ref","className","style","visible","attach","showOverlay","placement","onCancel","onConfirm","onClose","onCloseBtnClick","onOverlayClick","onEscKeydown","showInAttachedElement","closeOnOverlayClick","closeOnEscKeydown","children","header","body","footer","closeBtn","cancelBtn","confirmBtn","zIndex","destroyOnClose","mode","preventScrollThrough","useLocaleReceiver","_slicedToArray","local","t","confirmText","confirm","cancelText","cancel","useConfig","classPrefix","containerRef","useRef","contentWrapperRef","drawerWrapperRef","prefixCls","lockCls","transform","closeIcon","React","isValidElement","createElement","CloseIcon","useState","isDestroyOnClose","setIsDestroyOnClose","useImperativeHandle","current","useEffect","addClass","document","removeClass","documentBodyCssText","hasScrollBar","scrollbarWidth","getScrollbarWidth","cssText","marginStr","left","right","top","bottom","replace","focus","onMaskClick","e","trigger","onClickCloseBtn","onKeyDownEsc","key","onCancelClick","onConfirmClick","onTransitionEnd","display","overflow","width","margin","drawerClass","classnames","_defineProperty","contentWrapperClass","contentWrapperStyle","includes","height","getFooter","defaultCancelBtn","Button","theme","onClick","defaultConfirmBtn","renderCancelBtn","renderConfirmBtn","footerStyle","justifyContent","renderOverlay","renderCloseBtn","renderHeader","renderBody","renderFooter","DrawerWrapper","tabIndex","onKeyDown","displayName","defaultProps","drawerDefaultProps"],"mappings":"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"}