{"version":3,"file":"DrawerWrapper.js","sources":["../../src/drawer/DrawerWrapper.tsx"],"sourcesContent":["import React, { useRef, forwardRef, useImperativeHandle, cloneElement } from 'react';\nimport Portal, { PortalProps, getAttach } from '../common/Portal';\nimport { DrawerProps } from './Drawer';\n\nexport interface DrawerWrapperProps extends PortalProps {\n  attach?: DrawerProps['attach'];\n  children: React.ReactElement;\n}\n\nconst DrawerWrapper = forwardRef((props: DrawerWrapperProps, ref) => {\n  const { children, attach } = props;\n  const portalRef = useRef<HTMLDivElement>(null);\n  let portal = null;\n\n  useImperativeHandle(ref, () => {\n    if (attach === '') {\n      return portalRef.current.parentElement;\n    }\n\n    return getAttach(attach);\n  });\n\n  // 如果 attach === '',渲染在当前组件节点中。\n  if (attach === '') {\n    portal = <div ref={portalRef}>{cloneElement(children)}</div>;\n  } else {\n    portal = (\n      <Portal attach={attach} ref={portalRef}>\n        {children}\n      </Portal>\n    );\n  }\n\n  return portal;\n});\n\nDrawerWrapper.displayName = 'DrawerWrapper';\n\nexport default DrawerWrapper;\n"],"names":["DrawerWrapper","forwardRef","props","ref","children","attach","portalRef","useRef","portal","useImperativeHandle","current","parentElement","getAttach","React","createElement","cloneElement","Portal","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEMA,IAAAA,aAAa,gBAAGC,gBAAU,CAAC,UAACC,KAAD,EAAQC,GAAR,EAAgB;AAC/C,EAAA,IAAQC,QAAR,GAA6BF,KAA7B,CAAQE,QAAR;AAAA,MAAkBC,MAAlB,GAA6BH,KAA7B,CAAkBG,MAAlB,CAAA;AACA,EAAA,IAAMC,SAAS,GAAGC,YAAM,CAAC,IAAD,CAAxB,CAAA;EACA,IAAIC,MAAM,GAAG,IAAb,CAAA;EACAC,yBAAmB,CAACN,GAAD,EAAM,YAAM;IAC7B,IAAIE,MAAM,KAAK,EAAf,EAAmB;AACjB,MAAA,OAAOC,SAAS,CAACI,OAAV,CAAkBC,aAAzB,CAAA;AACD,KAAA;;IACD,OAAOC,uBAAS,CAACP,MAAD,CAAhB,CAAA;AACD,GALkB,CAAnB,CAAA;;EAMA,IAAIA,MAAM,KAAK,EAAf,EAAmB;AACjBG,IAAAA,MAAM,kBAAmBK,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAClDX,MAAAA,GAAG,EAAEG,SAAAA;AAD6C,KAA3B,eAEtBS,kBAAY,CAACX,QAAD,CAFU,CAAzB,CAAA;AAGD,GAJD,MAIO;AACLI,IAAAA,MAAM,kBAAmBK,yBAAK,CAACC,aAAN,CAAoBE,wBAApB,EAA4B;AACnDX,MAAAA,MAAM,EAANA,MADmD;AAEnDF,MAAAA,GAAG,EAAEG,SAAAA;KAFkB,EAGtBF,QAHsB,CAAzB,CAAA;AAID,GAAA;;AACD,EAAA,OAAOI,MAAP,CAAA;AACD,CArB+B,EAAhC;AAsBAR,aAAa,CAACiB,WAAd,GAA4B,eAA5B;;;;"}