{"version":3,"file":"TR.js","sources":["../../src/table/TR.tsx"],"sourcesContent":["import React, { useMemo, useRef, MouseEvent } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport classnames from 'classnames';\nimport { formatRowAttributes, formatRowClassNames } from './utils';\nimport { getRowFixedStyles, getColumnFixedStyles, RowAndColFixedPosition } from './hooks/useFixed';\nimport useClassName from './hooks/useClassName';\nimport TEllipsis from './Ellipsis';\nimport { BaseTableCellParams, TableRowData, RowspanColspan, TdBaseTableProps, TableScroll } from './type';\nimport useLazyLoad from './hooks/useLazyLoad';\n\nexport interface RenderTdExtra {\n  rowAndColFixedPosition: RowAndColFixedPosition;\n  columnLength: number;\n  dataLength: number;\n  cellSpans: RowspanColspan;\n}\n\nexport interface RenderEllipsisCellParams {\n  cellNode: any;\n}\n\nexport type TrCommonProps = Pick<TdBaseTableProps, TrPropsKeys>;\n\nexport const TABLE_PROPS = [\n  'rowKey',\n  'rowClassName',\n  'columns',\n  'fixedRows',\n  'footData',\n  'rowAttributes',\n  'rowspanAndColspan',\n  'scroll',\n  'onCellClick',\n  'onRowClick',\n  'onRowDblclick',\n  'onRowMouseover',\n  'onRowMousedown',\n  'onRowMouseenter',\n  'onRowMouseleave',\n  'onRowMouseup',\n] as const;\n\nexport type TrPropsKeys = typeof TABLE_PROPS[number];\n\nexport interface TrProps extends TrCommonProps {\n  rowKey: string;\n  row?: TableRowData;\n  rowIndex?: number;\n  dataLength?: number;\n  rowAndColFixedPosition?: RowAndColFixedPosition;\n  // 属性透传，引用传值，可内部改变\n  skipSpansMap?: Map<any, boolean>;\n  scrollType?: string;\n  isVirtual?: boolean;\n  rowHeight?: number;\n  trs?: Map<number, object>;\n  bufferSize?: number;\n  scroll?: TableScroll;\n  tableElm?: HTMLDivElement;\n  tableContentElm?: HTMLDivElement;\n  onRowMounted?: () => void;\n  onTrRowspanOrColspan?: (params: BaseTableCellParams<TableRowData>, cellSpans: RowspanColspan) => void;\n}\n\nexport const ROW_LISTENERS = ['click', 'dblclick', 'mouseover', 'mousedown', 'mouseenter', 'mouseleave', 'mouseup'];\n\nexport function renderCell(params: BaseTableCellParams<TableRowData>) {\n  const { col, row } = params;\n  if (isFunction(col.cell)) {\n    return col.cell(params);\n  }\n  if (isFunction(col.render)) {\n    return col.render({ ...params, type: 'cell' });\n  }\n  return col.cell || col.render || get(row, col.colKey);\n}\n\n// 表格行组件\nexport default function TR(props: TrProps) {\n  const {\n    row,\n    rowKey,\n    rowIndex,\n    rowClassName,\n    rowAttributes,\n    dataLength,\n    fixedRows,\n    scroll,\n    tableContentElm,\n    rowAndColFixedPosition,\n  } = props;\n\n  const trRef = useRef<HTMLTableRowElement>();\n\n  const {\n    tdEllipsisClass,\n    tableBaseClass,\n    tableColFixedClasses,\n    tableRowFixedClasses,\n    tdAlignClasses,\n    tableDraggableClasses,\n  } = useClassName();\n\n  const trStyles = getRowFixedStyles(\n    get(row, rowKey || 'id'),\n    rowIndex,\n    dataLength,\n    fixedRows,\n    rowAndColFixedPosition,\n    tableRowFixedClasses,\n  );\n\n  const trAttributes = useMemo(\n    () => formatRowAttributes(rowAttributes, { row, rowIndex, type: 'body' }) || {},\n    [row, rowAttributes, rowIndex],\n  );\n\n  const classes = useMemo(() => {\n    const customClasses = formatRowClassNames(rowClassName, { row, rowIndex, type: 'body' }, rowKey || 'id');\n    return [trStyles?.classes, customClasses];\n  }, [row, rowClassName, rowIndex, rowKey, trStyles?.classes]);\n\n  const useLazyLoadParams = useMemo(() => ({ ...scroll, rowIndex }), [scroll, rowIndex]);\n  const { hasLazyLoadHolder, tRowHeight } = useLazyLoad(tableContentElm, trRef.current, useLazyLoadParams);\n\n  function renderEllipsisCell(cellParams: BaseTableCellParams<TableRowData>, params: RenderEllipsisCellParams) {\n    const { cellNode } = params;\n    const { col, colIndex } = cellParams;\n    // 前两列左对齐显示\n    const placement = colIndex < 2 ? 'top-left' : 'top-right';\n    const content = isFunction(col.ellipsis) ? col.ellipsis(cellParams) : undefined;\n    const tableElement = props.tableElm;\n    return (\n      <TEllipsis\n        placement={placement}\n        attach={tableElement ? () => tableElement : undefined}\n        popupContent={content}\n        popupProps={typeof col.ellipsis === 'object' ? col.ellipsis : undefined}\n      >\n        {cellNode}\n      </TEllipsis>\n    );\n  }\n\n  function renderTd(params: BaseTableCellParams<TableRowData>, extra: RenderTdExtra) {\n    const { col, colIndex, rowIndex } = params;\n    const { cellSpans, dataLength, rowAndColFixedPosition } = extra;\n    const cellNode = renderCell(params);\n    const tdStyles = getColumnFixedStyles(col, colIndex, rowAndColFixedPosition, tableColFixedClasses);\n    const customClasses = isFunction(col.className) ? col.className({ ...params, type: 'td' }) : col.className;\n    const classes = [\n      tdStyles.classes,\n      customClasses,\n      {\n        [tdEllipsisClass]: col.ellipsis,\n        [tableBaseClass.tdLastRow]: rowIndex + cellSpans.rowspan === dataLength,\n        [tableBaseClass.tdFirstCol]: colIndex === 0 && props.rowspanAndColspan,\n        [tdAlignClasses[col.align]]: col.align && col.align !== 'left',\n        // 标记可拖拽列\n        [tableDraggableClasses.handle]: col.colKey === 'drag',\n      },\n    ];\n    const onClick = (e: MouseEvent<HTMLTableCellElement>) => {\n      const p = { ...params, e };\n      props.onCellClick?.(p);\n    };\n    const attrs = { ...col.attrs, rowSpan: cellSpans.rowspan, colSpan: cellSpans.colspan };\n    if (!col.colKey) return null;\n    return (\n      <td key={col.colKey} className={classnames(classes)} style={tdStyles.style} {...attrs} onClick={onClick}>\n        {col.ellipsis ? renderEllipsisCell(params, { cellNode }) : cellNode}\n      </td>\n    );\n  }\n\n  // const { row, rowIndex, dataLength, rowAndColFixedPosition, scrollType, isInit } = props;\n  // const hasHolder = scrollType === 'lazy' && !isInit;\n  // const rowHeightRef: Ref = inject('rowHeightRef');\n  const columnVNodeList = props.columns?.map((col, colIndex) => {\n    const cellSpans: RowspanColspan = {};\n    const params = {\n      row,\n      col,\n      rowIndex,\n      colIndex,\n    };\n    if (isFunction(props.rowspanAndColspan)) {\n      const o = props.rowspanAndColspan(params);\n      o?.rowspan > 1 && (cellSpans.rowspan = o.rowspan);\n      o?.colspan > 1 && (cellSpans.colspan = o.colspan);\n      props.onTrRowspanOrColspan?.(params, cellSpans);\n    }\n    const skipped = props.skipSpansMap?.get([rowIndex, colIndex].join());\n    if (skipped) return null;\n    return renderTd(params, {\n      dataLength,\n      rowAndColFixedPosition,\n      columnLength: props.columns.length,\n      cellSpans,\n    });\n  });\n\n  const rowParams = { row, index: rowIndex };\n  return (\n    <tr\n      ref={trRef}\n      {...trAttributes}\n      style={trStyles?.style}\n      className={classnames(classes)}\n      onClick={(e) => props.onRowClick?.({ ...rowParams, e })}\n      onDoubleClick={(e) => props.onRowDblclick?.({ ...rowParams, e })}\n      onMouseDown={(e) => props.onRowMousedown?.({ ...rowParams, e })}\n      onMouseEnter={(e) => props.onRowMouseenter?.({ ...rowParams, e })}\n      onMouseLeave={(e) => props.onRowMouseleave?.({ ...rowParams, e })}\n      onMouseUp={(e) => props.onRowMouseup?.({ ...rowParams, e })}\n      onMouseOver={(e) => props.onRowMouseover?.({ ...rowParams, e })}\n    >\n      {hasLazyLoadHolder\n        ? [<td key={rowIndex} style={{ height: `${tRowHeight}px`, border: 'none' }} />]\n        : columnVNodeList}\n    </tr>\n  );\n}\n\nTR.displayName = 'TR';\n"],"names":["TABLE_PROPS","ROW_LISTENERS","renderCell","params","col","row","isFunction","cell","render","type","get","colKey","TR","props","rowKey","rowIndex","rowClassName","rowAttributes","dataLength","fixedRows","scroll","tableContentElm","rowAndColFixedPosition","trRef","useRef","useClassName","tdEllipsisClass","tableBaseClass","tableColFixedClasses","tableRowFixedClasses","tdAlignClasses","tableDraggableClasses","trStyles","getRowFixedStyles","trAttributes","useMemo","formatRowAttributes","classes","customClasses","formatRowClassNames","useLazyLoadParams","useLazyLoad","current","hasLazyLoadHolder","tRowHeight","renderEllipsisCell","cellParams","cellNode","colIndex","placement","content","ellipsis","tableElement","tableElm","React","createElement","TEllipsis","attach","popupContent","popupProps","_typeof","renderTd","extra","rowIndex2","cellSpans","dataLength2","rowAndColFixedPosition2","tdStyles","getColumnFixedStyles","className","classes2","_defineProperty","tdLastRow","rowspan","tdFirstCol","rowspanAndColspan","align","handle","onClick","e","p","onCellClick","attrs","rowSpan","colSpan","colspan","key","classnames","style","columnVNodeList","columns","map","o","onTrRowspanOrColspan","skipped","skipSpansMap","join","columnLength","length","rowParams","index","ref","onRowClick","onDoubleClick","onRowDblclick","onMouseDown","onRowMousedown","onMouseEnter","onRowMouseenter","onMouseLeave","onRowMouseleave","onMouseUp","onRowMouseup","onMouseOver","onRowMouseover","height","border","displayName"],"mappings":"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"}