{"version":3,"file":"utils.js","sources":["../../../../src/_common/js/date-picker/utils.ts"],"sourcesContent":["import chunk from 'lodash/chunk';\n\n/**\n * 首字母大写\n * @param {String} str 目标字符串\n * @returns {String}\n */\nexport function firstUpperCase(str: string): string {\n  if (!str) return str;\n  return str[0].toUpperCase().concat(str.substring(1, str.length));\n}\n\ninterface DateObj {\n  year: number;\n  month: number;\n}\n\n/**\n * 返回指定年、月的第一天日期\n * @param {Object} { year, month }\n * @returns {Date}\n */\nfunction getFirstDayOfMonth({ year, month }: DateObj): Date {\n  return new Date(year, month, 1);\n}\n\n/**\n * 返回指定年、月的天数\n * @param {Object} { year, month }\n * @returns {Number}\n */\nfunction getDaysInMonth({ year, month }: DateObj): number {\n  return new Date(year, month + 1, 0).getDate();\n}\n\n/**\n * 返回指定年、月的最后一天日期\n * @param {Object} { year, month }\n * @returns {Date}\n */\nfunction getLastDayOfMonth({ year, month }: DateObj): Date {\n  return new Date(year, month, getDaysInMonth({ year, month }));\n}\n\nfunction isSameYear(date1: Date, date2: Date) {\n  return date1.getFullYear() === date2.getFullYear();\n}\n\nfunction isSameMonth(date1: Date, date2: Date) {\n  return isSameYear(date1, date2) && date1.getMonth() === date2.getMonth();\n}\n\nfunction isSameDate(date1: Date, date2: Date) {\n  return isSameMonth(date1, date2) && date1.getDate() === date2.getDate();\n}\n\n/**\n * 是否是某法范围内的日期，精确到日\n * @param {Date} value 目标日期\n * @param {Object} { start, end } 范围\n * @returns {Boolean}\n */\nfunction isBetween(\n  value: { getFullYear: () => number; getMonth: () => number; getDate: () => number },\n  { start, end }: { start: any; end: any },\n): boolean {\n  const date = new Date(value.getFullYear(), value.getMonth(), value.getDate());\n\n  const startTime = new Date(start.getFullYear(), start.getMonth(), start.getDate());\n  const endTime = new Date(end.getFullYear(), end.getMonth(), end.getDate());\n\n  return startTime <= date && endTime >= date;\n}\n\n/**\n * 比较两个日期对象的时间戳\n * @param {Date} date1 日期1\n * @param {Date} date2 日期2\n * @returns {Number} 返回 date1.getTime() - date2.getTime() 的差值\n */\nfunction compareAsc(date1: { getTime: () => any }, date2: Date): number {\n  const d1 = date1.getTime();\n  const d2 = date2.getTime();\n\n  if (d1 < d2) return -1;\n  if (d1 > d2) return 1;\n  return 0;\n}\n\n/**\n * 比较两个 Date 是否是同一天 或则 同一月 或则 同一年\n * @param {Date} date1 比较的日期\n * @param {Date} date2 比较的日期\n * @param {String} type 比较类型，默认比较到『日』 date|month|year\n * @returns {Boolean}\n */\nexport function isSame(date1: Date, date2: Date, type = 'date'): boolean {\n  const func = {\n    isSameYear,\n    isSameMonth,\n    isSameDate,\n  };\n  return func[`isSame${firstUpperCase(type)}`](date1, date2);\n}\n\nexport function outOfRanges(d: Date, min: any, max: any) {\n  return (min && compareAsc(d, min) === -1) || (max && compareAsc(d, max) === 1);\n}\n\n/**\n * @returns {Date} 当天零点的日期对象\n */\nexport function getToday(): Date {\n  const now = new Date();\n  return new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0);\n}\n\n/**\n * 返回日期对象的年、月、日、小时、分钟、秒、12小时制标识\n * @param {Date} date\n * @returns {Object}\n */\nexport function getDateObj(date: Date) {\n  let tempDate = date;\n  if (!(date instanceof Date)) {\n    tempDate = getToday();\n  }\n  return {\n    year: tempDate.getFullYear(),\n    month: tempDate.getMonth(),\n    date: tempDate.getDate(),\n    hours: tempDate.getHours(),\n    minutes: tempDate.getMinutes(),\n    seconds: tempDate.getSeconds(),\n    meridiem: tempDate.getHours() > 11 ? 'PM' : 'AM',\n  };\n}\n\n/**\n * 设置日期对象的时间部分\n * @param {Date} d 日期\n * @param {Number} hour 小时\n * @param {Number} min 分钟\n * @param {Number} sec 秒\n * @returns {Date} 一个新的date\n */\nexport function setDateTime(d: Date, hour: number, min: number, sec: number): Date {\n  const { year, month, date } = getDateObj(d);\n  return new Date(year, month, date, hour, min, sec, 0);\n}\n\n/**\n * 减月份\n * @param {Date} date 起始日期\n * @param {Number} num 月份数\n * @returns {Date}\n */\nexport function subtractMonth(date: Date, num: any): Date {\n  const day = date.getDate();\n  const newDate = new Date(date);\n\n  let _num = num;\n  // eslint-disable-next-line no-plusplus\n  while (_num--) {\n    newDate.setDate(0);\n  }\n  newDate.setDate(day);\n  return newDate;\n}\n\n/**\n * 增加月份\n * @param {Date} date 起始日期\n * @param {Number} num 月份数\n * @returns {Date}\n */\nexport function addMonth(date: Date, num: number): Date {\n  let _num = num;\n  if (num < 0) _num = 0;\n  const newDate = new Date(date);\n  const year = date.getFullYear();\n  const month = date.getMonth() + _num;\n  const day = newDate.getDate();\n  newDate.setDate(1);\n  newDate.setMonth(month);\n  newDate.setDate(Math.min(day, getDaysInMonth({ year, month })));\n  return newDate;\n}\n\nexport type DateValue = string | Date | Array<DateValue>;\nexport interface DisableDateObj { from?: string; to?: string; before?: string; after?: string }\nexport type DisableDate = Array<DateValue> | DisableDateObj | ((date: DateValue) => boolean);\n\nexport interface OptionsType {\n  firstDayOfWeek: number;\n  disableDate: DisableDate;\n  minDate: Date;\n  maxDate: Date;\n  monthLocal?: string[];\n}\n\nexport function getWeeks(\n  { year, month }: { year: number; month: number },\n  {\n    firstDayOfWeek,\n    disableDate = () => false,\n    minDate,\n    maxDate,\n  }: OptionsType,\n) {\n  const prependDay = getFirstDayOfMonth({ year, month });\n  const appendDay = getLastDayOfMonth({ year, month });\n  const maxDays = getDaysInMonth({ year, month });\n  const daysArr = [];\n  let i = 1;\n  const today = getToday();\n  for (i; i <= maxDays; i++) {\n    const currentDay = new Date(year, month, i);\n    daysArr.push({\n      text: i,\n      active: false,\n      value: currentDay,\n      disabled: (typeof disableDate === 'function' && disableDate(currentDay)) || outOfRanges(currentDay, minDate, maxDate),\n      now: isSame(today, currentDay),\n      firstDayOfMonth: i === 1,\n      lastDayOfMonth: i === maxDays,\n      type: 'current-month',\n    });\n  }\n\n  if (prependDay.getDay() !== firstDayOfWeek) {\n    prependDay.setDate(0); // 上一月\n    while (true) {\n      daysArr.unshift({\n        text: prependDay.getDate().toString(),\n        active: false,\n        value: new Date(prependDay),\n        disabled: (typeof disableDate === 'function' && disableDate(prependDay)) || outOfRanges(prependDay, minDate, maxDate),\n        additional: true, // 非当前月\n        type: 'prev-month',\n      });\n      prependDay.setDate(prependDay.getDate() - 1);\n      if (prependDay.getDay() === Math.abs(firstDayOfWeek + 6) % 7) break;\n    }\n  }\n\n  const LEN = 42; // 显示6周\n  while (daysArr.length < LEN) {\n    appendDay.setDate(appendDay.getDate() + 1);\n    daysArr.push({\n      text: appendDay.getDate(),\n      active: false,\n      value: new Date(appendDay),\n      disabled: (typeof disableDate === 'function' && disableDate(appendDay)) || outOfRanges(appendDay, minDate, maxDate),\n      additional: true, // 非当前月\n      type: 'next-month',\n    });\n  }\n\n  return chunk(daysArr, 7);\n}\n\nexport function getYears(\n  year: number,\n  {\n    disableDate = () => false,\n    minDate,\n    maxDate,\n  }: OptionsType,\n) {\n  const startYear = parseInt((year / 10).toString(), 10) * 10;\n  const endYear = startYear + 9;\n\n  const yearArr = [];\n\n  const today = getToday();\n\n  for (let i = startYear; i <= endYear; i++) {\n    const date = new Date(i, 1);\n\n    let disabledMonth = 0;\n    let outOfRangeMonth = 0;\n\n    for (let j = 0; j < 12; j++) {\n      const d = new Date(i, j);\n      if (typeof disableDate === 'function' && disableDate(d)) disabledMonth += 1;\n      if (outOfRanges(d, minDate, maxDate)) outOfRangeMonth += 1;\n    }\n\n    yearArr.push({\n      value: date,\n      now: isSame(date, today, 'year'),\n      disabled: disabledMonth === 12 || outOfRangeMonth === 12,\n      active: false,\n      text: `${date.getFullYear()}`,\n    });\n  }\n\n  return chunk(yearArr, 4);\n}\n\nexport function getMonths(year: number, params: OptionsType) {\n  const {\n    disableDate = () => false, minDate, maxDate, monthLocal,\n  } = params;\n  const MonthArr = [];\n  const today = getToday();\n  for (let i = 0; i <= 11; i++) {\n    const date = new Date(year, i);\n    let disabledDay = 0;\n    let outOfRangeDay = 0;\n    const daysInMonth = getDaysInMonth({ year, month: i });\n\n    for (let j = 1; j <= daysInMonth; j++) {\n      const d = new Date(year, i, j);\n      if (typeof disableDate === 'function' && disableDate(d)) disabledDay += 1;\n      if (outOfRanges(d, minDate, maxDate)) outOfRangeDay += 1;\n    }\n\n    MonthArr.push({\n      value: date,\n      now: isSame(date, today, 'month'),\n      disabled: disabledDay === daysInMonth || outOfRangeDay === daysInMonth,\n      active: false,\n      text: monthLocal[date.getMonth()], // `${date.getMonth() + 1} ${monthText || '月'}`,\n    });\n  }\n\n  return chunk(MonthArr, 4);\n}\n\nexport interface DateTime {\n  active: boolean;\n  highlight: boolean;\n  startOfRange: boolean;\n  endOfRange: boolean;\n  value: Date;\n}\n\nexport function flagActive(data: any[], { ...args }: any) {\n  const { start, end, type = 'date' } = args;\n\n  if (!end) {\n    return data.map((row: any[]) => row.map((item: DateTime) => {\n      const _item = item;\n      _item.active = isSame(item.value, start, type);\n      return _item;\n    }));\n  }\n\n  return data.map((row: any[]) => row.map((item: DateTime) => {\n    const _item = item;\n    const date = item.value;\n    const isStart = isSame(start, date, type);\n    const isEnd = isSame(end, date, type);\n    _item.active = isStart || isEnd;\n    _item.highlight = isBetween(date, { start, end });\n    _item.startOfRange = isStart;\n    _item.endOfRange = isEnd;\n    return _item;\n  }));\n}\n\n// extract time format from a completed date format 'YYYY-MM-DD HH:mm' -> 'HH:mm'\nexport function extractTimeFormat(dateFormat: string) {\n  const res = dateFormat.match(/(a\\s)?h{1,2}:m{1,2}(:s{1,2})?(\\sa)?/i);\n  if (!res) return null;\n  return res[0];\n}\n"],"names":["firstUpperCase","str","toUpperCase","concat","substring","length","getFirstDayOfMonth","year","month","Date","getDaysInMonth","getDate","getLastDayOfMonth","isSameYear","date1","date2","getFullYear","isSameMonth","getMonth","isSameDate","isBetween","value","start","end","date","startTime","endTime","compareAsc","d1","getTime","d2","isSame","type","func","outOfRanges","d","min","max","getToday","now","getDateObj","tempDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","meridiem","setDateTime","hour","sec","subtractMonth","num","day","newDate","_num","setDate","addMonth","setMonth","Math","getWeeks","firstDayOfWeek","disableDate","minDate","maxDate","prependDay","appendDay","maxDays","daysArr","i","today","currentDay","push","text","active","disabled","firstDayOfMonth","lastDayOfMonth","getDay","unshift","toString","additional","abs","LEN","chunk","getYears","startYear","parseInt","endYear","yearArr","disabledMonth","outOfRangeMonth","j","getMonths","params","monthLocal","MonthArr","disabledDay","outOfRangeDay","daysInMonth","flagActive","data","args","_extends","map","row","item","_item","isStart","isEnd","highlight","startOfRange","endOfRange","extractTimeFormat","dateFormat","res","match"],"mappings":"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"}