{"version":3,"file":"useSetState.js","sources":["../../src/_util/useSetState.ts"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nconst isFunction = (arg: unknown) => typeof arg === 'function';\n\n/**\n * 管理 object 类型 state 的 Hooks，用法与 class 组件的 this.setState 基本一致。\n * @param initialState\n * @returns [state, setMergeState]\n */\nconst useSetState = <T extends object>(\n  initialState: T = {} as T,\n): [T, (patch: Partial<T> | ((prevState: T) => Partial<T>)) => void] => {\n  const [state, setState] = useState<T>(initialState);\n\n  const setMergeState = useCallback((patch) => {\n    setState((prevState) => ({ ...prevState, ...(isFunction(patch) ? patch(prevState) : patch) }));\n  }, []);\n\n  return [state, setMergeState];\n};\n\nexport default useSetState;\n"],"names":["isFunction","arg","useSetState","initialState","useState","_slicedToArray","state","setState","setMergeState","useCallback","patch","prevState"],"mappings":";;;;;;;;;;;;;;;;;;;AACA,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAA;EAAA,OAAS,OAAOA,GAAP,KAAe,UAAxB,CAAA;AAAA,CAAnB,CAAA;;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAuB;EAAA,IAAtBC,YAAsB,uEAAP,EAAO,CAAA;;EACzC,IAA0BC,SAAAA,GAAAA,cAAQ,CAACD,YAAD,CAAlC;AAAA,MAAA,UAAA,GAAAE,4BAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAAOC,KAAP,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,QAAd,GAAA,UAAA,CAAA,CAAA,CAAA,CAAA;;AACA,EAAA,IAAMC,aAAa,GAAGC,iBAAW,CAAC,UAACC,KAAD,EAAW;IAC3CH,QAAQ,CAAC,UAACI,SAAD,EAAA;AAAA,MAAA,OAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAqBA,SAArB,CAAA,EAAmCX,UAAU,CAACU,KAAD,CAAV,GAAoBA,KAAK,CAACC,SAAD,CAAzB,GAAuCD,KAA1E,CAAA,CAAA;AAAA,KAAD,CAAR,CAAA;GAD+B,EAE9B,EAF8B,CAAjC,CAAA;AAGA,EAAA,OAAO,CAACJ,KAAD,EAAQE,aAAR,CAAP,CAAA;AACD;;;;"}