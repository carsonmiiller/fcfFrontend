{"version":3,"file":"useDialogEsc.js","sources":["../../src/_util/useDialogEsc.ts"],"sourcesContent":["import { useEffect, MutableRefObject } from 'react';\n\nconst dialogSet: Set<MutableRefObject<HTMLDivElement>> = new Set();\n\nconst useDialogEsc = (visible: boolean, dialog: MutableRefObject<HTMLDivElement>) => {\n  useEffect(() => {\n    if (visible) {\n      // 将dialog添加至Set对象\n      if (dialog?.current) {\n        dialogSet.add(dialog);\n        dialog?.current?.focus();\n      }\n    } else if (dialogSet.has(dialog)) {\n      // 将dialog从Set对象删除\n      dialogSet.delete(dialog);\n      const dialogList = [...dialogSet];\n      // 将Set对象中最后一个dialog设置为 focus\n      dialogList[dialogList.length - 1]?.current?.focus();\n    }\n    return () => {\n      // 从Set对象删除无效的 dialog\n      dialogSet.forEach((item) => {\n        if (item.current === null) {\n          dialogSet.delete(item);\n        }\n      });\n    };\n  }, [visible, dialog]);\n};\n\nexport default useDialogEsc;\n"],"names":["dialogSet","Set","useDialogEsc","visible","dialog","useEffect","current","add","focus","has","dialogList","length","forEach","item"],"mappings":";;;;;;;;;;;;;;AACA,IAAMA,SAAS,kBAAmB,IAAIC,GAAJ,EAAlC,CAAA;;AACMC,IAAAA,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD,EAAUC,MAAV,EAAqB;AACxCC,EAAAA,eAAS,CAAC,YAAM;AACd,IAAA,IAAIF,OAAJ,EAAa;AACX,MAAA,IAAIC,MAAJ,KAAIA,IAAAA,IAAAA,MAAJ,eAAIA,MAAM,CAAEE,OAAZ,EAAqB;AAAA,QAAA,IAAA,eAAA,CAAA;;QACnBN,SAAS,CAACO,GAAV,CAAcH,MAAd,CAAA,CAAA;QACAA,MAAM,KAAA,IAAN,IAAAA,MAAM,KAAA,KAAA,CAAN,+BAAAA,MAAM,CAAEE,OAAR,MAAA,IAAA,IAAA,eAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,eAAA,CAAiBE,KAAjB,EAAA,CAAA;AACD,OAAA;KAJH,MAKO,IAAIR,SAAS,CAACS,GAAV,CAAcL,MAAd,CAAJ,EAA2B;AAAA,MAAA,IAAA,WAAA,EAAA,mBAAA,CAAA;;MAChCJ,SAAS,CAAA,QAAA,CAAT,CAAiBI,MAAjB,CAAA,CAAA;;MACA,IAAMM,UAAU,GAAOV,oCAAAA,CAAAA,SAAP,CAAhB,CAAA;;MACA,CAAAU,WAAAA,GAAAA,UAAU,CAACA,UAAU,CAACC,MAAX,GAAoB,CAArB,CAAV,MAAA,IAAA,IAAA,WAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,GAAA,WAAA,CAAmCL,OAAnC,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAA4CE,KAA5C,EAAA,CAAA;AACD,KAAA;;AACD,IAAA,OAAO,YAAM;AACXR,MAAAA,SAAS,CAACY,OAAV,CAAkB,UAACC,IAAD,EAAU;AAC1B,QAAA,IAAIA,IAAI,CAACP,OAAL,KAAiB,IAArB,EAA2B;UACzBN,SAAS,CAAA,QAAA,CAAT,CAAiBa,IAAjB,CAAA,CAAA;AACD,SAAA;OAHH,CAAA,CAAA;KADF,CAAA;AAOD,GAlBQ,EAkBN,CAACV,OAAD,EAAUC,MAAV,CAlBM,CAAT,CAAA;AAmBD;;;;"}