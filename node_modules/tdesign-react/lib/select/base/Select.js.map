{"version":3,"file":"Select.js","sources":["../../../src/select/base/Select.tsx"],"sourcesContent":["import React, { useState, useEffect, Ref, useMemo, useCallback, useRef } from 'react';\nimport classNames from 'classnames';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport Tag from '../../tag';\nimport useControlled from '../../hooks/useControlled';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../_util/useConfig';\nimport forwardRefWithStatics from '../../_util/forwardRefWithStatics';\nimport { getSelectValueArr, getValueToOption } from '../util/helper';\nimport noop from '../../_util/noop';\n\nimport FakeArrow from '../../common/FakeArrow';\nimport Loading from '../../loading';\nimport SelectInput from '../../select-input';\nimport Option, { SelectOptionProps } from './Option';\nimport OptionGroup from './OptionGroup';\nimport PopupContent from './PopupContent';\n\nimport { TdSelectProps, TdOptionProps, SelectOption } from '../type';\nimport { StyledProps } from '../../common';\nimport { selectDefaultProps } from '../defaultProps';\n\nexport interface SelectProps extends TdSelectProps, StyledProps {\n  // 子节点\n  children?: React.ReactNode;\n}\n\ntype OptionsType = TdOptionProps[];\n\nconst Select = forwardRefWithStatics(\n  (props: SelectProps, ref: Ref<HTMLDivElement>) => {\n    // 国际化文本初始化\n    const [local, t] = useLocaleReceiver('select');\n    const emptyText = t(local.loadingText);\n\n    const {\n      readonly,\n      bordered,\n      borderless,\n      autoWidth,\n      creatable,\n      filter,\n      loadingText = emptyText,\n      max,\n      popupProps,\n      popupVisible,\n      onPopupVisibleChange,\n      reserveKeyword,\n      className,\n      style,\n      disabled,\n      size,\n      multiple,\n      placeholder,\n      clearable,\n      prefixIcon,\n      options,\n      filterable,\n      loading,\n      onFocus,\n      onBlur,\n      onClear = noop,\n      onCreate,\n      onRemove,\n      onSearch,\n      empty,\n      valueType,\n      keys,\n      children,\n      collapsedItems,\n      minCollapsedNum,\n      valueDisplay,\n      onEnter,\n      onVisibleChange,\n      showArrow,\n      inputProps,\n      panelBottomContent,\n      panelTopContent,\n      selectInputProps,\n      tagInputProps,\n      tagProps,\n    } = props;\n\n    const selectPopupRef = useRef();\n\n    const [value, onChange] = useControlled(props, 'value', props.onChange);\n    const { classPrefix } = useConfig();\n    const { overlayClassName, ...restPopupProps } = popupProps || {};\n\n    const name = `${classPrefix}-select`; // t-select\n\n    const [showPopup, setShowPopup] = useState(popupVisible || false);\n    const [inputValue, onInputChange] = useControlled(props, 'inputValue', props.onInputChange);\n    const [currentOptions, setCurrentOptions] = useState([]);\n    const [tmpPropOptions, setTmpPropOptions] = useState([]);\n    const [valueToOption, setValueToOption] = useState({});\n    const [selectedOptions, setSelectedOptions] = useState([]);\n\n    const selectedLabel = useMemo(() => {\n      if (multiple) {\n        return selectedOptions.map((selectedOption) => get(selectedOption || {}, keys?.label || 'label') || '');\n      }\n      return get(selectedOptions[0] || {}, keys?.label || 'label') || '';\n    }, [selectedOptions, keys, multiple]);\n\n    // 处理设置option的逻辑\n    useEffect(() => {\n      if (keys) {\n        // 如果有定制keys 先做转换\n        const transformedOptions = options?.map((option) => ({\n          ...option,\n          value: get(option, keys?.value || 'value'),\n          label: get(option, keys?.label || 'label'),\n        }));\n        setCurrentOptions(transformedOptions);\n        setTmpPropOptions(transformedOptions);\n      } else {\n        setCurrentOptions(options);\n        setTmpPropOptions(options);\n      }\n      setValueToOption(getValueToOption(children, options, keys) || {});\n    }, [options, keys, children]);\n\n    // 同步value对应的options\n    // 没太看明白effect的必要，感觉是一个useMemo而已\n    useEffect(() => {\n      setSelectedOptions((oldSelectedOptions) => {\n        const valueKey = keys?.value || 'value';\n        const labelKey = keys?.label || 'label';\n        if (Array.isArray(value)) {\n          return value\n            .map((item) => {\n              if (valueType === 'value') {\n                return (\n                  valueToOption[item as string | number] ||\n                  oldSelectedOptions.find((option) => get(option, valueKey) === item) || {\n                    [valueKey]: item,\n                    [labelKey]: item,\n                  }\n                );\n              }\n              return item;\n            })\n            .filter(Boolean);\n        }\n\n        if (value !== undefined && value !== null) {\n          if (valueType === 'value') {\n            return [\n              valueToOption[value as string | number] ||\n                oldSelectedOptions.find((option) => get(option, valueKey) === value) || {\n                  [valueKey]: value,\n                  [labelKey]: value,\n                },\n            ].filter(Boolean);\n          }\n          return [value];\n        }\n        return [];\n      });\n    }, [value, keys, valueType, valueToOption]);\n\n    const handleShowPopup = (visible: boolean) => {\n      if (disabled) return;\n      setShowPopup(visible);\n      onVisibleChange?.(visible);\n      visible && onInputChange('');\n    };\n\n    // 可以根据触发来源，自由定制标签变化时的筛选器行为\n    const onTagChange = (currentTags, context) => {\n      const { trigger, index, item, e: event } = context;\n      // backspace\n      if (trigger === 'backspace') {\n        event.stopPropagation();\n\n        let closest = -1;\n        let len = index;\n        while (len >= 0) {\n          if (!selectedOptions[len]?.disabled) {\n            closest = len;\n            break;\n          }\n          len -= 1;\n        }\n        if (closest < 0) {\n          return;\n        }\n        const values = getSelectValueArr(value, value[closest], true, valueType, keys);\n        onChange(values, context);\n        return;\n      }\n\n      if (trigger === 'clear') {\n        event.stopPropagation();\n        onChange([], context);\n        return;\n      }\n\n      if (trigger === 'tag-remove') {\n        event.stopPropagation();\n        const values = getSelectValueArr(value, value[index], true, valueType, keys);\n        onChange(values, context);\n        if (isFunction(onRemove)) {\n          onRemove({\n            value: value[index],\n            data: {\n              label: item,\n              value: value[index],\n            },\n            e: event as React.MouseEvent<HTMLDivElement, MouseEvent>,\n          });\n        }\n      }\n    };\n\n    // 选中 Popup 某项\n    const handleChange: SelectOptionProps['onSelect'] = (value) => {\n      if (multiple) {\n        !reserveKeyword && onInputChange('', { trigger: 'clear' });\n      }\n      if (creatable && isFunction(onCreate)) {\n        if ((options as OptionsType).filter((option) => option.value === value).length === 0) {\n          onCreate(value);\n        }\n      }\n      onChange?.(value, null);\n    };\n\n    // 处理filter逻辑\n    const handleFilter = (value: string) => {\n      let filteredOptions: OptionsType = [];\n      if (!value) {\n        setCurrentOptions(tmpPropOptions);\n        return;\n      }\n\n      if (filter && isFunction(filter)) {\n        // 如果有自定义的filter方法 使用自定义的filter方法\n        if (Array.isArray(tmpPropOptions)) {\n          filteredOptions = tmpPropOptions.filter((option) => filter(value, option));\n        }\n      } else if (Array.isArray(tmpPropOptions)) {\n        const filterRegExp = new RegExp(value, 'i');\n        filteredOptions = tmpPropOptions.filter((option) => filterRegExp.test(option?.label)); // 不区分大小写\n      }\n\n      if (creatable) {\n        filteredOptions = filteredOptions.concat([{ label: value, value }]);\n      }\n      setCurrentOptions(filteredOptions);\n    };\n\n    // 处理输入框逻辑\n    const handleInputChange = (value: string) => {\n      onInputChange(value);\n      if (selectedLabel === value) return;\n\n      if (isFunction(onSearch)) {\n        onSearch(value);\n        return;\n      }\n    };\n\n    const onClearValue = (context) => {\n      context.e.stopPropagation();\n      if (Array.isArray(value)) {\n        onChange([], context);\n      } else {\n        onChange(null, context);\n      }\n      onInputChange(undefined);\n      onClear(context);\n    };\n\n    useEffect(() => {\n      handleFilter(String(inputValue));\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [inputValue]);\n\n    // 渲染后置图标\n    const renderSuffixIcon = () => {\n      if (loading) {\n        return (\n          <Loading className={classNames(`${name}__right-icon`, `${name}__active-icon`)} loading={true} size=\"small\" />\n        );\n      }\n\n      return (\n        showArrow && <FakeArrow overlayClassName={`${name}__right-icon`} isActive={showPopup} disabled={disabled} />\n      );\n    };\n\n    // 渲染主体内容\n    const renderContent = () => {\n      const popupContentProps = {\n        onChange: handleChange,\n        value,\n        className,\n        size,\n        multiple,\n        showPopup,\n        setShowPopup,\n        options: currentOptions,\n        empty,\n        max,\n        loadingText,\n        loading,\n        valueType,\n        keys,\n        panelBottomContent,\n        panelTopContent,\n      };\n      return (\n        <PopupContent {...popupContentProps} ref={selectPopupRef}>\n          {children}\n        </PopupContent>\n      );\n    };\n\n    const renderValueDisplay = () => {\n      if (!valueDisplay) {\n        if (!multiple) {\n          return '';\n        }\n        return ({ value: val }) =>\n          val.map((v, key) => {\n            const filterOption: SelectOption & { disabled?: boolean } = options?.find((option) => option.label === v);\n            return (\n              <Tag\n                key={key}\n                onClose={({ e }) => {\n                  e.stopPropagation();\n                  const values = getSelectValueArr(value, value[key], true, valueType, keys);\n                  onChange(values, null);\n                  return;\n                }}\n                closable={!filterOption?.disabled}\n              >\n                {v}\n              </Tag>\n            );\n          });\n      }\n      if (typeof valueDisplay === 'string') {\n        return valueDisplay;\n      }\n      if (multiple) {\n        return ({ onClose }) => valueDisplay({ value: selectedLabel, onClose });\n      }\n      return selectedLabel.length ? (valueDisplay({ value: selectedLabel[0], onClose: noop }) as string) : '';\n    };\n\n    const renderCollapsedItems = useMemo(\n      () =>\n        collapsedItems\n          ? () =>\n              collapsedItems({\n                value: selectedLabel,\n                collapsedSelectedItems: selectedLabel.slice(minCollapsedNum, selectedLabel.length),\n                count: selectedLabel.length - minCollapsedNum,\n              })\n          : null,\n      [selectedLabel, collapsedItems, minCollapsedNum],\n    );\n\n    // 将第一个选中的option置于列表可见范围的最后一位\n    const updateScrollTop = useCallback(\n      (content: HTMLDivElement) => {\n        if (!selectPopupRef?.current) {\n          return;\n        }\n        const firstSelectedNode: HTMLDivElement = (selectPopupRef?.current as HTMLUListElement).querySelector(\n          `.${classPrefix}-is-selected`,\n        );\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      },\n      [classPrefix],\n    );\n\n    return (\n      <div className={classNames(`${name}__wrap`, className)} style={style}>\n        <SelectInput\n          autoWidth={!style?.width && autoWidth}\n          className={name}\n          ref={ref}\n          readonly={readonly}\n          allowInput={filterable}\n          multiple={multiple}\n          value={selectedLabel}\n          valueDisplay={renderValueDisplay()}\n          clearable={clearable}\n          disabled={disabled}\n          borderless={borderless || !bordered}\n          label={prefixIcon}\n          suffixIcon={renderSuffixIcon()}\n          panel={renderContent()}\n          placeholder={!multiple && showPopup && selectedLabel ? selectedLabel : placeholder || t(local.placeholder)}\n          inputValue={showPopup ? inputValue : ''}\n          tagInputProps={{\n            ...tagInputProps,\n          }}\n          tagProps={tagProps}\n          inputProps={{\n            size,\n            ...inputProps,\n          }}\n          minCollapsedNum={minCollapsedNum}\n          collapsedItems={renderCollapsedItems}\n          popupProps={{\n            overlayClassName: [`${name}__dropdown`, ['narrow-scrollbar'], overlayClassName],\n            ...restPopupProps,\n          }}\n          popupVisible={showPopup}\n          onPopupVisibleChange={onPopupVisibleChange || handleShowPopup}\n          onTagChange={onTagChange}\n          onInputChange={handleInputChange}\n          onFocus={onFocus}\n          onEnter={onEnter}\n          onBlur={onBlur}\n          onClear={(context) => {\n            onClearValue(context);\n          }}\n          updateScrollTop={updateScrollTop}\n          {...selectInputProps}\n        ></SelectInput>\n      </div>\n    );\n  },\n  {\n    Option,\n    OptionGroup,\n  },\n);\n\nSelect.displayName = 'Select';\nSelect.defaultProps = selectDefaultProps;\n\nexport default Select;\n"],"names":["Select","forwardRefWithStatics","props","ref","useLocaleReceiver","_slicedToArray","local","t","emptyText","loadingText","readonly","bordered","borderless","autoWidth","creatable","filter","max","popupProps","popupVisible","onPopupVisibleChange","reserveKeyword","className","style","disabled","size","multiple","placeholder","clearable","prefixIcon","options","filterable","loading","onFocus","onBlur","onClear","noop","onCreate","onRemove","onSearch","empty","valueType","keys","children","collapsedItems","minCollapsedNum","valueDisplay","onEnter","onVisibleChange","showArrow","inputProps","panelBottomContent","panelTopContent","selectInputProps","tagInputProps","tagProps","selectPopupRef","useRef","useControlled","onChange","value","useConfig","classPrefix","overlayClassName","restPopupProps","_objectWithoutProperties","name","useState","showPopup","setShowPopup","onInputChange","inputValue","currentOptions","setCurrentOptions","tmpPropOptions","setTmpPropOptions","valueToOption","setValueToOption","selectedOptions","setSelectedOptions","selectedLabel","useMemo","map","selectedOption","get","label","useEffect","transformedOptions","option","getValueToOption","oldSelectedOptions","valueKey","labelKey","Array","isArray","item","find","Boolean","_defineProperty","handleShowPopup","visible","onTagChange","currentTags","context","trigger","index","event","e","stopPropagation","closest","len","values","getSelectValueArr","isFunction","data","handleChange","value2","length","handleFilter","filteredOptions","filterRegExp","RegExp","test","concat","handleInputChange","onClearValue","String","renderSuffixIcon","React","createElement","Loading","classNames","FakeArrow","isActive","renderContent","popupContentProps","PopupContent","renderValueDisplay","val","v","key","filterOption","Tag","onClose","closable","renderCollapsedItems","collapsedSelectedItems","slice","count","updateScrollTop","useCallback","content","current","firstSelectedNode","querySelector","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","SelectInput","width","allowInput","suffixIcon","panel","Option","OptionGroup","displayName","defaultProps","selectDefaultProps"],"mappings":"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"}