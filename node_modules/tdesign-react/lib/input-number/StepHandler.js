/**
 * tdesign v0.34.4
 * (c) 2022 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var defineProperty = require('../_chunks/dep-a1655de1.js');
var React = require('react');
var classNames = require('classnames');
var tdesignIconsReact = require('tdesign-icons-react');
var _util_useCommonClassName = require('../_util/useCommonClassName.js');
var button_index = require('../button/index.js');
require('../_util/useConfig.js');
require('../_chunks/dep-38a46f48.js');
require('../_chunks/dep-8a149e9f.js');
require('../_chunks/dep-3b69722d.js');
require('../_chunks/dep-fde4d28a.js');
require('../_chunks/dep-e266830c.js');
require('../_chunks/dep-fcf32c81.js');
require('../_chunks/dep-3405bda4.js');
require('../_chunks/dep-15a4424e.js');
require('../_chunks/dep-c40d75ac.js');
require('../_chunks/dep-910dcfa3.js');
require('../_chunks/dep-633a5671.js');
require('../_chunks/dep-9c339ffc.js');
require('../_chunks/dep-b1a67107.js');
require('../_chunks/dep-ab43c961.js');
require('../_chunks/dep-9cacaf01.js');
require('../_chunks/dep-c72c7229.js');
require('../_chunks/dep-8e0a771d.js');
require('../_chunks/dep-c90cc28f.js');
require('../_chunks/dep-542cc308.js');
require('../_chunks/dep-c6637e11.js');
require('../_common/js/global-config/locale/zh_CN.js');
require('../config-provider/zh_CN_config.js');
require('../button/Button.js');
require('../_chunks/dep-23535a52.js');
require('../_util/useRipple.js');
require('../_util/useAnimation.js');
require('../_util/setStyle.js');
require('../_util/dom.js');
require('raf');
require('../_chunks/dep-1d819290.js');
require('../_util/easing.js');
require('../loading/index.js');
require('../loading/Loading.js');
require('../_chunks/dep-3cf9becb.js');
require('../_chunks/dep-19841e1d.js');
require('../common/Portal.js');
require('react-dom');
require('../loading/gradient.js');
require('../_common/js/loading/circle-adapter.js');
require('../_common/js/utils/set-style.js');
require('../_common/js/utils/helper.js');
require('../loading/defaultProps.js');
require('../loading/plugin.js');
require('../button/defaultProps.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var classNames__default = /*#__PURE__*/_interopDefaultLegacy(classNames);

var timer;
var triggerDelay = 500;
var stepDelay = 200;
function StepHandler(props) {
  var prefixClassName = props.prefixClassName,
      theme = props.theme,
      onStep = props.onStep,
      disabledDecrease = props.disabledDecrease,
      disabledIncrease = props.disabledIncrease,
      children = props.children;
  var commonClassNames = _util_useCommonClassName["default"]();
  var isNormalTheme = theme === "normal";
  var decreaseIcon = theme === "column" ? /* @__PURE__ */React__default["default"].createElement(tdesignIconsReact.ChevronDownIcon, null) : /* @__PURE__ */React__default["default"].createElement(tdesignIconsReact.RemoveIcon, null);
  var increaseIcon = theme === "column" ? /* @__PURE__ */React__default["default"].createElement(tdesignIconsReact.ChevronUpIcon, null) : /* @__PURE__ */React__default["default"].createElement(tdesignIconsReact.AddIcon, null);
  var onStepSaver = React.useRef();

  onStepSaver.current = function (params) {
    var type = params.type,
        e = params.e;

    if (type === "reduce") {
      disabledDecrease || onStep({
        type: type,
        e: e
      });
    }

    disabledIncrease || onStep({
      type: type,
      e: e
    });
  };

  var handleMouseDown = function handleMouseDown(e, type) {
    onStepSaver.current({
      type: type,
      e: e
    });
    setTimeout(function () {
      timer = setInterval(function () {
        onStepSaver.current({
          type: type,
          e: e
        });
      }, stepDelay);
    }, triggerDelay);
  };

  var stopInterval = function stopInterval() {
    clearInterval(timer);
    setTimeout(function () {
      clearInterval(timer);
    }, triggerDelay);
  };

  return /* @__PURE__ */React__default["default"].createElement(React__default["default"].Fragment, null, !isNormalTheme && /* @__PURE__ */React__default["default"].createElement(button_index.Button, {
    variant: "outline",
    className: classNames__default["default"]("".concat(prefixClassName, "__decrease"), defineProperty._defineProperty({}, commonClassNames.STATUS.disabled, disabledDecrease)),
    onMouseDown: function onMouseDown(e) {
      handleMouseDown(e, "reduce");
    },
    onMouseUp: stopInterval,
    onMouseLeave: stopInterval,
    icon: decreaseIcon,
    shape: "square"
  }), children, !isNormalTheme && /* @__PURE__ */React__default["default"].createElement(button_index.Button, {
    variant: "outline",
    className: classNames__default["default"]("".concat(prefixClassName, "__increase"), defineProperty._defineProperty({}, commonClassNames.STATUS.disabled, disabledIncrease)),
    onMouseDown: function onMouseDown(e) {
      handleMouseDown(e, "add");
    },
    onMouseUp: stopInterval,
    onMouseLeave: stopInterval,
    icon: increaseIcon,
    shape: "square"
  }));
}

exports["default"] = StepHandler;
//# sourceMappingURL=StepHandler.js.map
