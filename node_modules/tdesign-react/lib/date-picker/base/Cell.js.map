{"version":3,"file":"Cell.js","sources":["../../../src/date-picker/base/Cell.tsx"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../../_util/useConfig';\nimport { extractTimeObj } from '../../_common/js/date-picker/utils-new';\n\nexport interface DatePickerCellProps {\n  timeValue?: string;\n  text: [string, number];\n  value: Date;\n  active: boolean;\n  highlight: boolean;\n  disabled: boolean;\n  startOfRange: boolean;\n  endOfRange: boolean;\n  hoverHighlight: boolean;\n  hoverStartOfRange: boolean;\n  hoverEndOfRange: boolean;\n  additional: boolean;\n  now: boolean;\n  firstDayOfMonth: boolean;\n  lastDayOfMonth: boolean;\n  onClick: Function;\n  onMouseEnter: Function;\n}\n\nconst DatePickerCell = (props: DatePickerCellProps) => {\n  const { classPrefix } = useConfig();\n\n  const {\n    text,\n    value,\n    timeValue,\n    active,\n    highlight,\n    disabled,\n    startOfRange,\n    endOfRange,\n    hoverHighlight,\n    hoverStartOfRange,\n    hoverEndOfRange,\n    additional,\n    now,\n    firstDayOfMonth,\n    lastDayOfMonth,\n    onClick,\n    onMouseEnter,\n  } = props;\n\n  const cellClass = classNames(`${classPrefix}-date-picker__cell`, {\n    [`${classPrefix}-date-picker__cell--now`]: now,\n    [`${classPrefix}-date-picker__cell--active`]: active,\n    [`${classPrefix}-date-picker__cell--disabled`]: disabled,\n    [`${classPrefix}-date-picker__cell--highlight`]: highlight,\n    [`${classPrefix}-date-picker__cell--hover-highlight`]: hoverHighlight,\n    [`${classPrefix}-date-picker__cell--active-start`]: startOfRange,\n    [`${classPrefix}-date-picker__cell--active-end`]: endOfRange,\n    [`${classPrefix}-date-picker__cell--hover-start`]: hoverStartOfRange,\n    [`${classPrefix}-date-picker__cell--hover-end`]: hoverEndOfRange,\n    [`${classPrefix}-date-picker__cell--additional`]: additional,\n    [`${classPrefix}-date-picker__cell--first-day-of-month`]: firstDayOfMonth,\n    [`${classPrefix}-date-picker__cell--last-day-of-month`]: lastDayOfMonth,\n  });\n\n  function handleClick(e: React.MouseEvent) {\n    if (disabled) return;\n    if (timeValue) {\n      const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(timeValue);\n      // am pm 12小时制转化 24小时制\n      let nextHours = hours;\n      if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n      if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n      value.setHours(nextHours);\n      value.setMinutes(minutes);\n      value.setSeconds(seconds);\n      value.setMilliseconds(milliseconds);\n    }\n    onClick?.(value, { e });\n  }\n\n  function handleMouseEnter() {\n    if (disabled) return;\n    if (timeValue) {\n      const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(timeValue);\n      // am pm 12小时制转化 24小时制\n      let nextHours = hours;\n      if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n      if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n      value.setHours(nextHours);\n      value.setMinutes(minutes);\n      value.setSeconds(seconds);\n      value.setMilliseconds(milliseconds);\n    }\n    onMouseEnter?.(value);\n  }\n\n  return (\n    <td className={cellClass} onClick={handleClick} onMouseEnter={handleMouseEnter}>\n      <div className={`${classPrefix}-date-picker__cell-inner`}>{text}</div>\n    </td>\n  );\n};\n\nDatePickerCell.displayName = 'DatePickerCell';\n\nexport default DatePickerCell;\n"],"names":["DatePickerCell","props","useConfig","classPrefix","text","value","timeValue","active","highlight","disabled","startOfRange","endOfRange","hoverHighlight","hoverStartOfRange","hoverEndOfRange","additional","now","firstDayOfMonth","lastDayOfMonth","onClick","onMouseEnter","cellClass","classNames","_defineProperty","handleClick","e","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextHours","test","setHours","setMinutes","setSeconds","setMilliseconds","handleMouseEnter","React","createElement","className","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAAA,EAAA,IAAA,WAAA,CAAA;;AAChC,EAAA,IAAA,UAAA,GAAwBC,0BAAS,EAAjC;MAAQC,WAAR,cAAQA,WAAR,CAAA;;AACA,EAAA,IACEC,IADF,GAkBIH,KAlBJ,CACEG,IADF;AAAA,MAEEC,KAFF,GAkBIJ,KAlBJ,CAEEI,KAFF;AAAA,MAGEC,SAHF,GAkBIL,KAlBJ,CAGEK,SAHF;AAAA,MAIEC,MAJF,GAkBIN,KAlBJ,CAIEM,MAJF;AAAA,MAKEC,SALF,GAkBIP,KAlBJ,CAKEO,SALF;AAAA,MAMEC,QANF,GAkBIR,KAlBJ,CAMEQ,QANF;AAAA,MAOEC,YAPF,GAkBIT,KAlBJ,CAOES,YAPF;AAAA,MAQEC,UARF,GAkBIV,KAlBJ,CAQEU,UARF;AAAA,MASEC,cATF,GAkBIX,KAlBJ,CASEW,cATF;AAAA,MAUEC,iBAVF,GAkBIZ,KAlBJ,CAUEY,iBAVF;AAAA,MAWEC,eAXF,GAkBIb,KAlBJ,CAWEa,eAXF;AAAA,MAYEC,UAZF,GAkBId,KAlBJ,CAYEc,UAZF;AAAA,MAaEC,GAbF,GAkBIf,KAlBJ,CAaEe,GAbF;AAAA,MAcEC,eAdF,GAkBIhB,KAlBJ,CAcEgB,eAdF;AAAA,MAeEC,cAfF,GAkBIjB,KAlBJ,CAeEiB,cAfF;AAAA,MAgBEC,OAhBF,GAkBIlB,KAlBJ,CAgBEkB,OAhBF;AAAA,MAiBEC,YAjBF,GAkBInB,KAlBJ,CAiBEmB,YAjBF,CAAA;EAmBA,IAAMC,SAAS,GAAGC,8BAAU,CAAInB,EAAAA,CAAAA,MAAAA,CAAAA,WAAJ,kGACtBA,WADsB,EAAA,yBAAA,CAAA,EACiBa,GADjB,CAAA,EAAAO,8BAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAEtBpB,WAFsB,EAAA,4BAAA,CAAA,EAEoBI,MAFpB,CAGtBJ,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAHsB,EAGsBM,8BAAAA,CAAAA,EAAAA,QAHtB,CAItBN,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAJsB,oCAIuBK,SAJvB,CAAA,EAAAe,8BAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAKtBpB,WALsB,EAAA,qCAAA,CAAA,EAK6BS,cAL7B,CAAA,EAAAW,8BAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAMtBpB,WANsB,EAM0BO,kCAAAA,CAAAA,EAAAA,YAN1B,CAOtBP,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAPsB,EAOwBQ,gCAAAA,CAAAA,EAAAA,UAPxB,yDAQtBR,WARsB,EAAA,iCAAA,CAAA,EAQyBU,iBARzB,CAAA,EAAAU,8BAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAStBpB,WATsB,EAAA,+BAAA,CAAA,EASuBW,eATvB,CAUtBX,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAVsB,EAUwBY,gCAAAA,CAAAA,EAAAA,UAVxB,CAWtBZ,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAXsB,EAWgCc,wCAAAA,CAAAA,EAAAA,eAXhC,CAYtBd,EAAAA,8BAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAZsB,EAY+Be,uCAAAA,CAAAA,EAAAA,cAZ/B,CAA5B,EAAA,WAAA,EAAA,CAAA;;EAcA,SAASM,WAAT,CAAqBC,CAArB,EAAwB;AACtB,IAAA,IAAIhB,QAAJ,EACE,OAAA;;AACF,IAAA,IAAIH,SAAJ,EAAe;MACb,IAA4DoB,eAAAA,GAAAA,6CAAc,CAACpB,SAAD,CAA1E;UAAQqB,KAAR,mBAAQA,KAAR;UAAeC,OAAf,mBAAeA,OAAf;UAAwBC,OAAxB,mBAAwBA,OAAxB;UAAiCC,YAAjC,mBAAiCA,YAAjC;UAA+CC,QAA/C,mBAA+CA,QAA/C,CAAA;;MACA,IAAIC,SAAS,GAAGL,KAAhB,CAAA;MACA,IAAI,KAAA,CAAMM,IAAN,CAAWF,QAAX,CAAA,IAAwBC,SAAS,KAAK,EAA1C,EACEA,SAAS,IAAI,EAAb,CAAA;MACF,IAAI,KAAA,CAAMC,IAAN,CAAWF,QAAX,CAAA,IAAwBC,SAAS,GAAG,EAAxC,EACEA,SAAS,IAAI,EAAb,CAAA;MACF3B,KAAK,CAAC6B,QAAN,CAAeF,SAAf,CAAA,CAAA;MACA3B,KAAK,CAAC8B,UAAN,CAAiBP,OAAjB,CAAA,CAAA;MACAvB,KAAK,CAAC+B,UAAN,CAAiBP,OAAjB,CAAA,CAAA;MACAxB,KAAK,CAACgC,eAAN,CAAsBP,YAAtB,CAAA,CAAA;AACD,KAAA;;IACDX,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,YAAAA,OAAO,CAAGd,KAAH,EAAU;AAAEoB,MAAAA,CAAC,EAADA,CAAAA;AAAF,KAAV,CAAP,CAAA;AACD,GAAA;;AACD,EAAA,SAASa,gBAAT,GAA4B;AAC1B,IAAA,IAAI7B,QAAJ,EACE,OAAA;;AACF,IAAA,IAAIH,SAAJ,EAAe;MACb,IAA4DoB,gBAAAA,GAAAA,6CAAc,CAACpB,SAAD,CAA1E;UAAQqB,KAAR,oBAAQA,KAAR;UAAeC,OAAf,oBAAeA,OAAf;UAAwBC,OAAxB,oBAAwBA,OAAxB;UAAiCC,YAAjC,oBAAiCA,YAAjC;UAA+CC,QAA/C,oBAA+CA,QAA/C,CAAA;;MACA,IAAIC,SAAS,GAAGL,KAAhB,CAAA;MACA,IAAI,KAAA,CAAMM,IAAN,CAAWF,QAAX,CAAA,IAAwBC,SAAS,KAAK,EAA1C,EACEA,SAAS,IAAI,EAAb,CAAA;MACF,IAAI,KAAA,CAAMC,IAAN,CAAWF,QAAX,CAAA,IAAwBC,SAAS,GAAG,EAAxC,EACEA,SAAS,IAAI,EAAb,CAAA;MACF3B,KAAK,CAAC6B,QAAN,CAAeF,SAAf,CAAA,CAAA;MACA3B,KAAK,CAAC8B,UAAN,CAAiBP,OAAjB,CAAA,CAAA;MACAvB,KAAK,CAAC+B,UAAN,CAAiBP,OAAjB,CAAA,CAAA;MACAxB,KAAK,CAACgC,eAAN,CAAsBP,YAAtB,CAAA,CAAA;AACD,KAAA;;IACDV,YAAY,KAAA,IAAZ,IAAAA,YAAY,KAAA,KAAA,CAAZ,YAAAA,YAAY,CAAGf,KAAH,CAAZ,CAAA;AACD,GAAA;;AACD,EAAA,sBAAuBkC,yBAAK,CAACC,aAAN,CAAoB,IAApB,EAA0B;AAC/CC,IAAAA,SAAS,EAAEpB,SADoC;AAE/CF,IAAAA,OAAO,EAAEK,WAFsC;AAG/CJ,IAAAA,YAAY,EAAEkB,gBAAAA;AAHiC,GAA1B,iBAIJC,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC5CC,IAAAA,SAAS,YAAKtC,WAAL,EAAA,0BAAA,CAAA;GADQ,EAEhBC,IAFgB,CAJI,CAAvB,CAAA;AAOD,EA5ED;;AA6EAJ,cAAc,CAAC0C,WAAf,GAA6B,gBAA7B;;;;"}