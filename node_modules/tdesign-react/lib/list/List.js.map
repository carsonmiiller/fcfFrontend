{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport isString from 'lodash/isString';\nimport useConfig from '../_util/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\nimport { listDefaultProps } from './defaultProps';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size,\n      split,\n      stripe,\n      layout,\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style,\n    } = props;\n\n    const { classPrefix } = useConfig();\n    const [local, t] = useLocaleReceiver('list');\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    const loadElement = isString(asyncLoading) ? (\n      <div\n        className={classNames(`${classPrefix}-list__load`, {\n          [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n          [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n        })}\n        onClick={handleClickLoad}\n      >\n        {asyncLoading === 'loading' && (\n          <div>\n            <Loading loading={true} />\n            <span>{t(local.loadingText)}</span>\n          </div>\n        )}\n        {asyncLoading === 'load-more' && <span>{t(local.loadingMoreText)}</span>}\n      </div>\n    ) : (\n      asyncLoading\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(className, 't-list', {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header && <div className={`${classPrefix}-list__header`}>{header}</div>}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {asyncLoading && loadElement}\n        {footer && <div className={`${classPrefix}-list__footer`}>{footer}</div>}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\nList.defaultProps = listDefaultProps;\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","header","footer","asyncLoading","size","split","stripe","layout","children","className","onLoadMore","noop","onScroll","style","useConfig","classPrefix","useLocaleReceiver","_slicedToArray","local","t","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","isString","React","createElement","classNames","_defineProperty","onClick","Loading","loading","loadingText","loadingMoreText","ListItem","ListItemMeta","displayName","defaultProps","listDefaultProps"],"mappings":"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"}