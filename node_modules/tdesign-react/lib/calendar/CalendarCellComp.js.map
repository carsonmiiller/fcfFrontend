{"version":3,"file":"CalendarCellComp.js","sources":["../../src/calendar/CalendarCellComp.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { CalendarCell, TdCalendarProps } from './type';\nimport useConfig from '../_util/useConfig';\nimport usePrefixClass from './hooks/usePrefixClass';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { blockName } from './_util';\n\ntype extendType = Required<Pick<TdCalendarProps, 'fillWithZero' | 'mode' | 'theme' | 'cell' | 'cellAppend'>>;\ninterface CalendarCellProps extends extendType {\n  cellData: CalendarCell;\n  isCurrent: boolean;\n  isNow: boolean;\n  isDisabled?: boolean;\n  createCalendarCell: (cellData: CalendarCell) => CalendarCell;\n  onCellClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellDoubleClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellRightClick: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nconst CalendarCellComp: React.FC<CalendarCellProps> = (props) => {\n  const {\n    mode,\n    cell,\n    cellAppend,\n    theme,\n    isDisabled = false,\n    cellData,\n    isCurrent,\n    isNow,\n    fillWithZero,\n    createCalendarCell,\n    onCellClick,\n    onCellDoubleClick,\n    onCellRightClick,\n  } = props;\n\n  const [local, t] = useLocaleReceiver('calendar');\n  const monthLabelList = t(local.cellMonth).split(',');\n  /**\n   * 将 month 映射为文字输出\n   * @param month 月份下标值（起始值为0）\n   */\n  const getMonthCN = (month: number): string => monthLabelList[month];\n\n  const { calendar: calendarConfig } = useConfig();\n  const fix0 = (num: number) => {\n    const fillZero = num < 10 && (fillWithZero ?? calendarConfig.fillWithZero ?? true);\n    return fillZero ? `0${num}` : num;\n  };\n\n  const prefixCls = usePrefixClass();\n\n  return (\n    <td\n      className={prefixCls(\n        [blockName, 'table-body-cell'],\n        isDisabled ? 'is-disabled' : null,\n        isCurrent ? 'is-checked' : null,\n        isNow ? [blockName, 'table-body-cell--now'] : null,\n      )}\n      onClick={onCellClick}\n      onDoubleClick={onCellDoubleClick}\n      onContextMenu={onCellRightClick}\n    >\n      {(() => {\n        if (cell && typeof cell === 'function') return cell(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        if (cell && typeof cell !== 'function') return cell;\n        let cellCtx;\n        if (mode === 'year') {\n          // year mode：输出月\n          const mIndex = cellData.date.getMonth();\n          cellCtx = theme === 'full' ? getMonthCN(mIndex) : t(local.monthSelection, { month: `${mIndex + 1}` });\n        } else {\n          // month mode：输出天\n          cellCtx = fix0(cellData.date.getDate());\n        }\n        return <div className={prefixCls([blockName, 'table-body-cell-display'])}>{cellCtx}</div>;\n      })()}\n      {(() => {\n        let cellCtx;\n        if (cellAppend && typeof cellAppend === 'function') {\n          cellCtx = cellAppend(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        }\n        if (cellAppend && typeof cellAppend !== 'function') {\n          cellCtx = cellAppend;\n        }\n        return cellAppend && <div className={prefixCls([blockName, 'table-body-cell-content'])}>{cellCtx}</div>;\n      })()}\n    </td>\n  );\n};\n\nexport default CalendarCellComp;\n"],"names":["CalendarCellComp","props","mode","cell","cellAppend","theme","isDisabled","cellData","isCurrent","isNow","fillWithZero","createCalendarCell","onCellClick","onCellDoubleClick","onCellRightClick","useLocaleReceiver","_slicedToArray","local","t","monthLabelList","cellMonth","split","getMonthCN","month","useConfig","calendarConfig","calendar","fix0","num","fillZero","prefixCls","usePrefixClass","React","createElement","className","blockName","onClick","onDoubleClick","onContextMenu","cellCtx","mIndex","date","getMonth","monthSelection","getDate"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;AAClC,EAAA,IACEC,IADF,GAcID,KAdJ,CACEC,IADF;AAAA,MAEEC,IAFF,GAcIF,KAdJ,CAEEE,IAFF;AAAA,MAGEC,UAHF,GAcIH,KAdJ,CAGEG,UAHF;AAAA,MAIEC,KAJF,GAcIJ,KAdJ,CAIEI,KAJF;MAcIJ,iBAAAA,GAAAA,KAdJ,CAKEK,UALF;MAKEA,UALF,kCAKe,KALf,GAAA,iBAAA;AAAA,MAMEC,QANF,GAcIN,KAdJ,CAMEM,QANF;AAAA,MAOEC,SAPF,GAcIP,KAdJ,CAOEO,SAPF;AAAA,MAQEC,KARF,GAcIR,KAdJ,CAQEQ,KARF;AAAA,MASEC,YATF,GAcIT,KAdJ,CASES,YATF;AAAA,MAUEC,kBAVF,GAcIV,KAdJ,CAUEU,kBAVF;AAAA,MAWEC,WAXF,GAcIX,KAdJ,CAWEW,WAXF;AAAA,MAYEC,iBAZF,GAcIZ,KAdJ,CAYEY,iBAZF;AAAA,MAaEC,gBAbF,GAcIb,KAdJ,CAaEa,gBAbF,CAAA;;EAeA,IAAmBC,kBAAAA,GAAAA,sCAAiB,CAAC,UAAD,CAApC;AAAA,MAAA,mBAAA,GAAAC,4BAAA,CAAA,kBAAA,EAAA,CAAA,CAAA;AAAA,MAAOC,KAAP,GAAA,mBAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,CAAd,GAAA,mBAAA,CAAA,CAAA,CAAA,CAAA;;AACA,EAAA,IAAMC,cAAc,GAAGD,CAAC,CAACD,KAAK,CAACG,SAAP,CAAD,CAAmBC,KAAnB,CAAyB,GAAzB,CAAvB,CAAA;;AACA,EAAA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAA;IAAA,OAAWJ,cAAc,CAACI,KAAD,CAAzB,CAAA;GAAnB,CAAA;;AACA,EAAA,IAAA,UAAA,GAAqCC,0BAAS,EAA9C;MAAkBC,cAAlB,cAAQC,QAAR,CAAA;;AACA,EAAA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,GAAD,EAAS;AAAA,IAAA,IAAA,IAAA,CAAA;;AACpB,IAAA,IAAMC,QAAQ,GAAGD,GAAG,GAAG,EAAN,aAAalB,YAAb,KAAA,IAAA,IAAaA,YAAb,KAAA,KAAA,CAAA,GAAaA,YAAb,GAA6Be,cAAc,CAACf,YAA5C,MAAA,IAAA,IAAA,IAAA,KAAA,KAAA,CAAA,GAAA,IAAA,GAA4D,IAA5D,CAAjB,CAAA;AACA,IAAA,OAAOmB,QAAQ,GAAA,GAAA,CAAA,MAAA,CAAOD,GAAP,CAAA,GAAeA,GAA9B,CAAA;GAFF,CAAA;;EAIA,IAAME,SAAS,GAAGC,wCAAc,EAAhC,CAAA;AACA,EAAA,sBAAuBC,yBAAK,CAACC,aAAN,CAAoB,IAApB,EAA0B;AAC/CC,IAAAA,SAAS,EAAEJ,SAAS,CAAC,CAACK,wBAAD,EAAY,iBAAZ,CAAD,EAAiC7B,UAAU,GAAG,aAAH,GAAmB,IAA9D,EAAoEE,SAAS,GAAG,YAAH,GAAkB,IAA/F,EAAqGC,KAAK,GAAG,CAAC0B,wBAAD,EAAY,sBAAZ,CAAH,GAAyC,IAAnJ,CAD2B;AAE/CC,IAAAA,OAAO,EAAExB,WAFsC;AAG/CyB,IAAAA,aAAa,EAAExB,iBAHgC;AAI/CyB,IAAAA,aAAa,EAAExB,gBAAAA;AAJgC,GAA1B,EAKnB,YAAM;IACR,IAAIX,IAAI,IAAI,OAAOA,IAAP,KAAgB,UAA5B,EACE,OAAOA,IAAI,CAACD,IAAI,KAAK,OAAT,GAAmBS,kBAAkB,CAACJ,QAAD,CAArC,GAAkDA,QAAnD,CAAX,CAAA;IACF,IAAIJ,IAAI,IAAI,OAAOA,IAAP,KAAgB,UAA5B,EACE,OAAOA,IAAP,CAAA;AACF,IAAA,IAAIoC,OAAJ,CAAA;;IACA,IAAIrC,IAAI,KAAK,MAAb,EAAqB;AACnB,MAAA,IAAMsC,MAAM,GAAGjC,QAAQ,CAACkC,IAAT,CAAcC,QAAd,EAAf,CAAA;AACAH,MAAAA,OAAO,GAAGlC,KAAK,KAAK,MAAV,GAAmBiB,UAAU,CAACkB,MAAD,CAA7B,GAAwCtB,CAAC,CAACD,KAAK,CAAC0B,cAAP,EAAuB;QAAEpB,KAAK,EAAA,EAAA,CAAA,MAAA,CAAKiB,MAAM,GAAG,CAAd,CAAA;AAAP,OAAvB,CAAnD,CAAA;AACD,KAHD,MAGO;MACLD,OAAO,GAAGZ,IAAI,CAACpB,QAAQ,CAACkC,IAAT,CAAcG,OAAd,EAAD,CAAd,CAAA;AACD,KAAA;;AACD,IAAA,sBAAuBZ,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAChDC,MAAAA,SAAS,EAAEJ,SAAS,CAAC,CAACK,wBAAD,EAAY,yBAAZ,CAAD,CAAA;KADC,EAEpBI,OAFoB,CAAvB,CAAA;GAZC,EALoB,EAoBhB,YAAM;AACX,IAAA,IAAIA,OAAJ,CAAA;;AACA,IAAA,IAAInC,UAAU,IAAI,OAAOA,UAAP,KAAsB,UAAxC,EAAoD;AAClDmC,MAAAA,OAAO,GAAGnC,UAAU,CAACF,IAAI,KAAK,OAAT,GAAmBS,kBAAkB,CAACJ,QAAD,CAArC,GAAkDA,QAAnD,CAApB,CAAA;AACD,KAAA;;AACD,IAAA,IAAIH,UAAU,IAAI,OAAOA,UAAP,KAAsB,UAAxC,EAAoD;AAClDmC,MAAAA,OAAO,GAAGnC,UAAV,CAAA;AACD,KAAA;;IACD,OAAOA,UAAU,mBAAoB4B,yBAAK,CAACC,aAAN,CAAoB,KAApB,EAA2B;AAC9DC,MAAAA,SAAS,EAAEJ,SAAS,CAAC,CAACK,wBAAD,EAAY,yBAAZ,CAAD,CAAA;KADe,EAElCI,OAFkC,CAArC,CAAA;AAGD,GAXK,EApBiB,CAAvB,CAAA;AAgCD;;;;"}