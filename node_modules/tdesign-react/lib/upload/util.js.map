{"version":3,"file":"util.js","sources":["../../src/upload/util.ts"],"sourcesContent":["export function returnFileSize(number: number) {\n  if (number < 1024) {\n    return `${number} Bytes`;\n  }\n  if (number >= 1024 && number < 1048576) {\n    return `${(number / 1024).toFixed(1)} KB`;\n  }\n  if (number >= 1048576) {\n    return `${(number / 1048576).toFixed(1)} MB`;\n  }\n}\n\nexport function getCurrentDate() {\n  const d = new Date();\n  let month: string | number = d.getMonth() + 1;\n  month = month < 10 ? `0${month}` : month;\n  return `${d.getFullYear()}-${month}-${d.getDate()} ${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`;\n}\n/**\n * 缩略文件名 ABCDEFG => ABC...FG\n * @param inputName 文件名\n * @param leftCount 左边长度\n * @param rightcount 右边长度\n * @returns 缩略后的文件名\n */\nexport function abridgeName(inputName = '', leftCount = 5, rightcount = 7): string {\n  const name = inputName;\n  let leftLength = 0;\n  let rightLength = 0;\n  for (let i = 0; i < name.length; i++) {\n    const w = name[i];\n    const isCn = escape(w).indexOf('%u') === 0;\n    if (i < leftCount * 2 && leftLength < leftCount) {\n      isCn ? (leftLength += 1) : (leftLength += 2);\n    } else if (i > i - rightcount && rightLength < rightcount) {\n      isCn ? (rightLength += 1) : (rightLength += 2);\n    }\n  }\n  return name.replace(new RegExp(`^(.{${leftLength}})(.+)(.{${rightLength}})$`), '$1…$3');\n}\n\nexport const urlCreator = () => window.webkitURL || window.URL;\n\nexport function createFileURL(file: File) {\n  return urlCreator()?.createObjectURL(file);\n}\n\nexport function finishUpload(state) {\n  return ['success', 'fail'].includes(state);\n}\n\nexport function isSingleFile(multiple = false, theme: string) {\n  return !multiple && ['file', 'file-input', 'image'].includes(theme);\n}\n"],"names":["returnFileSize","number","toFixed","getCurrentDate","d","Date","month","getMonth","getFullYear","getDate","getHours","getMinutes","getSeconds","abridgeName","inputName","leftCount","rightcount","name","leftLength","rightLength","i","length","w","isCn","escape","indexOf","replace","RegExp","urlCreator","window","webkitURL","URL","createFileURL","file","createObjectURL","finishUpload","state","includes","isSingleFile","multiple","theme"],"mappings":"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"}