{"version":3,"file":"img-list.js","sources":["../../../../src/upload/themes/flow-list/img-list.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport { BrowseIcon, DeleteIcon, ErrorCircleFilledIcon } from 'tdesign-icons-react';\nimport React, { MouseEvent } from 'react';\nimport type { CommonListProps, FlowListProps } from './index';\nimport useConfig from '../../../_util/useConfig';\nimport { useLocaleReceiver } from '../../../locale/LocalReceiver';\nimport { abridgeName } from '../../util';\nimport Loading from '../../../loading';\n\ntype ImgListProps = CommonListProps & Pick<FlowListProps, 'onImgPreview' | 'remove'>;\n\nconst ImgList = (props: ImgListProps) => {\n  const { showInitial, listFiles, renderDragger, onImgPreview, remove } = props;\n  const { classPrefix: prefix } = useConfig();\n  const [locale, t] = useLocaleReceiver('upload');\n  const UPLOAD_NAME = `${prefix}-upload`;\n  const UPLOAD_NAME_CARD = `${UPLOAD_NAME}__card`;\n\n  return (\n    <div className={`${UPLOAD_NAME}__flow-card-area`}>\n      {showInitial && renderDragger()}\n      {!!listFiles.length && (\n        <ul className={`${UPLOAD_NAME_CARD} clearfix`}>\n          {listFiles.map((file, index) => (\n            <li className={`${UPLOAD_NAME_CARD}-item`} key={index}>\n              <div\n                className={classNames({\n                  [`${UPLOAD_NAME_CARD}-content`]: true,\n                  [`${UPLOAD_NAME_CARD}-content-border`]: file.status !== 'waiting',\n                })}\n              >\n                {file.status === 'fail' && (\n                  <div className={`${UPLOAD_NAME_CARD}-status-wrap`}>\n                    <ErrorCircleFilledIcon />\n                    <p>{t(locale.progress.failText)}</p>\n                  </div>\n                )}\n                {file.status === 'progress' && (\n                  <div className={`${UPLOAD_NAME_CARD}-status-wrap`}>\n                    <Loading />\n                    <p>\n                      {t(locale.progress.uploadingText)} {Math.min(file.percent, 99)}\n                    </p>\n                  </div>\n                )}\n                {(['waiting', 'success'].includes(file.status) || (!file.status && file.url)) && (\n                  <img\n                    className={`${UPLOAD_NAME_CARD}-image`}\n                    src={file.url || '//tdesign.gtimg.com/tdesign-default-img.png'}\n                    alt=\"\"\n                  />\n                )}\n                <div className={`${UPLOAD_NAME_CARD}-mask`}>\n                  {file.url && (\n                    <span className={`${UPLOAD_NAME_CARD}__mask__item`}>\n                      <BrowseIcon onClick={(e: MouseEvent) => onImgPreview(file, e)} />\n                      <span className={`${UPLOAD_NAME_CARD}__mask__item-divider`} />\n                    </span>\n                  )}\n                  <span\n                    className={`${UPLOAD_NAME_CARD}-mask__item`}\n                    onClick={(e: MouseEvent<HTMLElement>) => remove({ e, index, file })}\n                  >\n                    <DeleteIcon />\n                  </span>\n                </div>\n              </div>\n              <p className={`${UPLOAD_NAME_CARD}-name`}>{abridgeName(file.name)}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default ImgList;\n"],"names":["ImgList","props","showInitial","listFiles","renderDragger","onImgPreview","remove","useConfig","prefix","classPrefix","useLocaleReceiver","_slicedToArray","locale","t","UPLOAD_NAME","UPLOAD_NAME_CARD","React","createElement","className","length","map","file","index","key","classNames","status","ErrorCircleFilledIcon","progress","failText","Loading","uploadingText","Math","min","percent","includes","url","src","alt","BrowseIcon","onClick","e","DeleteIcon","abridgeName","name"],"mappings":"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"}