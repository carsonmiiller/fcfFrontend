{"version":3,"file":"Check.js","sources":["../../node_modules/lodash/isBoolean.js","../../src/common/Check.tsx"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","import React, { Ref, forwardRef, useContext, MouseEventHandler } from 'react';\nimport classNames from 'classnames';\nimport isBoolean from 'lodash/isBoolean';\nimport { omit } from '../_util/helper';\nimport { StyledProps } from '../common';\nimport useConfig from '../_util/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport { TdCheckboxProps } from '../checkbox/type';\n\nexport interface CheckProps extends Omit<TdCheckboxProps, 'value'>, StyledProps {\n  type: 'radio' | 'radio-button' | 'checkbox';\n  allowUncheck?: boolean;\n  value?: string | number | boolean;\n  children?: React.ReactNode;\n  onClick?: MouseEventHandler<HTMLLabelElement>;\n}\n\n/**\n * Check 组件支持使用 CheckContext 进行状态托管\n */\nexport const CheckContext = React.createContext<CheckContextValue>(null);\n\n/**\n * 托管 Check 组件的状态，请提供 inject() 方法注入托管好的 props\n */\nexport interface CheckContextValue {\n  inject: (props: CheckProps) => CheckProps;\n}\n\nconst Check = forwardRef((_props: CheckProps, ref: Ref<HTMLLabelElement>) => {\n  // 支持从 Context 注入\n  const context = useContext(CheckContext);\n  const props = context ? context.inject(_props) : _props;\n\n  const {\n    allowUncheck = false,\n    type,\n    disabled,\n    name,\n    value,\n    onChange,\n    indeterminate,\n    children,\n    label,\n    className,\n    style,\n    readonly,\n    ...htmlProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const TOnChange: (\n    checked: boolean,\n    context: {\n      e: React.ChangeEvent<HTMLInputElement> | React.MouseEvent<HTMLInputElement>;\n    },\n  ) => void = onChange;\n\n  const [internalChecked, setInternalChecked] = useControlled(props, 'checked', TOnChange);\n\n  const labelClassName = classNames(className, `${classPrefix}-${type}`, {\n    [`${classPrefix}-is-checked`]: internalChecked,\n    [`${classPrefix}-is-disabled`]: disabled,\n    [`${classPrefix}-is-indeterminate`]: indeterminate,\n  });\n\n  const input = (\n    <input\n      readOnly={readonly}\n      type={type === 'radio-button' ? 'radio' : type}\n      className={`${classPrefix}-${type}__former`}\n      checked={internalChecked}\n      disabled={disabled}\n      name={name}\n      value={isBoolean(value) ? Number(value) : value}\n      onClick={(e) => {\n        e.stopPropagation();\n        if ((type === 'radio-button' || type === 'radio') && allowUncheck) {\n          setInternalChecked(!e.currentTarget.checked, { e });\n        }\n      }}\n      onChange={(e) => setInternalChecked(e.currentTarget.checked, { e })}\n    />\n  );\n\n  return (\n    <label ref={ref} className={labelClassName} style={style} {...omit(htmlProps, ['checkAll'])}>\n      {input}\n      <span className={`${classPrefix}-${type}__input`} />\n      <span key=\"label\" className={`${classPrefix}-${type}__label`}>\n        {children || label}\n      </span>\n    </label>\n  );\n});\n\nCheck.displayName = 'Check';\n\nexport default Check;\n"],"names":["baseGetTag","require$$0","isObjectLike","require$$1","boolTag","isBoolean","value","isBoolean_1","CheckContext","React","createContext","Check","forwardRef","_props","ref","context","useContext","props","inject","allowUncheck","type","disabled","name","onChange","indeterminate","children","label","className","style","readonly","htmlProps","useConfig","classPrefix","TOnChange","useControlled","_slicedToArray","internalChecked","setInternalChecked","labelClassName","classNames","_defineProperty","input","createElement","readOnly","checked","Number","onClick","e","stopPropagation","currentTarget","omit","key","displayName"],"mappings":"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"}