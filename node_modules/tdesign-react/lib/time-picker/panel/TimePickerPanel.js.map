{"version":3,"file":"TimePickerPanel.js","sources":["../../../src/time-picker/panel/TimePickerPanel.tsx"],"sourcesContent":["import React, { FC, useMemo } from 'react';\nimport dayjs from 'dayjs';\nimport SinglePanel, { SinglePanelProps } from './SinglePanel';\n\nimport useConfig from '../../_util/useConfig';\nimport Button from '../../button';\n\nimport { useTimePickerTextConfig } from '../hooks/useTimePickerTextConfig';\nimport { DEFAULT_STEPS, DEFAULT_FORMAT } from '../../_common/js/time-picker/const';\n\nexport interface TimePickerPanelProps extends SinglePanelProps {\n  isFooterDisplay?: boolean; // 是否展示footer\n  handleConfirmClick?: (defaultValue: dayjs.Dayjs) => void;\n}\n\nconst TimePickerPanel: FC<TimePickerPanelProps> = (props) => {\n  const {\n    format = DEFAULT_FORMAT,\n    steps = DEFAULT_STEPS,\n    handleConfirmClick,\n    isFooterDisplay,\n    onChange,\n    value,\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const TEXT_CONFIG = useTimePickerTextConfig();\n\n  const panelClassName = `${classPrefix}-time-picker__panel`;\n  const showNowTimeBtn = !!steps.filter((v) => v > 1).length;\n\n  const defaultValue = useMemo(() => {\n    const isStepsSet = !!steps.filter((v) => v > 1).length;\n    if (value) {\n      return dayjs(value, format);\n    }\n    if (isStepsSet) {\n      return dayjs().hour(0).minute(0).second(0);\n    }\n    return dayjs();\n  }, [value, format, steps]);\n  return (\n    <div className={panelClassName}>\n      <div className={`${panelClassName}-section-body`}>\n        <SinglePanel {...props} format={format} steps={steps} value={value} />\n      </div>\n      {isFooterDisplay ? (\n        <div className={`${panelClassName}-section-footer`}>\n          <Button\n            theme=\"primary\"\n            variant=\"base\"\n            onClick={() => {\n              handleConfirmClick(defaultValue);\n            }}\n            size=\"small\"\n          >\n            {TEXT_CONFIG.confirm}\n          </Button>\n          {!showNowTimeBtn ? (\n            <Button theme=\"primary\" variant=\"text\" size=\"small\" onClick={() => onChange(dayjs().format(format))}>\n              {TEXT_CONFIG.nowTime}\n            </Button>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default TimePickerPanel;\n"],"names":["TimePickerPanel","props","format","DEFAULT_FORMAT","steps","DEFAULT_STEPS","handleConfirmClick","isFooterDisplay","onChange","value","useConfig","classPrefix","TEXT_CONFIG","useTimePickerTextConfig","panelClassName","showNowTimeBtn","filter","v","length","defaultValue","useMemo","isStepsSet","dayjs","hour","minute","second","React","createElement","className","SinglePanel","Button","theme","variant","onClick","size","confirm","nowTime"],"mappings":"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"}